{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Mixin",
    "define",
    "properties",
    "suite",
    "check",
    "nullable",
    "init",
    "members",
    "_getClassNameFromUrl",
    "params",
    "window",
    "location",
    "search",
    "className",
    "match",
    "setTestNamespace",
    "namespace",
    "dev",
    "unit",
    "TestSuite",
    "add",
    "setSuite",
    "runJsUnit",
    "testResult",
    "JsUnitTestResult",
    "getSuite",
    "run",
    "exportToJsUnit",
    "runStandAlone",
    "TestResult",
    "addListener",
    "e",
    "ex",
    "getData",
    "exception",
    "test",
    "error",
    "getFullName",
    "message",
    "getComment",
    "getStackTrace",
    "join",
    "getTestDescriptions",
    "desc",
    "classes",
    "getTestClasses",
    "i",
    "length",
    "cls",
    "clsDesc",
    "classname",
    "getName",
    "tests",
    "methods",
    "getTestMethods",
    "j",
    "push",
    "lang",
    "Json",
    "stringify",
    "runTests",
    "methodName",
    "runTestsFromNamespace",
    "namespaceName",
    "indexOf",
    "MTestLoader"
  ],
  "sources": [
    "/home/andresf/workspace_qooxdoo/qooxdoo/qooxdoo-7.0/source/class/qx/dev/unit/MTestLoader.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2007-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Fabian Jakobs (fjakobs)\n     * Daniel Wagner (d_wagner)\n\n************************************************************************ */\n\n/**\n * This mixin contains the methods needed to implement a loader that will\n * create a suite of unit tests from a given namespace and run it directly or\n * provide the necessary information to a more advanced runner application\n */\nqx.Mixin.define(\"qx.dev.unit.MTestLoader\", {\n  /*\n  *****************************************************************************\n     PROPERTIES\n  *****************************************************************************\n  */\n\n  properties: {\n    /** The test suite */\n    suite: {\n      check: \"qx.dev.unit.TestSuite\",\n      nullable: true,\n      init: null\n    }\n  },\n\n  /*\n  *****************************************************************************\n     PROPERTIES\n  *****************************************************************************\n  */\n\n  members: {\n    /**\n     * Parses the url parameters and tries to find the classes to test.\n     * The pattern is like <code>index.html?testclass=qx.test</code>\n     *\n     * @return {String} the class/namespace to test\n     */\n    _getClassNameFromUrl() {\n      var params = window.location.search;\n      var className = params.match(/[\\?&]testclass=([A-Za-z0-9_\\.]+)/);\n\n      if (className) {\n        className = className[1];\n      } else {\n        className = \"__unknown_class__\";\n      }\n\n      return className;\n    },\n\n    /**\n     * Sets the top level namespace of the test cases to test. All classes\n     * below this namespace extending {@link TestCase} will be tested.\n     *\n     * @param namespace {Object} Namespace to add\n     */\n    setTestNamespace(namespace) {\n      var suite = new qx.dev.unit.TestSuite();\n      suite.add(namespace);\n      this.setSuite(suite);\n    },\n\n    /**\n     * Run all tests and export the results to JSUnit\n     */\n    runJsUnit() {\n      var testResult = new qx.dev.unit.JsUnitTestResult();\n      this.getSuite().run(testResult);\n      testResult.exportToJsUnit();\n    },\n\n    /**\n     * Run tests as standalone application\n     */\n    runStandAlone() {\n      var testResult = new qx.dev.unit.TestResult();\n\n      testResult.addListener(\n        \"failure\",\n        function (e) {\n          var ex = e.getData()[0].exception;\n          var test = e.getData()[0].test;\n          this.error(\n            \"Test '\" +\n              test.getFullName() +\n              \"' failed: \" +\n              ex.message +\n              \" - \" +\n              ex.getComment()\n          );\n\n          if (ex.getStackTrace) {\n            this.error(\"Stack trace: \" + ex.getStackTrace().join(\"\\n\"));\n          }\n        },\n        this\n      );\n\n      testResult.addListener(\n        \"error\",\n        function (e) {\n          var ex = e.getData()[0].exception;\n          var test = e.getData()[0].test;\n          this.error(\n            \"The test '\" + test.getFullName() + \"' had an error: \" + ex,\n            ex\n          );\n        },\n        this\n      );\n\n      this.getSuite().run(testResult);\n    },\n\n    /**\n     * Get a list of test descriptions\n     *\n     * @return {String} A description of all tests.\n     */\n    getTestDescriptions() {\n      var desc = [];\n      var classes = this.getSuite().getTestClasses();\n\n      for (var i = 0; i < classes.length; i++) {\n        var cls = classes[i];\n        var clsDesc = {};\n        clsDesc.classname = cls.getName();\n        clsDesc.tests = [];\n        var methods = cls.getTestMethods();\n\n        for (var j = 0; j < methods.length; j++) {\n          clsDesc.tests.push(methods[j].getName());\n        }\n\n        desc.push(clsDesc);\n      }\n\n      return qx.lang.Json.stringify(desc);\n    },\n\n    /**\n     * Runs exactly one test from the test suite\n     *\n     * @param testResult {qx.dev.unit.TestResult} the result logger\n     * @param className {String} Name of the test class\n     * @param methodName {String} Name of the test method\n     */\n    runTests(testResult, className, methodName) {\n      var classes = this.getSuite().getTestClasses();\n\n      for (var i = 0; i < classes.length; i++) {\n        if (className == classes[i].getName()) {\n          var methods = classes[i].getTestMethods();\n\n          for (var j = 0; j < methods.length; j++) {\n            if (methodName && methods[j].getName() != methodName) {\n              continue;\n            }\n\n            methods[j].run(testResult);\n          }\n\n          return;\n        }\n      }\n    },\n\n    /**\n     * Runs all tests inside of the given namespace\n     *\n     * @param testResult {qx.dev.unit.TestResult} the result logger\n     * @param namespaceName {String} Namespace of the tests to run\n     */\n    runTestsFromNamespace(testResult, namespaceName) {\n      var classes = this.getSuite().getTestClasses();\n\n      for (var i = 0; i < classes.length; i++) {\n        if (classes[i].getName().indexOf(namespaceName) == 0) {\n          classes[i].run(testResult);\n        }\n      }\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}