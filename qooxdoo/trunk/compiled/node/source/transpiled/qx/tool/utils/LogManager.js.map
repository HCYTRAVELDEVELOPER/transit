{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "LEVELS",
    "zeropad2",
    "val",
    "String",
    "zeropad3",
    "PADDING",
    "padding",
    "minLen",
    "length",
    "rpad",
    "str",
    "len",
    "substring",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "t",
    "_loggers",
    "_levels",
    "_sinks",
    "_config",
    "_defaultSink",
    "tool",
    "utils",
    "LogManager",
    "consoleSink",
    "addSink",
    "forEach",
    "levelId",
    "index",
    "_defaultLevel",
    "info",
    "statics",
    "__instance",
    "createLog",
    "categoryName",
    "getInstance",
    "getLogger",
    "nullSink",
    "logger",
    "level",
    "msg",
    "dt",
    "Date",
    "getFullYear",
    "getMonth",
    "getDate",
    "getHours",
    "getMinutes",
    "getSeconds",
    "getMilliseconds",
    "console",
    "log",
    "getId",
    "members",
    "loadConfig",
    "config",
    "Json",
    "loadJsonAsync",
    "getLoggerLevel",
    "id",
    "setMinLevel",
    "Logger",
    "defaultLevel",
    "cat",
    "categories",
    "sink",
    "push",
    "removeSink",
    "indexOf",
    "splice",
    "output",
    "call",
    "setDefaultSink",
    "oldSink"
  ],
  "sources": [
    "/home/andresf/workspace_qooxdoo/qooxdoo/qooxdoo-7.0/source/class/qx/tool/utils/LogManager.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n *\n *    qooxdoo-compiler - node.js based replacement for the Qooxdoo python\n *    toolchain\n *\n *    https://github.com/qooxdoo/qooxdoo\n *\n *    Copyright:\n *      2011-2017 Zenesis Limited, http://www.zenesis.com\n *\n *    License:\n *      MIT: https://opensource.org/licenses/MIT\n *\n *      This software is provided under the same licensing terms as Qooxdoo,\n *      please see the LICENSE file in the Qooxdoo project's top-level directory\n *      for details.\n *\n *    Authors:\n *      * John Spackman (john.spackman@zenesis.com, @johnspackman)\n *\n *\n * *********************************************************************** */\n\n/**\n * @require(qx.tool.utils.Logger)\n */\n\nvar LEVELS = [\"trace\", \"debug\", \"info\", \"warn\", \"error\", \"fatal\"];\n\nfunction zeropad2(val) {\n  if (val < 10) {\n    return \"0\" + val;\n  }\n  return String(val);\n}\nfunction zeropad3(val) {\n  if (val < 10) {\n    return \"00\" + val;\n  }\n  if (val < 100) {\n    return \"0\" + val;\n  }\n  return String(val);\n}\nvar PADDING = \"\";\nfunction padding(minLen) {\n  while (PADDING.length < minLen) {\n    PADDING += \"     \";\n  }\n  return PADDING;\n}\nfunction rpad(str, len) {\n  str = String(str);\n  if (str.length < len) {\n    str = (str + padding(len)).substring(0, len);\n  }\n  return str;\n}\n\nqx.Class.define(\"qx.tool.utils.LogManager\", {\n  extend: qx.core.Object,\n\n  construct() {\n    super();\n    var t = this;\n    this._loggers = {};\n    this._levels = {};\n    this._sinks = [];\n    this._config = {};\n    this._defaultSink = qx.tool.utils.LogManager.consoleSink;\n    this.addSink(this._defaultSink);\n    LEVELS.forEach(function (levelId, index) {\n      t._levels[levelId] = index;\n    });\n    this._defaultLevel = this._levels.info;\n  },\n\n  statics: {\n    __instance: null,\n\n    /**\n     * create a logger for a specified category\n     *\n     * @param {*} categoryName\n     */\n    createLog(categoryName) {\n      if (!categoryName) {\n        categoryName = \"generic\";\n      }\n      return this.getInstance().getLogger(categoryName);\n    },\n\n    /**\n     * Returns the global instance\n     * @returns {null}\n     */\n    getInstance() {\n      if (!this.__instance) {\n        this.__instance = new qx.tool.utils.LogManager();\n      }\n      return this.__instance;\n    },\n\n    nullSink(logger, level, msg) {\n      // Nothing\n    },\n\n    consoleSink(logger, level, msg) {\n      var dt = new Date();\n      var str =\n        dt.getFullYear() +\n        \"-\" +\n        zeropad2(dt.getMonth() + 1) +\n        \"-\" +\n        zeropad2(dt.getDate()) +\n        \" \" +\n        zeropad2(dt.getHours()) +\n        \":\" +\n        zeropad2(dt.getMinutes()) +\n        \":\" +\n        zeropad2(dt.getSeconds()) +\n        \".\" +\n        zeropad3(dt.getMilliseconds());\n      console.log(\n        str +\n          \" [\" +\n          rpad(level, 5) +\n          \"] \" +\n          rpad(logger.getId(), 15, true) +\n          \" \" +\n          msg\n      );\n    }\n  },\n\n  members: {\n    async loadConfig(config) {\n      if (typeof config == \"string\") {\n        config = await qx.tool.utils.Json.loadJsonAsync(config);\n      }\n\n      var t = this;\n      this._config = config;\n      this._defaultLevel = this.getLoggerLevel(\"__default__\", \"info\");\n      for (var id in this._loggers) {\n        var logger = this._loggers[id];\n        logger.setMinLevel(t.getLoggerLevel(logger.getId()));\n      }\n    },\n\n    getLogger(id) {\n      var logger = this._loggers[id];\n      if (!logger) {\n        logger = this._loggers[id] = new qx.tool.utils.Logger(\n          id,\n          this.getLoggerLevel(id)\n        );\n      }\n      return logger;\n    },\n\n    getLoggerLevel(id, defaultLevel) {\n      var cat =\n        this._config && this._config.categories && this._config.categories[id];\n      var level = cat && cat.level;\n      if (level) {\n        level = this._levels[level];\n      }\n      if (typeof level == \"number\") {\n        return level;\n      }\n      if (defaultLevel) {\n        return this._levels[defaultLevel];\n      }\n      return this._defaultLevel;\n    },\n\n    addSink(sink) {\n      this._sinks.push(sink);\n    },\n\n    removeSink(sink) {\n      var index = this._sinks.indexOf(sink);\n      if (index > -1) {\n        this._sinks.splice(index, 1);\n      }\n    },\n\n    output(logger, level, msg) {\n      if (typeof level != \"string\") {\n        level = LEVELS[level];\n      }\n      this._sinks.forEach(function (sink) {\n        sink.call(this, logger, level, msg);\n      });\n    },\n\n    setDefaultSink(sink) {\n      var oldSink = this._defaultSink;\n      if (this._defaultSink) {\n        this.removeSink(this._defaultSink);\n      }\n      this._defaultSink = sink;\n      if (sink) {\n        this.addSink(sink);\n      }\n      return oldSink;\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}