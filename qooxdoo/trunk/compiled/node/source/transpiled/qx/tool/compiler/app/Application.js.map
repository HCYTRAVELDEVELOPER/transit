{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "path",
    "require",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "classname",
    "initType",
    "args",
    "lang",
    "Array",
    "fromArguments",
    "arguments",
    "t",
    "__classes",
    "forEach",
    "arg",
    "Type",
    "isArray",
    "append",
    "push",
    "set",
    "include",
    "exclude",
    "properties",
    "type",
    "init",
    "check",
    "apply",
    "environment",
    "nullable",
    "analyser",
    "theme",
    "name",
    "title",
    "description",
    "outputPath",
    "bootPath",
    "templatePath",
    "publish",
    "deploy",
    "standalone",
    "transform",
    "bundleInclude",
    "bundleExclude",
    "loaderTemplate",
    "writeIndexHtmlToRoot",
    "members",
    "__loadDeps",
    "__parts",
    "__requiredLibs",
    "__fatalCompileErrors",
    "__partsDeps",
    "isBrowserApp",
    "getType",
    "calcDependencies",
    "Console",
    "tool",
    "compiler",
    "getInstance",
    "getAnalyser",
    "db",
    "getDatabase",
    "allDeps",
    "utils",
    "IndexedArray",
    "fatalCompileErrors",
    "partsByName",
    "parts",
    "bootPart",
    "classDataByClassname",
    "length",
    "part",
    "getName",
    "Error",
    "decode",
    "partData",
    "getInclude",
    "getExclude",
    "classes",
    "dependsOn",
    "combine",
    "getCombine",
    "minify",
    "getMinify",
    "match",
    "app",
    "Application",
    "createWildcardMatchFunction",
    "boot",
    "createClassData",
    "classData",
    "best",
    "actual",
    "result",
    "lastMatch",
    "undefined",
    "print",
    "Assert",
    "assertTrue",
    "exact",
    "needed",
    "neededIndex",
    "stack",
    "compileAllRemainingDeps",
    "deps",
    "checked",
    "depNames",
    "search",
    "info",
    "classInfo",
    "depName",
    "dd",
    "load",
    "defer",
    "contains",
    "addDepDepth",
    "addDep",
    "fatalCompileError",
    "environmentLoadDeps",
    "required",
    "key",
    "envInfo",
    "className",
    "deferDeps",
    "remove",
    "externals",
    "external",
    "indexOf",
    "getLength",
    "getItem",
    "__expandClassnames",
    "getRequiredClasses",
    "getTheme",
    "keys",
    "partname",
    "checkPart",
    "some",
    "toArray",
    "requiredLibs",
    "assets",
    "asset",
    "pos",
    "ns",
    "substring",
    "findLibrary",
    "libraryName",
    "getFatalCompileErrors",
    "getUris",
    "uris",
    "add",
    "def",
    "replace",
    "getDependencies",
    "getPartsDependencies",
    "getRequiredLibraries",
    "getAssetUris",
    "target",
    "resManager",
    "aliases",
    "getAliases",
    "tmp",
    "alias",
    "extends",
    "themeInfo",
    "themeMeta",
    "libraryLookup",
    "classNames",
    "slice",
    "i",
    "uri",
    "prefix",
    "mappedPrefix",
    "findLibrariesForResource",
    "library",
    "getNamespace",
    "rm",
    "getResourceManager",
    "addExternalAssets",
    "arr",
    "msgId",
    "filename",
    "getAsset",
    "str",
    "getDestFilename",
    "relative",
    "join",
    "getOutputDir",
    "getLibrary",
    "lib",
    "getAddScript",
    "getAddCss",
    "m",
    "capture",
    "left",
    "right",
    "value",
    "removeAt",
    "sort",
    "lastAsset",
    "splice",
    "getClassName",
    "addPart",
    "getParts",
    "getCalculatedEnvironment",
    "Values",
    "merge",
    "getEnvironment",
    "names",
    "getLibraries",
    "symbols",
    "getKnownSymbols",
    "symbol",
    "startsWith",
    "postfix",
    "endsWith",
    "_applyType",
    "oldValue",
    "loader",
    "getTemplatePath",
    "setLoaderTemplate",
    "__transformArray",
    "statics",
    "code",
    "spec",
    "nsDepth",
    "Function"
  ],
  "sources": [
    "/home/andresf/workspace_qooxdoo/qooxdoo/qooxdoo-7.0/source/class/qx/tool/compiler/app/Application.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n *\n *    qooxdoo-compiler - node.js based replacement for the Qooxdoo python\n *    toolchain\n *\n *    https://github.com/qooxdoo/qooxdoo\n *\n *    Copyright:\n *      2011-2017 Zenesis Limited, http://www.zenesis.com\n *\n *    License:\n *      MIT: https://opensource.org/licenses/MIT\n *\n *      This software is provided under the same licensing terms as Qooxdoo,\n *      please see the LICENSE file in the Qooxdoo project's top-level directory\n *      for details.\n *\n *    Authors:\n *      * John Spackman (john.spackman@zenesis.com, @johnspackman)\n *\n * *********************************************************************** */\n\nconst path = require(\"upath\");\n\nqx.Class.define(\"qx.tool.compiler.app.Application\", {\n  extend: qx.core.Object,\n\n  /**\n   * Constructor\n   * @param classname {String|String[]} [, classname...]\n   */\n  construct(classname) {\n    super();\n    this.initType();\n    var args = qx.lang.Array.fromArguments(arguments);\n    var t = this;\n    this.__classes = [];\n    args.forEach(function (arg) {\n      if (qx.lang.Type.isArray(arg)) {\n        qx.lang.Array.append(t.__classes, arg);\n      } else {\n        t.__classes.push(arg);\n      }\n    });\n    this.set({ include: [], exclude: [] });\n  },\n\n  properties: {\n    /**\n     * The type of application to generate; note that changing this will change the `loaderTemplate`\n     * and `theme` properties\n     */\n    type: {\n      init: \"browser\",\n      check: [\"browser\", \"rhino\", \"node\"],\n      apply: \"_applyType\"\n    },\n\n    /**\n     * Environment property map\n     */\n    environment: {\n      init: null,\n      nullable: true\n    },\n\n    /**\n     * The Analyser instance\n     */\n    analyser: {\n      init: null,\n      nullable: true\n    },\n\n    /**\n     * Application theme (class name)\n     */\n    theme: {\n      init: \"qx.theme.Simple\",\n      check: \"String\"\n    },\n\n    /**\n     * The name of the application, used for script directory file unless outputPath is set\n     */\n    name: {\n      init: \"index\",\n      nullable: false,\n      check: \"String\"\n    },\n\n    /**\n     * The human readable, customer facing title of the application - it's used to customise the title\n     * of the index.html page\n     */\n    title: {\n      init: null,\n      nullable: true,\n      check: \"String\"\n    },\n\n    /**\n     * The human readable, customer facing description of the application - it's used to list applications\n     * in `qx serve`\n     */\n    description: {\n      init: null,\n      nullable: true,\n      check: \"String\"\n    },\n\n    /**\n     * Output path, relative to the target's output path\n     */\n    outputPath: {\n      init: null,\n      nullable: true,\n      check: \"String\"\n    },\n\n    /**\n     * Boot path, relative to the target's output path\n     */\n    bootPath: {\n      init: null,\n      nullable: true,\n      check: \"String\"\n    },\n\n    /**\n     * template path\n     */\n    templatePath: {\n      init: \"\",\n      nullable: false,\n      check: \"String\",\n      apply: \"_applyType\"\n    },\n\n    /**\n     * Whether this app is to be published (e.g. in the PackageBrowser).\n     * Default is true.\n     */\n    publish: {\n      check: \"Boolean\",\n      init: true\n    },\n\n    /**\n     * Whether this app is to be deployed\n     * Default is true.\n     */\n    deploy: {\n      check: \"Boolean\",\n      init: true\n    },\n\n    /**\n     * Whether this app can run on its own (true, default) or is part of another\n     * application (false)\n     */\n    standalone: {\n      check: \"Boolean\",\n      init: true\n    },\n\n    /**\n     * Classes to include with the build\n     */\n    include: {\n      nullable: false,\n      check: \"Array\",\n      transform: \"__transformArray\"\n    },\n\n    /**\n     * Classes to exclude when building\n     */\n    exclude: {\n      nullable: false,\n      check: \"Array\",\n      transform: \"__transformArray\"\n    },\n\n    /**\n     * Classes to bundle together for delivery to the client\n     */\n    bundleInclude: {\n      init: null,\n      nullable: true,\n      check: \"Array\",\n      transform: \"__transformArray\"\n    },\n\n    /**\n     * Classes to exclude from bundling together for delivery to client\n     */\n    bundleExclude: {\n      init: null,\n      nullable: true,\n      check: \"Array\",\n      transform: \"__transformArray\"\n    },\n\n    /**\n     * Template file used to create index.js; note that this is changed when the `type` property\n     * is changed\n     */\n    loaderTemplate: {\n      nullable: false,\n      check: \"String\"\n    },\n\n    /**\n     * Writes the index.html into root instead of app dir\n     */\n    writeIndexHtmlToRoot: {\n      init: false,\n      check: \"Boolean\"\n    }\n  },\n\n  members: {\n    __loadDeps: null,\n    __parts: null,\n    __requiredLibs: null,\n    __fatalCompileErrors: null,\n    __classes: null,\n    __partsDeps: null,\n\n    /**\n     * Checks if the application is for browser\n     *\n     * @returns boolean\n     */\n    isBrowserApp() {\n      return this.getType() === \"browser\";\n    },\n\n    /**\n     * Calculates the dependencies of the classes to create a load order\n     */\n    calcDependencies() {\n      var t = this;\n      var Console = qx.tool.compiler.Console.getInstance();\n      var analyser = this.getAnalyser();\n      var db = analyser.getDatabase();\n      var allDeps = new qx.tool.utils.IndexedArray();\n      var exclude = {};\n      var fatalCompileErrors = [];\n\n      this.__loadDeps = null;\n\n      var partsByName = {};\n      var parts = [];\n      var bootPart = null;\n      var classDataByClassname = {};\n\n      if (this.__parts && this.__parts.length) {\n        parts = [];\n        t.__parts.forEach(part => {\n          if (partsByName[part.getName()]) {\n            throw new Error(\n              Console.decode(\n                \"qx.tool.compiler.application.duplicatePartNames\",\n                part.getName()\n              )\n            );\n          }\n          var partData = {\n            name: part.getName(),\n            include: part.getInclude(),\n            exclude: part.getExclude(),\n            classes: [],\n            dependsOn: {},\n            combine: part.getCombine(),\n            minify: part.getMinify()\n          };\n\n          partData.match =\n            qx.tool.compiler.app.Application.createWildcardMatchFunction(\n              part.getInclude(),\n              part.getExclude()\n            );\n\n          partsByName[part.getName()] = partData;\n          parts.push(partData);\n        });\n        bootPart = partsByName.boot;\n        if (!bootPart) {\n          throw new Error(\n            Console.decode(\"qx.tool.compiler.application.noBootPart\")\n          );\n        }\n      } else {\n        bootPart = {\n          name: \"boot\",\n          include: [\"*\"],\n          exclude: [],\n          classes: [],\n          dependsOn: {},\n          combine: false,\n          minify: false,\n          match() {\n            return true;\n          }\n        };\n\n        partsByName.boot = bootPart;\n        parts.push(bootPart);\n      }\n\n      function createClassData(classname) {\n        if (classDataByClassname[classname]) {\n          return classDataByClassname[classname];\n        }\n        var classData = (classDataByClassname[classname] = {\n          classname: classname,\n          parts: {},\n          best: null,\n          actual: null\n        });\n\n        parts.forEach(part => {\n          if (part === bootPart) {\n            return;\n          }\n          var result = part.match(classname);\n          if (result !== null) {\n            classData.parts[part.name] = result;\n\n            var lastMatch =\n              classData.best && classData.parts[classData.best.name];\n            if (lastMatch === undefined || lastMatch === null) {\n              classData.best = part;\n\n              // Exact\n            } else if (lastMatch === \"exact\") {\n              if (result === \"exact\") {\n                Console.print(\n                  \"qx.tool.compiler.application.conflictingExactPart\",\n                  classname,\n                  part.name,\n                  classData.best.name\n                );\n              }\n\n              // Wildcard\n            } else {\n              qx.core.Assert.assertTrue(typeof lastMatch == \"number\");\n              if (result === \"exact\") {\n                classData.best = part;\n                classData.exact = true;\n              } else {\n                qx.core.Assert.assertTrue(typeof result == \"number\");\n                if (lastMatch === result) {\n                  Console.print(\n                    \"qx.tool.compiler.application.conflictingBestPart\",\n                    classname,\n                    part.name,\n                    classData.best.name\n                  );\n                } else if (lastMatch < result) {\n                  classData.best = part;\n                }\n              }\n            }\n          }\n        });\n        return classData;\n      }\n\n      var needed = new qx.tool.utils.IndexedArray();\n      var neededIndex = 0;\n      var stack = new qx.tool.utils.IndexedArray();\n\n      /*\n       * We could say that when a class is `.require`d, then we treat any of it's `construct:true` dependencies as `require:true`\n       * The problem is given this example:\n       *    qx.core.Init.defer()\n       *      qx.event.Registration.addListener\n       *        qx.event.Registration.getManager\n       *          qx.event.Manager.construct\n       *            new qx.util.DeferredCall\n       *\n       *    new qx.util.DeferredCall is a runtime only dependency so is not available.\n       *\n       * So the theory is that deferred calls tend to be about initialisation, so prioritising constructor dependencies\n       * may be helpful\n       */\n\n      /*\n       * Recursively finds all the dependencies for a class which have not already been added\n       * to the list of classes to load.\n       *\n       *  @param classname {String}\n       *  @param deps {String[]} array to modify\n       */\n      function compileAllRemainingDeps(classname, deps) {\n        var checked = {};\n        var depNames = {};\n        depNames[classname] = true;\n\n        function search(classname) {\n          if (checked[classname]) {\n            return;\n          }\n          checked[classname] = true;\n\n          var info = db.classInfo[classname];\n          if (info && info.dependsOn) {\n            for (var depName in info.dependsOn) {\n              var dd = info.dependsOn[depName];\n              if (dd.load || dd.require || dd.defer || dd.construct) {\n                if (!allDeps.contains(depName)) {\n                  depNames[depName] = true;\n                }\n                search(depName);\n              }\n            }\n          }\n        }\n\n        search(classname);\n        for (var depName in depNames) {\n          deps.push(depName);\n        }\n      }\n\n      var addDepDepth = 0;\n      function addDep(classname) {\n        if (exclude[classname]) {\n          return;\n        }\n        if (allDeps.contains(classname) || stack.contains(classname)) {\n          return;\n        }\n\n        var info = db.classInfo[classname];\n        if (!info) {\n          return;\n        }\n        if (info.fatalCompileError) {\n          fatalCompileErrors.push(classname);\n        }\n\n        addDepDepth++;\n\n        var environmentLoadDeps = {};\n        if (info.environment && info.environment.required) {\n          for (var key in info.environment.required) {\n            var envInfo = info.environment.required[key];\n            if (envInfo.defer) {\n              environmentLoadDeps[envInfo.className] = true;\n            }\n          }\n        }\n\n        var deferDeps = [];\n        if (info.dependsOn) {\n          stack.push(classname);\n          for (var depName in info.dependsOn) {\n            var dd = info.dependsOn[depName];\n            if (dd.load || dd.require || environmentLoadDeps[depName]) {\n              addDep(depName);\n            } else if (dd.defer) {\n              deferDeps.push(depName);\n            } else if (!allDeps.contains(depName)) {\n              needed.push(depName);\n            }\n          }\n          stack.remove(classname);\n        }\n\n        if (parts && !allDeps.contains(classname)) {\n          var classData = createClassData(classname);\n          var part = classData.best || bootPart;\n          part.classes.push(classname);\n          classData.actual = part;\n          if (info.externals) {\n            if (part.externals === undefined) {\n              part.externals = [];\n            }\n            info.externals.forEach(external => {\n              if (part.externals.indexOf(external) < 0) {\n                part.externals.push(external);\n              }\n            });\n          }\n        }\n        allDeps.push(classname);\n        deferDeps.forEach(function (depName) {\n          var deps = [];\n          compileAllRemainingDeps(depName, deps);\n          deps.forEach(addDep);\n        });\n        if (addDepDepth === 1) {\n          while (neededIndex < needed.getLength()) {\n            classname = needed.getItem(neededIndex++);\n            addDep(classname);\n          }\n        }\n        addDepDepth--;\n      }\n\n      exclude = {};\n      t.__expandClassnames(t.getExclude()).forEach(\n        name => (exclude[name] = true)\n      );\n\n      // Start the ball rolling\n      addDep(\"qx.core.Object\");\n      t.getRequiredClasses().forEach(function (classname) {\n        addDep(classname);\n      });\n      if (t.getTheme()) {\n        addDep(t.getTheme());\n      }\n      /*\n      parts.forEach((part) => {\n        if (part !== bootPart) {\n          t.__expandClassnames(part.include).forEach((name) => addDep(name));\n        }\n      });\n      */\n\n      while (neededIndex < needed.length) {\n        var classname = needed[neededIndex++];\n        addDep(classname);\n      }\n\n      if (parts && parts.length > 1) {\n        // Calculate inter-part dependencies\n        parts.forEach(part => {\n          var checked = {};\n          function check(classname) {\n            if (checked[classname]) {\n              return;\n            }\n            checked[classname] = true;\n            var classData = classDataByClassname[classname];\n            if (classData.actual !== part) {\n              part.dependsOn[classData.actual.name] = true;\n            }\n            for (var depName in db.classInfo.dependsOn) {\n              check(depName);\n            }\n          }\n          part.classes.forEach(check);\n          part.dependsOn = Object.keys(part.dependsOn);\n        });\n\n        // Check for recursive dependencies\n        parts.forEach(part => {\n          var checked = {};\n          function check(partname) {\n            if (checked[partname]) {\n              return false;\n            }\n            checked[partname] = true;\n            var checkPart = partsByName[partname];\n            if (checkPart === part) {\n              return true;\n            }\n            return part.dependsOn.some(check);\n          }\n          if (part.dependsOn.some(check)) {\n            Console.print(\n              \"qx.tool.compiler.application.partRecursive\",\n              part.name\n            );\n          }\n        });\n      }\n\n      /*\n       * Done\n       */\n\n      this.__loadDeps = allDeps.toArray();\n\n      var requiredLibs = {};\n      this.__loadDeps.forEach(classname => {\n        let classInfo = db.classInfo[classname];\n        if (classInfo.assets) {\n          classInfo.assets.forEach(asset => {\n            var pos = asset.indexOf(\"/\");\n            if (pos > -1) {\n              var ns = asset.substring(0, pos);\n              if (analyser.findLibrary(ns)) {\n                requiredLibs[ns] = true;\n              }\n            }\n          });\n        }\n        requiredLibs[classInfo.libraryName] = true;\n      });\n      this.__requiredLibs = [];\n      for (let ns in requiredLibs) {\n        if (analyser.findLibrary(ns)) {\n          this.__requiredLibs.push(ns);\n        } else {\n          Console.print(\n            \"qx.tool.compiler.application.missingRequiredLibrary\",\n            ns\n          );\n        }\n      }\n\n      this.__partsDeps = parts;\n      this.__fatalCompileErrors = fatalCompileErrors.length\n        ? fatalCompileErrors\n        : null;\n    },\n\n    /**\n     * Gets a list of class names that this Application requires which have fatal compile errors\n     *\n     * @return {String[]}\n     */\n    getFatalCompileErrors() {\n      return this.__fatalCompileErrors;\n    },\n\n    /**\n     * Gets a list of URIs for classes that are required, in load order\n     *\n     * @returns {String[]}\n     */\n    getUris() {\n      var uris = [];\n      var db = this.getAnalyser().getDatabase();\n\n      function add(classname) {\n        var def = db.classInfo[classname];\n        uris.push(\n          def.libraryName + \":\" + classname.replace(/\\./g, \"/\") + \".js\"\n        );\n      }\n      this.__loadDeps.forEach(add);\n\n      return uris;\n    },\n\n    /**\n     * Gets a list of classnames that are required, in load order\n     *\n     * @returns {String[]}\n     */\n    getDependencies() {\n      return this.__loadDeps;\n    },\n\n    /**\n     * Gets the parts dependencies structures\n     *\n     * @returns {Object[]}\n     */\n    getPartsDependencies() {\n      return this.__partsDeps;\n    },\n\n    /**\n     * Returns a list of library names which are required by the application\n     *\n     * @returns {String[]}\n     */\n    getRequiredLibraries() {\n      return this.__requiredLibs;\n    },\n\n    /**\n     * Returns a list of all of the assets required by all classes\n     * @param target {Target} the current target\n     * @param resManager  {qx.tool.compiler.resources.Manager} the resource manager\n     * @param environment {Map} environment\n     */\n    getAssetUris(target, resManager, environment) {\n      var assets = [];\n      var analyser = this.getAnalyser();\n      var db = analyser.getDatabase();\n\n      // Compile theme resource aliases\n      var aliases = {};\n      function getAliases(classname) {\n        var tmp = db.classInfo[classname];\n        if (tmp) {\n          if (tmp.aliases) {\n            for (var alias in tmp.aliases) {\n              aliases[alias] = tmp.aliases[alias];\n            }\n          }\n          if (tmp.extends) {\n            getAliases(tmp.extends);\n          }\n        }\n      }\n      var themeInfo = db.classInfo[this.getTheme()];\n      if (themeInfo && themeInfo.themeMeta) {\n        for (let name in themeInfo.themeMeta) {\n          getAliases(themeInfo.themeMeta[name]);\n        }\n      }\n\n      // Get a list of libraries used\n      var libraryLookup = {};\n\n      // Check all the classes\n      var classNames = this.__loadDeps.slice();\n      for (let i = 0; i < classNames.length; i++) {\n        var classname = classNames[i];\n        var classInfo = db.classInfo[classname];\n        var tmp = classInfo.assets;\n        if (tmp) {\n          tmp.forEach(function (uri) {\n            var pos = uri.indexOf(\"/\");\n            if (pos > -1) {\n              var prefix = uri.substring(0, pos);\n              var mappedPrefix = aliases[prefix];\n              if (mappedPrefix) {\n                uri = mappedPrefix + uri.substring(pos);\n              }\n            }\n            resManager\n              .findLibrariesForResource(uri)\n              .forEach(library =>\n                assets.push(library.getNamespace() + \":\" + uri)\n              );\n          });\n        }\n        if (!libraryLookup[classInfo.libraryName]) {\n          libraryLookup[classInfo.libraryName] = analyser.findLibrary(\n            classInfo.libraryName\n          );\n        }\n      }\n\n      var rm = analyser.getResourceManager();\n      function addExternalAssets(arr, msgId) {\n        if (arr) {\n          arr.forEach(filename => {\n            if (!filename.match(/^https?:/)) {\n              let asset = rm.getAsset(filename);\n              if (asset) {\n                let str = asset.getDestFilename(target);\n                str = path.relative(\n                  path.join(target.getOutputDir(), \"resource\"),\n                  str\n                );\n\n                assets.push(asset.getLibrary().getNamespace() + \":\" + str);\n              } else {\n                qx.tool.compiler.Console.print(msgId, filename);\n              }\n            }\n          });\n        }\n      }\n      for (let name in libraryLookup) {\n        var lib = libraryLookup[name];\n        if (lib) {\n          addExternalAssets(\n            lib.getAddScript(),\n            \"qx.tool.compiler.application.missingScriptResource\"\n          );\n\n          addExternalAssets(\n            lib.getAddCss(),\n            \"qx.tool.compiler.application.missingCssResource\"\n          );\n        }\n      }\n\n      // Expand variables\n      for (let i = 0; i < assets.length; i++) {\n        let asset = assets[i];\n\n        var m = asset.match(/\\$\\{([^}]+)\\}/);\n        if (m) {\n          var match = m[0];\n          var capture = m[1];\n          var pos = asset.indexOf(match);\n          var left = asset.substring(0, pos);\n          var right = asset.substring(pos + match.length);\n          var value = environment[capture];\n          if (value !== undefined) {\n            if (qx.lang.Type.isArray(value)) {\n              value.forEach(function (value) {\n                assets.push(left + value + right);\n              });\n            } else {\n              assets.push(left + value + right);\n            }\n          }\n          qx.lang.Array.removeAt(assets, i--);\n        }\n      }\n\n      // Remove duplicates and overlapping path wildcards\n      assets.sort();\n      for (let i = 1; i < assets.length; i++) {\n        let asset = assets[i];\n        var lastAsset = assets[i - 1];\n\n        if (asset == lastAsset) {\n          assets.splice(i--, 1);\n          continue;\n        }\n\n        if (lastAsset[lastAsset.length - 1] == \"*\") {\n          var filename = lastAsset.substring(0, lastAsset.length - 1);\n          if (asset.substring(0, filename.length) == filename) {\n            assets.splice(i--, 1);\n            continue;\n          }\n        }\n      }\n\n      return assets;\n    },\n\n    /**\n     * Returns the class name for the application\n     * @returns {String}\n     */\n    getClassName() {\n      return this.__classes[0];\n    },\n\n    /**\n     * Returns the classes required for the application\n     * @returns {String[]}\n     */\n    getRequiredClasses() {\n      var result = {};\n      this.__classes.forEach(name => (result[name] = true));\n      this.__expandClassnames(this.getInclude()).forEach(\n        name => (result[name] = true)\n      );\n\n      this.__expandClassnames(this.getExclude()).forEach(\n        name => delete result[name]\n      );\n\n      // We sort the result so that we can get a consistent ordering for loading classes, otherwise the order in\n      //  which the filing system returns the files can cause classes to be loaded in a lightly different sequence;\n      //  that would not cause a problem, except that the build is not 100% repeatable.\n      return Object.keys(result).sort();\n    },\n\n    /**\n     * Adds a part\n     * @param part {Part} the part to add\n     */\n    addPart(part) {\n      if (!this.__parts) {\n        this.__parts = [];\n      }\n      this.__parts.push(part);\n    },\n\n    /**\n     * Returns the parts, or null if there are none defined\n     * @return {Part[]}\n     */\n    getParts() {\n      return this.__parts || [];\n    },\n\n    /**\n     * Returns a dynamically calculated version of the application environment, which\n     * is defaults or dynamic values plus the `environment` property\n     *\n     * @return {Map} The environment settings\n     */\n    getCalculatedEnvironment() {\n      return qx.tool.utils.Values.merge(\n        {\n          \"qx.headless\": this.getType() != \"browser\",\n          \"qx.compiler.applicationName\": this.getName(),\n          \"qx.compiler.applicationType\": this.getType()\n        },\n\n        this.getEnvironment()\n      );\n    },\n\n    /**\n     * Expands a list of class names including wildcards (eg \"qx.ui.*\") into an\n     * exhaustive list without wildcards\n     * @param names {String[]}\n     * @return String[]\n     */\n    __expandClassnames(names) {\n      var t = this;\n      var result = {};\n      names.forEach(function (name) {\n        var pos = name.indexOf(\"*\");\n        if (pos < 0) {\n          result[name] = true;\n        } else {\n          var prefix = name.substring(0, pos);\n          if (prefix) {\n            t.getAnalyser()\n              .getLibraries()\n              .forEach(function (lib) {\n                var symbols = lib.getKnownSymbols();\n                for (var symbol in symbols) {\n                  if (symbols[symbol] == \"class\" && symbol.startsWith(prefix)) {\n                    result[symbol] = true;\n                  }\n                }\n              });\n          }\n          var postfix = name.substring(pos + 1);\n          if (postfix) {\n            t.getAnalyser()\n              .getLibraries()\n              .forEach(function (lib) {\n                var symbols = lib.getKnownSymbols();\n                for (var symbol in symbols) {\n                  if (symbols[symbol] == \"class\" && symbol.endsWith(postfix)) {\n                    result[symbol] = true;\n                  }\n                }\n              });\n          }\n        }\n      });\n      return Object.keys(result);\n    },\n\n    /**\n     * Apply for `type` property\n     */\n    _applyType(value, oldValue) {\n      var loader = path.join(\n        this.getTemplatePath(),\n        \"loader\",\n        \"loader-\" + this.getType() + \".tmpl.js\"\n      );\n\n      this.setLoaderTemplate(loader);\n    },\n\n    /**\n     * Transforms values to make sure that they are an array (and never null)\n     */\n    __transformArray(value) {\n      if (!value) {\n        return null;\n      }\n      if (!qx.lang.Type.isArray(value)) {\n        return [value];\n      }\n      return value;\n    }\n  },\n\n  statics: {\n    /**\n     * Creates a function that can perform a wildcard match to compare against a function;\n     * the function returns `null` if no match, `\"exact\"` for an exact match, or a number\n     * to indicating the number of segments in the package (eg `qx.util.*` will match\n     * `qx.util.format.DateFormat` will return 2 because there is `qx` and `util`)\n     *\n     * @param include {String[]} the wildcard specs to include\n     * @param exclude {String[]} the wildcard specs to exclude\n     * @return {Function}\n     */\n    createWildcardMatchFunction(include, exclude) {\n      var code = [];\n      if (exclude) {\n        exclude.forEach(spec => {\n          var pos;\n          if ((pos = spec.indexOf(\"*\")) > -1) {\n            code.push(\n              '  if (value.startsWith(\"' +\n                spec.substring(0, pos) +\n                '\"))\\n    return null; // ' +\n                spec\n            );\n          } else {\n            code.push('  if (value === \"' + spec + '\")\\n  return null;');\n          }\n        });\n      }\n      if (include) {\n        include.forEach(spec => {\n          var pos;\n          pos = -1;\n          var nsDepth = 0;\n          while ((pos = spec.indexOf(\".\", pos + 1)) > -1) {\n            nsDepth++;\n          }\n          if ((pos = spec.indexOf(\"*\")) > -1) {\n            code.push(\n              '  if (value.startsWith(\"' +\n                spec.substring(0, pos) +\n                '\"))\\n    return ' +\n                nsDepth +\n                \"; // \" +\n                spec\n            );\n          } else {\n            code.push('  if (value === \"' + spec + '\")\\n  return \"exact\";');\n          }\n        });\n      }\n      code.push(\"  return null;\");\n      return new Function(\"value\", code.join(\"\\n\"));\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}