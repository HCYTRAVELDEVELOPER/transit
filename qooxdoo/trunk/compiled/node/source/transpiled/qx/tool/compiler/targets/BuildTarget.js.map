{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "tool",
    "compiler",
    "targets",
    "Target",
    "properties",
    "minify",
    "init",
    "check",
    "nullable",
    "saveUnminified",
    "saveSourceInMap",
    "deployDir",
    "transform",
    "deployMap",
    "defaultEnvironment",
    "refine",
    "events",
    "minifyingApplication",
    "minifiedApplication",
    "members",
    "_writeApplication",
    "appMeta",
    "getAppMeta",
    "setSourceUri",
    "syncAssets",
    "doUglify",
    "getTarget",
    "getMinify",
    "bootMeta",
    "getBootMetaJs",
    "bootPart",
    "getParts",
    "getPackages",
    "forEach",
    "pkg",
    "setEmbedAllJavascript",
    "hasPackage",
    "setNeedsWriteToDisk",
    "addEmbeddedJs",
    "getJavascript",
    "isNeedsWriteToDisk",
    "wrap",
    "meta",
    "Uglify",
    "toString",
    "getOutputDir",
    "BuildTarget"
  ],
  "sources": [
    "/home/andresf/workspace_qooxdoo/qooxdoo/qooxdoo-7.0/source/class/qx/tool/compiler/targets/BuildTarget.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n *\n *    qooxdoo-compiler - node.js based replacement for the Qooxdoo python\n *    toolchain\n *\n *    https://github.com/qooxdoo/qooxdoo\n *\n *    Copyright:\n *      2011-2017 Zenesis Limited, http://www.zenesis.com\n *\n *    License:\n *      MIT: https://opensource.org/licenses/MIT\n *\n *      This software is provided under the same licensing terms as Qooxdoo,\n *      please see the LICENSE file in the Qooxdoo project's top-level directory\n *      for details.\n *\n *    Authors:\n *      * John Spackman (john.spackman@zenesis.com, @johnspackman)\n *\n * ************************************************************************/\n/**\n * Compiles a \"build\" application, minified and self contained application\n */\nqx.Class.define(\"qx.tool.compiler.targets.BuildTarget\", {\n  extend: qx.tool.compiler.targets.Target,\n\n  properties: {\n    /** Whether to minify the output */\n    minify: {\n      init: \"mangle\",\n      check: [\"off\", \"minify\", \"mangle\", \"beautify\"],\n      nullable: false\n    },\n\n    /** Whether to preserve unminified output */\n    saveUnminified: {\n      init: false,\n      check: \"Boolean\",\n      nullable: false\n    },\n\n    /** Whether to save the source in the map file */\n    saveSourceInMap: {\n      init: false,\n      check: \"Boolean\",\n      nullable: false\n    },\n\n    /** Deploy directory (guaranteed to have a trailing slash) */\n    deployDir: {\n      init: null,\n      nullable: true,\n      check: \"String\",\n      transform: \"_transformOutputDir\"\n    },\n\n    /** Whether to deploy the source maps */\n    deployMap: {\n      init: false,\n      check: \"Boolean\",\n      nullable: false\n    },\n\n    defaultEnvironment: {\n      init: {\n        \"qx.debug\": false\n      },\n\n      refine: true\n    }\n  },\n\n  events: {\n    /**\n     * Fired when minification begins, data is a map containing:\n     *  application {qx.tool.compiler.app.Application} the app being minified\n     *  part: {String} the part being minified\n     *  filename: {String} the part filename\n     */\n    minifyingApplication: \"qx.event.type.Data\",\n\n    /**\n     * Fired when minification is done, data is a map containing:\n     *  application {qx.tool.compiler.app.Application} the app being minified\n     *  part: {String} the part being minified\n     *  filename: {String} the part filename\n     */\n    minifiedApplication: \"qx.event.type.Data\"\n  },\n\n  members: {\n    /*\n     * @Override\n     */\n    async _writeApplication() {\n      let appMeta = this.getAppMeta();\n      appMeta.setSourceUri(\".\");\n\n      await appMeta.syncAssets();\n\n      let doUglify = appMeta.getTarget().getMinify() != \"off\";\n      let bootMeta = appMeta.getBootMetaJs();\n      let bootPart = appMeta.getParts()[0];\n      appMeta.getPackages().forEach(pkg => {\n        pkg.setEmbedAllJavascript(true);\n        if (bootPart.hasPackage(pkg)) {\n          pkg.setNeedsWriteToDisk(false);\n          bootMeta.addEmbeddedJs(pkg.getJavascript());\n        }\n        if (doUglify && pkg.isNeedsWriteToDisk()) {\n          pkg\n            .getJavascript()\n            .wrap(\n              new qx.tool.compiler.targets.meta.Uglify(\n                appMeta,\n                pkg.getJavascript()\n              )\n            );\n        }\n      });\n\n      if (doUglify) {\n        appMeta\n          .getBootMetaJs()\n          .wrap(new qx.tool.compiler.targets.meta.Uglify(appMeta, bootMeta));\n      }\n\n      return await super._writeApplication();\n    },\n\n    /*\n     * @Override\n     */\n    toString() {\n      return \"Build Target: \" + this.getOutputDir();\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}