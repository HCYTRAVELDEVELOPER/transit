{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "buffer",
    "__indent",
    "__indentStr",
    "__currentLine",
    "members",
    "write",
    "str",
    "undefined",
    "toString",
    "Error",
    "startPos",
    "pos",
    "indexOf",
    "substring",
    "length",
    "comments",
    "t",
    "forEach",
    "comment",
    "source",
    "indent",
    "count",
    "indentStr",
    "i",
    "line",
    "match",
    "matchIndent",
    "m",
    "oldIndent",
    "resetIndent",
    "tool",
    "utils",
    "json",
    "Writer"
  ],
  "sources": [
    "/home/andresf/workspace_qooxdoo/qooxdoo/qooxdoo-7.0/source/class/qx/tool/utils/json/Writer.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n *\n *    qooxdoo-compiler - node.js based replacement for the Qooxdoo python\n *    toolchain\n *\n *    https://github.com/qooxdoo/qooxdoo\n *\n *    Copyright:\n *      2011-2019 Zenesis Limited, http://www.zenesis.com\n *\n *    License:\n *      MIT: https://opensource.org/licenses/MIT\n *\n *      This software is provided under the same licensing terms as Qooxdoo,\n *      please see the LICENSE file in the Qooxdoo project's top-level directory\n *      for details.\n *\n *    Authors:\n *      * John Spackman (john.spackman@zenesis.com, @johnspackman)\n *\n * *********************************************************************** */\n\n/**\n * Writer for serialising JSON, automatically indenting as required\n */\nqx.Class.define(\"qx.tool.utils.json.Writer\", {\n  extend: qx.core.Object,\n\n  construct() {\n    super();\n    this.buffer = \"\";\n    this.__indent = 0;\n    this.__indentStr = \"\";\n    this.__currentLine = 0;\n  },\n\n  members: {\n    /**\n     * Writes a string/number.  Multiple lines are rewritten with indentation at the\n     * start of each line\n     */\n    write(str) {\n      if (str === null) {\n        str = \"null\";\n      } else if (str === undefined) {\n        str = \"undefined\";\n      } else if (typeof str === \"number\") {\n        str = str.toString();\n      } else if (typeof str === \"boolean\") {\n        str = str ? \"true\" : \"false\";\n      } else if (typeof str !== \"string\") {\n        throw new Error(\"Can only write strings and numbers\");\n      }\n\n      var startPos = 0;\n      /* eslint-disable no-constant-condition */\n      while (true) {\n        var pos = str.indexOf(\"\\n\", startPos);\n        if (pos > -1) {\n          this.buffer += str.substring(startPos, pos + 1);\n          this.__currentLine = this.buffer.length;\n          this.buffer += this.__indentStr;\n          startPos = pos + 1;\n        } else {\n          this.buffer += str.substring(startPos);\n          break;\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Outputs comments\n     */\n    comments(comments) {\n      var t = this;\n      if (comments) {\n        comments.forEach(function (comment) {\n          t.write(comment.source + \"\\n\");\n        });\n      }\n    },\n\n    /**\n     * Increases or decreases the indentation level (one indent is two spaces)\n     *\n     * @param count {Number} number to increase/decrease by\n     */\n    indent(count) {\n      if (this.__indent + count < 0) {\n        throw new Error(\"Unbalanced indent\");\n      }\n      this.__indent += count;\n\n      var indentStr = this.__indentStr;\n      if (count > 0) {\n        var str = \"\";\n        for (var i = 0; i < count; i++) {\n          str += \"  \";\n        }\n        indentStr += str;\n      } else {\n        indentStr = indentStr.substring(0, indentStr.length + count * 2);\n      }\n      var line = this.buffer.substring(this.__currentLine);\n      if (!line.match(/[^\\s]/)) {\n        this.buffer = this.buffer.substring(0, this.__currentLine) + indentStr;\n      }\n      this.__indentStr = indentStr;\n\n      return this;\n    },\n\n    /**\n     * Detects the current indentation level in the output, which has been added manually,\n     * ie outside of the `indent()` method.  When outputting an AST via `reprint()`, whitespace\n     * is copied too, this allows the code to adopt whatever indentation level has been\n     * output by the AST so that injecting `prettyPrint()`-ed new objects are at the same\\\n     * level.\n     *\n     * The old indent is returned, and should be passed to `resetIndent()` to restore the\n     * previous value.\n     *\n     * @return {Object} previous indentation\n     */\n    matchIndent() {\n      var line = this.buffer.substring(this.__currentLine);\n      var m = line.match(/^([\\s]*)/);\n      var indent = m[0];\n      var oldIndent = this.__indentStr;\n      this.__indentStr = indent;\n      return oldIndent;\n    },\n\n    /**\n     * Restores the previous indentation settings prior to `matchIndent()`\n     *\n     * @param indent {Object} previous indentation settings\n     */\n    resetIndent(indent) {\n      this.__indentStr = indent;\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}