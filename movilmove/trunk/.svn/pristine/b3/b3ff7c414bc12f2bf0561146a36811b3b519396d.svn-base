compileAndMinify=!0;var showconsolerpcresult=!1,mainNW=!1,questionExit=!1,exit=!1,inhome=!0,activebar=!1,timebar,versionNwMakerLibMobile=1.1;__infoUser={};var nw={initConnectionRPC:!1,mainActivityBackgroundMode:!1,workInBackgroundMode:!1,saldo:!1,puntucom:!1,initialize:function(p){var g=this,e=g.getGET();g.versionIndevice="1",nw.evalueData(window.localStorage.getItem("version_in_this_device"))?g.versionIndevice=window.localStorage.getItem("version_in_this_device"):(window.localStorage.setItem("version_in_this_device","1"),g.versionIndevice="1"),"undefined"!=typeof versionInAppLibDevice&&(g.versionIndevice=g.versionIndevice+"-"+versionInAppLibDevice),versionIndeviceGralDocument=g.versionIndevice;var n="config.js";"undefined"!=typeof domainExternConfigName&&(n=domainExternConfigName);var a="nwmaker/"+n+"?v="+g.versionIndevice;"undefined"!=typeof domainExternConfig&&(a=domainExternConfig+"nwmaker/"+n+"?v="+g.versionIndevice),e&&(nw.evalueData(e.conf)?a="nwmaker/"+e.conf+"?v="+g.versionIndevice:nw.evalueData(e.empresa)&&(a="nwmaker/config_"+e.empresa+".js?v="+g.versionIndevice)),nw.utils.evalueData(window.localStorage.getItem("lastVersionCacheCloud"))&&(g.versionIndevice+="--versionCloudCache-"+window.localStorage.getItem("lastVersionCacheCloud"));nw.userPolicies.getUserData();var t=[];t.push("nwmaker/fastclick.js"),t.push("nwmaker/menu.js?v="+g.versionIndevice),t.push("nwmaker/files.js?v="+g.versionIndevice);var o=t.length,i=0,r=nw.getMobileOperatingSystem(),l="";"undefined"!=typeof domainLib&&(l=domainLib),"ANDROID"===r?nw.requireCss(l+"css/android.css"):"IOS"===r?nw.requireCss(l+"css/ios.css"):"WINDOWS_PHONE"===r&&nw.requireCss(l+"css/windows_phone.css"),nw.require(a,function(){config=new config,config.dataPosition="relative",config.construct(),void 0!==config.config_crear_cuenta.pedir_empresa&&window.localStorage.setItem("empresa",config.config_crear_cuenta.pedir_empresa),void 0!==config.config_crear_cuenta.perfil&&window.localStorage.setItem("perfil",config.config_crear_cuenta.perfil);var d=nw.userPolicies.getUserData();function e(){config.domain_files_manage=config.domain_rpc,nw.evalueData(config.domain_files)&&(config.domain_files_manage=config.domain_files),nw.utils.getDebug()&&(console.log("config.domain_rpc",config.domain_rpc),console.log("config.domain_files_manage",config.domain_files_manage)),!0===config.useGeoLocation&&(!0===config.use_files_extern_by_domain_rpc?t.push("/nwmaker-geolocation.js"):t.push("nwmaker/nwmaker-geolocation.js"),o++),config.version_in_this_device=g.versionIndevice,$.each(t,function(e,n){!0===config.use_files_extern_by_domain_rpc&&(n="/nwmaker-geolocation.js"===n?domainLib+"/"+n+"?vdevice="+config.version_in_this_device+"&v="+config.version:config.domain_files_manage+config.carpet_files_extern+n+"?vdevice="+config.version_in_this_device+"&v="+config.version),nw.require(n,function(){if(++i===o){var e=new menu;void 0===e.members.start?(e.construct(),n(e)):e.construct(function(e){n(e)})}function n(e){config.menuLeft=e.menuLeft,config.versionNwMaker="0.0.0.1",nw.evalueData(d.usuario)&&(nw.evalueData(window.localStorage.getItem("theme"))?config.theme=window.localStorage.getItem("theme"):window.localStorage.setItem("theme",config.theme),nw.evalueData(window.localStorage.getItem("showConsoleDeveloper"))?config.showConsoleDeveloper=window.localStorage.getItem("showConsoleDeveloper"):window.localStorage.setItem("showConsoleDeveloper",config.showConsoleDeveloper),nw.evalueData(window.localStorage.getItem("showConsoleEvents"))?config.showConsoleEvents=window.localStorage.getItem("showConsoleEvents"):window.localStorage.setItem("showConsoleEvents",config.showConsoleEvents),window.localStorage.setItem("testing",config.testing),void 0===config.soundNotificacionDesktop&&(config.soundNotificacionDesktop=!0),nw.evalueData(window.localStorage.getItem("soundNotificacionDesktop"))?config.soundNotificacionDesktop=JSON.parse(window.localStorage.getItem("soundNotificacionDesktop")):window.localStorage.setItem("soundNotificacionDesktop",config.soundNotificacionDesktop),void 0===config.soundNotificacionDesktopVolume&&(config.soundNotificacionDesktopVolume="1.0"),void 0!==window.localStorage.getItem("soundNotificacionDesktopVolume")&&null!==window.localStorage.getItem("soundNotificacionDesktopVolume")?config.soundNotificacionDesktopVolume=window.localStorage.getItem("soundNotificacionDesktopVolume"):window.localStorage.setItem("soundNotificacionDesktopVolume",config.soundNotificacionDesktopVolume),nw.utils.getDebug()&&(console.log("config.soundNotificacionDesktopVolume",config.soundNotificacionDesktopVolume),console.log("config.soundNotificacionDesktopVolume",config.soundNotificacionDesktopVolume),console.log("window.localStorage.getItem(soundNotificacionDesktopVolume)",window.localStorage.getItem("soundNotificacionDesktopVolume")),console.log("config.soundNotificacionDesktopVolume",config.soundNotificacionDesktopVolume)),void 0===config.notificacionDesktop&&(config.notificacionDesktop=!0),void 0===config.nativeTransitions&&(config.nativeTransitions=!1),void 0!==window.plugins&&void 0!==window.plugins.nativepagetransitions&&(config.nativeTransitions=!0),nw.utils.getDebug()&&(console.log("config.nativeTransitions:::",config.nativeTransitions),console.log("app.version nwmaker:::",app.version)),nw.evalueData(window.localStorage.getItem("notificacionDesktop"))?config.notificacionDesktop=JSON.parse(window.localStorage.getItem("notificacionDesktop")):window.localStorage.setItem("notificacionDesktop",config.notificacionDesktop),window.localStorage.setItem("defaultPageTransition",config.defaultPageTransition),nw.evalueData(window.localStorage.getItem("zoomPage"))&&"normal"!==window.localStorage.getItem("zoomPage")&&$("body").append("<style>div,p,h1,h2,input,span, label {zoom: "+window.localStorage.getItem("zoomPage")+";}</style>")),nw.evalueData(config.showLabel)&&("true"!==config.showLabel&&!0!==config.showLabel||$("body").append("<style>.ui-page .nw_label{opacity: 1;top: 0;position: relative;height: auto;}</style>")),nw.evalueData(config.login_generate_code)||(config.login_generate_code=!1),nw.evalueData(config.login_solicitar_code)||(config.login_solicitar_code=!1),"undefined"!=typeof device&&(config.device=device.platform+" "+device.model+" "+device.version);var n="";void 0!==d.usuario?(nw.evalueData(config.home_background_color)&&(n+=".home_background_color{background-color:"+config.home_background_color+";}"),nw.evalueData(config.home_background_image)&&(n+=".home_background_image{background-image:url("+config.home_background_image+");}")):(nw.evalueData(config.login_background_color)&&(n+=".home_background_color{background-color:"+config.login_background_color+";}"),nw.evalueData(config.login_background_image)&&(n+=".home_background_image{background-image:url("+config.login_background_image+");}")),""!==n&&$("body").append("<style>"+n+"</style>");var a=new files;a.construct();var t=a.files,o="nwmaker/main.js?vdevice="+config.version_in_this_device+"&v="+config.version;if(!0===config.use_files_extern_by_domain_rpc&&(o=config.domain_files_manage+config.carpet_files_extern+"nwmaker/main.js?vdevice="+config.version_in_this_device+"&v="+config.version),t.push(o),"undefined"!=typeof compileAndMinify&&!0===compileAndMinify){var i=[],r="";r="undefined"==typeof domainLib?"":(r=domainLib.replace("nwmaker/","")).replace("nwmaker",""),i.push(r+"code.min.js?vdevice="+config.version_in_this_device+"&v="+config.version),t=i}if(console.log("files!",t),$(document).bind("mobileinit",function(){$.mobile.page.prototype.options.keepNative="select, input.foo, textarea.bar",$.mobile.loader.prototype.options.disabled=!0,$.mobile.allowCrossDomainPages=!0,$.mobile.ajaxEnabled=!1,$.mobile.buttonMarkup.hoverDelay=0,$.mobile.touchOverflowEnabled=!0,$.mobile.phonegapNavigationEnabled=!0,$.mobile.page.prototype.options.domCache=!0,$.mobile.transitionFallbacks.slideout="none"}),nw.actionsButtons(),nw.onNavigateActive(),nw.actionNavigate(),nw.evalueData(d.usuario)){if(!nw.evalueData(d.cambio_clave)&&!0===config.changePass)return nw.changePass(),!1;var l=config.config_crear_cuenta;if(!0===l.pedir_politicas&&!0===l.pedir_politicas_in_session_create&&!nw.evalueData(d.acepto_terminos_condiciones))return void nw.createAccount.politicasApp();var s=nw.getActualDate(),c=window.localStorage.getItem("fecha_last_pregunta_update"),u=!1;if(c<s&&(u=!0),nw.evalueData(c)||(u=!0),nw.evalueData(config.requiredUpdateLastVersion)&&(u=!0),u){if(g.loadFilesAndMainHome(t,p),setTimeout(function(){nw.searchUpdatesApp(!0,function(e){})},3e3),nw.buscarActualizaciones.searchUpdatesAppInBack(),nw.evalueData(config.requiredUpdateLastVersion))return!0}else g.loadFilesAndMainHome(t,p)}else g.loadFilesAndMainHome(t,p)}},!0)})}config.idiomaPorDefecto&&!nw.utils.evalueData(d.usuario)&&window.localStorage.setItem("idioma_config",config.idiomaPorDefecto),!0===config.useTranslateStr?nw.utils.getTranslateServer(function(){e()}):e()})},createStar:function(e){},loadFilesAndMainHome:function(e,i){var r=this;config.homeLoaded(function(){var t=e.length,o=0;$.each(e,function(e,n){!0===config.use_files_extern_by_domain_rpc&&-1!==n.indexOf("js/")&&(n=config.domain_files_manage+config.carpet_files_extern+n+"?vdevice="+config.version_in_this_device);var a="?";-1!==n.indexOf("?")&&(a="&"),nw.loadJs(n+a+"v="+config.version,function(){if(++o===t){!function(){var e=nw.userPolicies.getUserData();if(nw.utils.validateLang(),!nw.evalueData(e.celular_validado)&&!0===config.config_crear_cuenta.verificar_celular_con_codigo||"NO"===e.celular_validado&&!0===config.config_crear_cuenta.verificar_celular_con_codigo)return nw.utils.menuResetInitial(),nw.ingresaPhoneParaValidar(),nw.utils.addCss(".ui-navbar{display:none;}");main=new main,main.construct(),i(),setTimeout(function(){r.activeLatsConnect()},3e4),nw.isMobile()||nw.evalueData(config.activeLastConnectDetectInactivity)&&!0===config.activeLastConnectDetectInactivity&&nw.utils.inactivityTime()}(),!0===config.validateSession&&!0===nw.isOnline()&&setTimeout(function(){r.refreshSessionApp()},2e3)}})}),nw.loadFastClick()})},removeSplash:function(){nw.utils.removeSplash()},barcodeScanner:function(e){nw.utils.barcodeScanner(e)},backgroundMode:function(e){nw.utils.backgroundMode(e)},execnclick:function(e,n){nw.buttons.execnclick(e,n)},focus:function(e,n){nw.buttons.focus(e,n)},focusout:function(e,n){nw.buttons.focusout(e,n)},nclick:function(e,n){nw.buttons.nclick(e,n)},actionsButtons:function(){nw.buttons.actionsButtons()},object:function(){this.base=function(){}},Class:{define:function(e,n){var a=e.split("."),t=e;void 0!==a[1]?(void 0===window[a[0]]&&(window[a[0]]=[]),window[a[0]][a[1]]=function(){try{var e={};e[0]=arguments[0],e[1]=arguments[1],e[2]=arguments[2],n.construct(e[0],e[1],e[3]);var a=new n.extend;a.id=nw.createRandomId()}catch(e){nw.utils.errorReport("Error creating page",e)}return a.setTitle="",a.role="page",a.changeHash=!0,a.showMinimize=!1,a.html="",a.showBack=!0,a.closeBack=!1,a.closeBackCallBack=!1,a.isCreateInPageShow=!1,a.container="body",a.transition=config.defaultPageTransition,"undefined"!=typeof config&&(a.styleCloseIOS=config.styleCloseIOS,a.colorBtnBackIOS=config.colorBtnBackIOS),a.createBase=function(){var e=new nw.newPage;e.id=a.id,a.isCreateInPageShow=!0,e.isCreateInPageShow=!0,e.role=a.role,nw.utils.getDebug()&&console.log("self.role",a.role),e.changeHash=a.changeHash,e.drag=a.drag,e.showMinimize=a.showMinimize,e.showBack=a.showBack,e.closeBack=a.closeBack,e.transition=a.transition,e.textClose=a.textClose,e.styleCloseIOS=a.styleCloseIOS,e.iconBackClose=a.iconBackClose,e.colorBtnBackIOS=a.colorBtnBackIOS,e.closeBackCallBack=a.closeBackCallBack,e.logotipo_text="<span class='setTitle'>"+nw.utils.tr(a.setTitle)+"</span>",e.html=a.html,e.container=a.container,e.createBase(),a.canvas="#"+e.id},$.each(n,function(e,n){a[e]=n}),$.each(n.members,function(e,n){a[e]=n}),a},void 0!==n.statics&&$.each(n.statics,function(e,n){nw.evalueData(n)&&(window[a[0]][a[1]][n.name]=n)})):window[t]=function(){var a=new n.extend;return a.id=nw.createRandomId(),a.setTitle="",a.role="page",a.changeHash=!0,a.showMinimize=!1,a.html="",a.showBack=!0,a.closeBack=!1,a.closeBackCallBack=!1,a.isCreateInPageShow=!1,a.transition=config.defaultPageTransition,a.styleCloseIOS=config.styleCloseIOS,a.colorBtnBackIOS=config.colorBtnBackIOS,a.container="body",a.createBase=function(){var e=new nw.newPage;e.id=a.id,e.role=a.role,e.drag=a.drag,a.isCreateInPageShow=!0,e.isCreateInPageShow=!0,e.changeHash=a.changeHash,e.showMinimize=a.showMinimize,e.showBack=a.showBack,e.closeBack=a.closeBack,e.transition=a.transition,e.textClose=a.textClose,e.styleCloseIOS=a.styleCloseIOS,e.iconBackClose=a.iconBackClose,e.colorBtnBackIOS=a.colorBtnBackIOS,e.closeBackCallBack=a.closeBackCallBack,e.logotipo_text="<span class='setTitle'>"+nw.utils.tr(a.setTitle)+"</span>",e.html=a.html,e.container=a.container,e.createBase(),a.canvas="#"+e.id},$.each(n,function(e,n){a[e]=n}),$.each(n.members,function(e,n){a[e]=n}),a}}},loadFastClick:function(){nw.utils.loadFastClick()},showImg:function(e){nw.utils.showImg(e)},loadSDKFB:function(e){nw.fb.loadSDKFB(e)},statusChangeCallback:function(e){nw.fb.statusChangeCallback(e)},checkLoginState:function(){nw.fb.checkLoginState()},connectFB:function(){nw.fb.connectFB()},fb_logout:function(){nw.fb.fb_logout()},fb_login:function(){nw.fb.fb_login()},saveOrLoginFBConnect:function(e){nw.fb.saveOrLoginFBConnect(e)},suscribedUserNotificacionPush:function(){nw.notificationPush.suscribedUserNotificacionPush()},unSuscribedUserNotificacionPush:function(e){nw.notificationPush.unSuscribedUserNotificacionPush(e)},sendNotificacion:function(e,n){nw.notificationPush.sendNotificacion(e,n)},devicePrinter:function(){nw.bluetooth.devicePrinter()},deviceConnect:function(e){nw.bluetooth.deviceConnect(e)},bluetoothSerialList:function(){nw.bluetooth.bluetoothSerialList()},conectDevice:function(e){nw.bluetooth.conectDevice(e)},uploadFileCamera:function(e,n,a,t,o,i,r,l,s,c){return nw.uploaderFileSrv.uploadFileCamera(e,n,a,t,o,i,r,l,s,c)},uploadFile:function(e,n){nw.uploaderFileSrv.uploadFile(e,n)},openLink:function(e,n,a){nw.utils.openLink(e,n,a)},conteoRegresivoPorFechaHora:function(e,n){nw.utils.conteoRegresivoPorFechaHora(e,n)},userPolicies:{getUserData:function(){return localStorage}},setUserInfo:function(e,n){nw.account.setUserInfo(e,n)},searchUpdatesApp:function(e,n){return nw.buscarActualizaciones.searchUpdatesApp(e,n)},testing:function(){return nw.utils.testing()},getGeoLocation:function(e,n,a){var t="nwmaker/nwmaker-geolocation.js";"undefined"!=typeof domainLib&&(t=domainLib+"nwmaker-geolocation.js"),nw.loadJs(t,function(){nwgeo.initialize(e,n,a)})},getMobileOperatingSystem:function(){return nw.utils.getMobileOperatingSystem()},validateBtnMaterialIcons:function(e){return nw.buttons.validateBtnMaterialIcons(e)},getBtnMaterialIcons:function(e){return nw.buttons.getBtnMaterialIcons(e)},createButton:function(e){return nw.buttons.createButton(e)},requireCss:function(e,n){if(document.createStyleSheet)document.createStyleSheet(e);else{var a=e.replace(/\//gi,"");a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=a.replace(/\#/gi,"")).replace(/\:/gi,"")).replace(/\?/gi,"")).replace(/\=/gi,"")).replace(/\./gi,"")).replace(/\,/gi,"")).replace(/\&/gi,"")).replace(/\=/gi,"")).replace(/\_/gi,"")).replace(/\-/gi,"")).replace(".","");var t=e,o=document.createElement("link");o.id=a,o.rel="stylesheet",o.type="text/css",o.href=t;var i=document.querySelector("#"+a);nw.evalueData(i)||(void 0!==n?$(n).append(o):document.getElementsByTagName("head")[0].appendChild(o))}},getElement:function(e){return nw.utils.getElement(e)},require:function(e,n,a){return nw.loadJs(e,n,a)},loadJs:function(e,n,a,t){try{var o="async";void 0===a&&(a=!0),a||(o="");var i=e.replace(/\//gi,"");i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=i.replace(/\@/gi,"")).replace(/\:/gi,"")).replace(/\?/gi,"")).replace(/\=/gi,"")).replace(/\./gi,"")).replace(/\,/gi,"")).replace(/\&/gi,"")).replace(/\=/gi,"")).replace(/\_/gi,"")).replace(/\-/gi,"")).replace(/\</gi,"")).replace(/\}/gi,"")).replace(/\{/gi,"")).replace(".","");var r="";"undefined"!=typeof versionIndeviceGralDocument&&(r=versionIndeviceGralDocument);var l=document.createElement("script");l.type="text/javascript",l.id=i,l.className=i,l.charset="UTF-8",l.async=o,t?-1!==e.indexOf("?")?l.src=e+"&v="+r:l.src=e+"?v="+r:l.src=e;var s=document.querySelector("."+i);nw.evalueData(s)?nw.evalueData(n)&&n():(l.onload=function(){nw.evalueData(n)&&n()},!0===a?document.getElementsByTagName("head")[0].appendChild(l):$("body").append(l))}catch(e){console.log("error in loadJS",e),nw.utils.errorReport("error in loadJS e:::: "+e)}},fadeInOutLabelInput:function(e){var n=$(e).attr("name"),a=e.value,t=e.parent;if("checkBox"===$(e).attr("type"))return!1;nw.evalueData(t)&&($(t.canvas+" .nw_label_"+n).removeClass("showLabelClick"),nw.evalueData(a)&&$(t.canvas+" .nw_label_"+n).addClass("showLabelClick"))},stripTags:function(e){return nw.utils.stripTags(e)},strip_tags:function(e){return nw.utils.strip_tags(e)},back:function(){history.back()},toDatetimeLocal:function(e){return nw.utils.toDatetimeLocal(e)},loadingRemove:function(e){return nw.preloader.loadingRemove(e)},loading:function(e){return nw.preloader.loading(e)},loading2:function(e){return nw.preloader.loading2(e)},validaValType:function(e){var n=$(e).attr("data-type"),a=$(e).val();"dateField"===n?nw.evalueData(a)?$(e).attr({type:"date"}):$(e).attr({type:"text"}):"time"===n?nw.evalueData(a)?$(e).attr({type:"time"}):$(e).attr({type:"text"}):"dateTime"===n&&(nw.evalueData(a)?$(e).attr({type:"datetime-local"}):$(e).attr({type:"text"}))},isMobile:function(){return nw.utils.isMobile()},console_log:function(e,n,a,t){nw.consoleEvent(e,n,a,t)},consoleLog:function(e,n,a,t){nw.consoleEvent(e,n,a,t)},consolelog:function(e,n,a,t){nw.consoleEvent(e,n,a,t)},console:{log:function(e,n,a,t){nw.consoleEvent(e,n,a,t)}},consoleEvent:function(e,n,a,t){var o=!1;nw.evalueData(mainNW.showConsoleEvents)&&(o=mainNW.showConsoleEvents),nw.evalueData(window.localStorage.getItem("showConsoleEvents"))&&(o=window.localStorage.getItem("showConsoleEvents"));var i=!1;if(nw.evalueData(mainNW.showConsoleDeveloper)&&(i=mainNW.showConsoleDeveloper),nw.evalueData(window.localStorage.getItem("showConsoleDeveloper"))&&(i=window.localStorage.getItem("showConsoleDeveloper")),"controls"===a&&(!1===o||"false"===o))return!1;var r=":: ";"object"==typeof e?$.each(e,function(e,n){r+=e+": ",nw.evalueData(n,0)&&("object"==typeof n?$.each(n,function(e,n){r+=e+": "+n+","}):r+=n+"<br />"),r+="<br /><br />"}):(r+=e+" ",nw.evalueData(n)&&("object"==typeof n?(r+=" ",$.each(n,function(e,n){r+=" "+e+": "+n+"<br />"})):r+=n+" "));var l="";nw.evalueData(t)&&nw.evalueData(t.id)&&(l=t.id+"::::::<br />");for(var s=(new Error).stack.split("\n"),c=0;c<s.length;c++)l+=s[c]+"<br />";!0!==i&&"true"!==i||$(".consoleEventsNw").append("<br /><div class='bloqConsoleLog'><div class='containOriginConsoleNw'>"+l+"</div><div class='containEventConsoleNw'>"+r+"</div></div>"),$(".consoleEventsNw").scrollTop(1e11);nw.evalueData(n)},home:function(){nw.loadHome()},loadHome:function(){nw.utils.getDebug()&&(console.log("loadHome"),console.log("%c<<<<loadHome>>>>","background: blue; color: #fff")),nw.changePage(""),nw.consoleEvent("load home",!1,"controls"),!1!==config.useCleanAllWindow&&setTimeout(function(){nw.cleanAllWindow()},300),window.location.href.split("#")[0]},changePage:function(e,n){$.mobile.changePage(e,n)},cleanAllWindow:function(){nw.utils.getDebug()&&console.log("cleanAllWindow"),$(".pageNew").remove()},onNavigateActive:function(){$(window).on("navigate",function(e,n){var a=n.state.direction;if(nw.consoleEvent("navigate direction",a,"controls"),!0===questionExit)return nw.closeApp(),!1;var t=300;if(nw.rpc.closeConnection(),"back"===a&&(nw.utils.getDebug()&&console.log("Back page"),nw.loadingRemove(),t=70,nw.utils.getDebug()&&console.log("nw.newPage.lastTransition",nw.newPage.lastTransition),nw.evalueData(nw.newPage.lastTransition)&&config.nativeTransitions)){var o=config.nativeTransitions,i="right";"slideup"===config.nativeTransitions&&(i="down"),"slidedown"===config.nativeTransitions&&(i="up");var r={direction:i,duration:300,iosdelay:60,androiddelay:70,slowdownfactor:4},l=function(e){console.log("flip success: "+e)},s=function(e){console.log("flip error: "+e),nw.errorLogger.process("flip error: "+e)};nw.utils.getDebug()&&console.log("transition",o),"slidefade"===o?window.plugins.nativepagetransitions.fade(r,l,s):"slide"===o||"slideup"===o||"slidedown"===o?window.plugins.nativepagetransitions.slide(r,l,s):"flip"===o?window.plugins.nativepagetransitions.flip(r,l,s):window.plugins.nativepagetransitions.slide(r,l,s)}var c=$(".ui-page");if(nw.utils.getDebug()&&nw.console.log("Total pages",c.length),void 0!==c.length&&c.length<=2)return nw.loadHome(),nw.utils.getDebug()&&(nw.console.log("Clear all pages, load home"),console.log("config.closeAppToDetectBack",config.closeAppToDetectBack)),!0===inhome&&!1!==config.closeAppToDetectBack&&nw.dialogExit(),!1;setTimeout(function(){$(".ui-page").last().remove()},t)})},actionNavigate:function(){$(document).on("pagechangefailed",function(e,n){nw.utils.getDebug()}),$(document).on("pagechange",function(e,n){if(!exit){n.toPage,$.mobile.path.parseUrl(n.toPage).filename;var a=n.absUrl,t=location.protocol+"//"+location.host+location.pathname;inhome=a===t+"#"||a===t}}),$(document).on("pagebeforechange",function(e,n){exit&&history.back()})},dialogExit:function(){if(questionExit=!0,"ANDROID"!==nw.getMobileOperatingSystem())return!1;nw.popupSimple("<p>¿Desea cerrar la aplicación?</p>",function(){nw.closeApp()},function(){questionExit=!1})},closeApp:function(){if(!0===nw.evalueData(navigator.app))return navigator.app.exitApp(),!0;nw.dialog("No es posible cerrar la aplicación. El dispositivo no está listo."),questionExit=!1},appendLinkMenu:function(e,n){return nw.menuPanel.appendLinkMenu(e,n)},containerLinksMenu:function(){return nw.menuPanel.containerLinksMenu()},generateLink:function(e,n,a,t,o,i,r,l){return nw.menuPanel.generateLink(e,n,a,t,o,i,r,l)},setValSpanSel:function(e){return nw.utils.setValSpanSel(e)},createRandomId:function(){return nw.utils.createRandomId()},scrollPage:function(e,n,a,t){return nw.utils.scrollPage(e,n,a,t)},createFields:function(e,n,a,t,o,i){return nw.createFieldsForms.createFields(e,n,a,t,o,i)},addRequiredMessage:function(e,n,a,t){return nw.forms.addRequiredMessage(e,n,a,t)},evalInput:function(e,n){return nw.forms.evalInput(e,n)},validateForm:function(e,n){return nw.forms.validateForm(e,n)},removeErrorField:function(){$(".errorNwForm").remove()},getDomain:function(){return location.hostname},getRecords:function(e,n,a){return nw.getFiltersRecords.getRecords(e,n,a)},getFilterRecords:function(e,n,a){return nw.getFiltersRecords.getFilterRecords(e,n,a)},evalueData:function(e,n){if(void 0===e)return!1;if(void 0!==n&&e==n)return!0;if(void 0===e)return!1;if(null===e)return!1;if("null"===e)return!1;if(!1===e)return!1;var a=!0;return"undefined"!=typeof permiteCeroException&&!1===permiteCeroException&&(a=!1),(!a||0!=e&&null!=e)&&""!==e},createDialog:function(e){return nw.createDialogNw(e)},createDialogNw:function(e){var a=new nw.newPage;return $.each(e,function(e,n){a[e]=n}),a.createAndShow(),a},nw_dialog:function(e){var n={};return n.html=e,nw.createDialogNw(n)},str:function(e){return nw.utils.tr(e)},tr:function(e){return nw.utils.tr(e)},closeSession:function(e,n){return nw.account.closeSession()},reject:function(e){var n;(n=document.querySelector(e.canvas))&&n.remove(),(n=document.querySelector("."+e.id))&&n.remove()},backgroundColor:function(e,n){var a=document.querySelector(e.canvas);a&&(a.style.backgroundColor=n)},append:function(e,n){$(e).append(n)},createNotificacionBarInter:function(e){return nw.dialogs.createNotificacionBarInter(e)},dialogRemove:function(){nw.dialogs.dialogRemove()},dialog:function(e,n,a,t){return nw.dialogs.dialog(e,n,a,t)},information:function(e,n,a,t){return nw.dialogs.dialog(e,n,a,t)},popupSimple:function(e,n,a,t){nw.dialogs.popupSimple(e,n,a,t)},createPopUp:function(e,n,a,t){return nw.dialogs.createPopUp(e,n,a,t)},cleanTokenField:function(){$(".containTokenResult").remove()},addZero:function(e){return nw.utilsDate.addZero(e)},semanadelanio:function(e){return nw.utilsDate.semanadelanio(e)},addMinutesToDate:function(e,n,a){return nw.utilsDate.addMinutesToDate(e,n,a)},dataOfDate:function(e){return nw.utilsDate.dataOfDate(e)},diffEntreFechas:function(e,n){return nw.utilsDate.diffEntreFechas(e,n)},diferenciaHoras:function(e,n,a){return nw.utilsDate.diferenciaHoras(e,n,a)},calcularTiempoDosFechas:function(e,n,a){return nw.utilsDate.calcularTiempoDosFechas(e,n,a)},lettersArray:function(e){return nw.utilsDate.lettersArray(e)},mesesArray:function(e){return nw.utilsDate.mesesArray(e)},mesTextEnglish:function(e){return nw.utilsDate.mesTextEnglish(e)},diasArray:function(e){return nw.utilsDate.diasArray(e)},getActualFullDate:function(e){return nw.utilsDate.getActualFullDate(e)},hoyfull:function(e){return nw.getActualFullDate(e)},getActualHour:function(e){return nw.utilsDate.getActualHour(e)},hora:function(e){return nw.getActualHour(e)},getActualDate:function(e){return nw.utilsDate.getActualDate(e)},hoy:function(e){return nw.getActualDate(e)},isOnline:function(){return!!navigator.onLine&&(void 0!==navigator.connection?"none"!==navigator.connection.type:navigator.onLine)},uiOptions:function(){return this.array={},this.array},addButtonsPage:function(e){return nw.buttons.addButtonsPage(e)},addHeaderNote:function(e,n){$(e).prepend("<div class='addHeaderNote'>"+nw.utils.tr(n)+"</div>")},addFooterNote:function(e,n){$(e).after("<div class='addHeaderNote'>"+n+"</div>")},setFields:function(e,n){return nw.setUiFields.setFields(e,n)},getRpcUrl:function(){return"rpcNw"},cleanInput:function(e,n){nw.forms.cleanInput(e,n)},populateSelectFromArray:function(e,n,a,t){nw.forms.populateSelectFromArray(e,n,a,t)},populateSelect:function(e,n,a,t,o,i,r,l){nw.forms.populateSelect(e,n,a,t,o,i,r,l)},normalizeRadioButton:function(){nw.utils.normalizeRadioButton()},contextmenuClear:function(e,n){if($(".contain_menu_li_touch").remove(),$(".bglimen").remove(),"bottom"===n)return $("body").find(".contain_menu_li_touch").addClass("menu_btm_hidden"),$("body").find(".bglimen").remove(),setTimeout(function(){$("body").find(".contain_menu_li_touch").remove()},400),!0;$("."+e.id).find(".contain_menu_li_touch").remove(),$("."+e.id).find(".bglimen").remove()},menu:function(){return this.id="menu",this},createPanel:function(e){return nw.menuPanel.createPanel(e)},start:function(){mainNW=this;var u=nw.userPolicies.getUserData();this.id="foo",this.enc_height="40px",this.enc_color="#e9e9e9",this.logotipoHeader="Logo",this.contentCenter="",this.contentCenterInLogin="",this.contentFooter="",this.domain_rpc="http://localhost:8000",this.menuLeft=[],this.defaultPageTransition="slide",this.defaultPageTransitionDesktop="fade",this.supportCors=!0,this.showConsoleDeveloper=!1,this.showConsoleEvents=!1,this.theme="a",this.homeLoaded=function(e){var n=nw.getGET(),a=!1;n&&nw.evalueData(n.createAccount)&&(a=!0);var t=!1;if(nw.evalueData(this.showConsoleDeveloper)&&(t=this.showConsoleDeveloper),nw.evalueData(window.localStorage.getItem("showConsoleDeveloper"))&&(t=window.localStorage.getItem("showConsoleDeveloper")),nw.isMobile()?$.mobile.defaultPageTransition=this.defaultPageTransition:$.mobile.defaultPageTransition=this.defaultPageTransitionDesktop,$.mobile.ajaxEnabled=!1,$.mobile.page.prototype.options.domCache=!0,$.mobile.page.prototype.options.allowCrossDomainPages=!0,$.mobile.transitionFallbacks.slideout="none",$.support.cors=this.supportCors,$.mobile.page.prototype.options.theme=this.theme,nw.utils.getDebug()&&console.log("this.theme",this.theme),nw.addClass(document.body,"themeBody_"+this.theme),!0===config.nativeTransitions){var o=document.createElement("style");o.className="stylesTransitionsNative",o.innerHTML=".ui-mobile .ui-page {opacity: 1!important;display: block!important;animation: none!important;}",document.body.appendChild(o),$.mobile.defaultPageTransition="none"}var i="";if($(".ui-page").removeClass("ui-page-theme-a"),$(".ui-page").addClass("ui-page-theme-"+this.theme),nw.evalueData(this.enc_color)&&(document.querySelector(".my-header").style.backgroundColor=this.enc_color),document.querySelector(".my-header").style.minHeight=this.enc_height,document.querySelector(".logotipoHeader").innerHTML=this.logotipoHeader,$(".my-header").addClass("headerEnc_"+config.dataPosition),$(".my-header").addClass("ui-bar-"+config.theme),$(".my-header").attr("data-position",config.dataPosition),"fixed"!==config.dataPosition&&(document.querySelector(".contentCenter").style.marginTop=this.enc_height),!0!==t&&"true"!==t||$("body").append("<div class='consoleEventsNw'><div class='encConsoleEvents'>ConsoleDeveloper<button class='close_developt'>Close</button> <button class='open_developt'>Min</button> <button class='open_developt_maximice'>Max</button> <button class='open_developt_clean'>Clean</button></div></div>"),!0===config.use_func_first_testing)return config.func_first_testing(),!1;if("undefined"!=typeof functionsStartedAppLoadAllFiles&&functionsStartedAppLoadAllFiles(),void 0!==u.usuario?setTimeout(function(){nw.utils.validaVersionCache()},5e3):nw.utils.validaVersionCache(),!0===a)nw.createAccount.formCreateAccount();else{if(!0===config.useFree)return void 0!==e&&e(),!1;if(void 0!==u.usuario){nw.createPanel({id:"leftpanel1",position:"left",display:config.panelDisplay,html:"<ul class='containLinksMenuLeft'></ul>",backgroundColor:config.panelBackgroundColor,open:config.panelOpen});var r=this.contentCenter;r+=nw.containerLinksMenu(),r+="<div class='contentFooterHome'></div>",document.querySelector(".contentCenter").innerHTML=r,$(".btnMenuHeader").fadeIn(0),$(".btnMenuHeader").append("<i class='material-icons menuBarEnc'>menu</i>");var l="";if(nw.evalueData(u.foto))l=1<u.foto.split("://").length?u.foto:config.domain_files_manage+nw.getFileByType(u.foto,60);var s="";s+="<p class='dataUser dataUserFoto' style='background-image: url("+l+");'></p>",s+="<p class='dataUser dataUserNameMail'><span class='dataUser dataUserName'>"+u.nombre+"</span> ",s+="<span class='dataUser dataUserMail'>User: "+u.usuario+"</span> ",u.email!==u.usuario&&(s+="<span class='dataUser dataUserMail'>"+u.email+"</span> "),nw.evalueData(u.nom_perfil)&&(s+="<span class='dataUser dataUserMail'>"+nw.utils.tr(u.nom_perfil)+"</span></p>");var c=document.createElement("div");c.className="dataUserLeft",c.innerHTML=s,$("#leftpanel1").prepend(c),nw.menuPanel.createMenuHomeCenter(),$("#leftpanel1").append("<div class='footCredits'>"+config.contentFooter+"</div>"),void 0!==e&&e()}else i="login_page",$("#ff").addClass(i),$(".contentCenter").html(this.contentCenterInLogin),$(".contentCenter").addClass("contentCenterInLogin"),document.querySelector(".btnMenuHeader").remove(),nw.login.createLogin()}}},createMenuCenter:function(){},responseLogin:function(e){nw.login.responseLogin(e)},openConcurrente:function(e){nw.login.openConcurrente(e)},activeTimerConcurrenDialog:function(e){nw.login.activeTimerConcurrenDialog(e)},refreshSessionApp:function(e){nw.account.refreshSessionApp(e)},activeLatsConnect:function(e){nw.account.activeLatsConnect(e)},ingresaPhoneParaValidar:function(e){nw.createAccount.ingresaPhoneParaValidar(e)},dialog2:function(e,n,a,t){return nw.dialogs.dialog2(e,n,a,t)},pagosEmpresa:function(){nw.account.pagosEmpresa()},pagosHistorico:function(){nw.account.pagosHistorico()},historicoRetiros:function(){nw.account.historicoRetiros()},retiroFondos:function(){return nw.account.retiroFondos()},datosBancarios:function(){return nw.account.datosBancarios()},changePass:function(e,n){return nw.account.changePass(e,n)},menuProfile:function(){nw.account.menuProfile()},editProfile:function(e){return nw.account.editProfile(e)},empty:function(e){nw.utils.empty(e)},remove:function(e){nw.utils.remove(e)},changeZoomWindow:function(){nw.configuration.changeZoomWindow()},changeTransicionWindow:function(){nw.configuration.changeTransicionWindow()},changeThema:function(){nw.configuration.changeThema()},about:function(){nw.configuration.about()},addClass:function(e,n){return nw.utils.addClass(e,n)},removeClass:function(e,n,a){return nw.utils.removeClass(e,n,a)},cleanUserNwC:function(e){return nw.utils.cleanUserNwC(e)},playSound:function(e,n){return nw.utils.playSound(e,n)},getDataCountryIP:function(){return nw.utils.getDataCountryIP()},getPositionByIP:function(e){nw.utils.getPositionByIP(e)},validateNwPayments:function(e){return nw.utils.validateNwPayments(e)},addNumber:function(e){return nw.utils.addNumber(e)},getToken:function(){return nw.utils.getToken()},getPermission:function(e,n){return nw.utils.getPermission(e,n)},getExtensionFile:function(e){return nw.utils.getExtensionFile(e)},activateBackgroundMode:function(){nw.utils.activateBackgroundMode()},inactivateBackgroundMode:function(){nw.utils.inactivateBackgroundMode()},openAppToFront:function(){nw.utils.openAppToFront()},turnScreenOn:function(){nw.utils.turnScreenOn()},turnScreenOnAndUnlocked:function(){nw.utils.turnScreenOnAndUnlocked()},shareSocial:function(e,n,a){return nw.utils.shareSocial(e,n,a)},getGET:function(e){return nw.utils.getGET(e)},set saldoVal(e){this.saldo=e},get saldoVal(){return this.saldo},consultaPuntaje:function(e,n){nw.utils.consultaPuntaje(e,n)},launchNavigatorUbication:function(e){return nw.utils.launchNavigatorUbication(e)},launchNavigatorUbicationGoogleMaps:function(e){return nw.utils.launchNavigatorUbicationGoogleMaps(e)},launchNavigatorUbicationWaze:function(e){return nw.utils.launchNavigatorUbicationWaze(e)},nativeGeoCoder:function(e,n,a){nw.utils.nativeGeoCoder(e,n,a)},getPromotionsApp:function(){nw.utils.getPromotionsApp()},showPromotionsApp:function(e){nw.utils.showPromotionsApp(e)},validateEmail:function(e){return nw.utils.validateEmail(e)},initVideoCallNw:function(e,n,a,t){nw.utils.initVideoCallNw(e,n,a,t)},getFileByType:function(e,n,a){return nw.utils.getFileByType(e,n,a)},cortaText:function(e,n){return nw.utils.cortaText(e,n)},isBrowser:function(){return nw.utils.isBrowser()},getPlatformID:function(){return nw.utils.getPlatformID()},find:function(e,n){return nw.utils.find(e,n)},examplesDevelopers:function(){(new nw.developers).construct()}};Date.prototype.toDatetimeLocal=function(){var e=this,n=function(e){return(e<10?"0":"")+e};return e.getFullYear()+"-"+n(e.getMonth()+1)+"-"+n(e.getDate())+"T"+n(e.getHours())+":"+n(e.getMinutes())+":"+n(e.getSeconds())},Date.prototype.fromDatetimeLocal=function(e){return new Date(e).toISOString().slice(0,16)===e?function(){return new Date(this.getTime()+6e4*this.getTimezoneOffset()).toISOString()}:Date.prototype.toISOString}("2006-06-06T06:06"),window.addEventListener("message",function(e){if(void 0!==e.data){var n=e.data;"uploaderFileFrame"===n.tipo&&(document.querySelector("."+n.field).value=n.data.urlFile,$("."+n.field).trigger("change"))}});var appState={takingPicture:!0,imageUri:""},APP_BASE64_SIGN=[],APP_STORAGE_KEY_CAMERA="nw_camera",APP_STORAGE_KEY_CAMERA_RECORD="nw_record",inApp=!0,intervalDetectedNetwoodsApp=!0,app={debug:!1,initialize:function(){try{document.addEventListener("deviceready",this.onDeviceReady.bind(this),{passive:!0})}catch(e){console.log("e",e),nw.errorLogger.process(e)}},onDeviceReady:function(){var e=this;function n(){if(nw.remove(".toast-no-internet"),"undefined"!=typeof Connection){var e=navigator.connection.type;Connection.NONE;var n={};n[Connection.UNKNOWN]="Unknown connection",n[Connection.ETHERNET]="Ethernet connection",n[Connection.WIFI]="Conexión WiFi",n[Connection.CELL_2G]="Conexión celular 2G",n[Connection.CELL_3G]="Conexión celular 3G",n[Connection.CELL_4G]="Conexión celular 4G",n[Connection.CELL]="Cell generic connection";var a=!(n[Connection.NONE]="No hay conexion de red");"No hay conexion de red"==n[e]&&(a=n[e]),"Conexión celular 2G"==n[e]&&(a="Su señal de conexión es 2G, podrá presentar lentitud."),"Conexión celular 3G"==n[e]&&(a="Su señal de conexión es 3G, podrá presentar lentitud."),0!=a&&(nw.remove(".intervalDetectedNetwoodsApp"),nw.utils.toast({html:a,timeRemove:5e3,addClass:"toast-no-enviado"}))}}if(e.version="0.0.4.0.1",app.version="0.0.4.0.1",!0===e.debug&&console.log("------------------Versión en DEBUG------------------"),e.receivedEvent("deviceready"),nw.appMode="app","browser"===cordova.platformId&&(nw.appMode="web"),"web"===nw.appMode&&(document.body.ontouchstart=function(e){"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName||e.target.focus()}),document.addEventListener("pause",this.onPause,{passive:!0}),document.addEventListener("resume",this.onResume,{passive:!0}),"undefined"!=typeof functionsDeviceReady&&functionsDeviceReady(),window.device||(window.device={platform:"Browser"}),document.addEventListener("offline",function(){nw.remove(".intervalDetectedNetwoodsApp"),nw.remove(".toast-no-internet"),nw.utils.toast({html:"¡Sin conexión a internet!",timeRemove:3e4,addClass:"toast-no-enviado toast-no-internet"})},!1),document.addEventListener("online",n,!1),n(),function e(){if("undefined"==typeof config)return void setTimeout(function(){e()},1e3);0!=config.detectLowSignal&&(app.detectLowNetwork(),setInterval(function(){app.detectLowNetwork(),setTimeout(function(){n()},5e3)},3e4))}(),"undefined"!=typeof cordova&&void 0!==cordova.plugins&&void 0!==cordova.plugins.InAppUpdate){console.log("typeof cordova.plugins.InAppUpdate",typeof cordova.plugins.InAppUpdate);cordova.plugins.InAppUpdate.getUpdateAvailability(function(e){console.log("cordova.plugins.InAppUpdate:::getUpdateAvailability:::strSuccess",e)},function(e){console.error("cordova.plugins.InAppUpdate:::getUpdateAvailability:::strError",e)})}if(void 0!==cordova.InAppBrowser){delete window.open;var t=window.open,o=function(e,n){cordova.InAppBrowser.open(e,"_system",n)};window.open=function(e,n,a){"_blank"==n?o(e,a):t(e,n,a)},$(document).on("click","a[target=_blank]",function(e){e.preventDefault(),o($(this).attr("href"))}),$("body").delegate("a[target=_blank]","click",function(e){e.preventDefault(),o($(this).attr("href"))})}else"ANDROID"===device.platform.toUpperCase()?(delete window.open,window.open=function(e,n,a){navigator.app.loadUrl(e,{openExternal:!0})},$(document).on("click",'a[href^="http"]',function(e){var n=$(this).attr("href");navigator.app.loadUrl(n,{openExternal:!0}),e.preventDefault()}),$("body").delegate('a[href^="http"]',"click",function(e){var n=$(this).attr("href");navigator.app.loadUrl(n,{openExternal:!0}),e.preventDefault()})):"IOS"===device.platform.toUpperCase()&&(delete window.open,window.open=function(e,n,a){nw.console.log("open1");try{window.open(e,"_system")}catch(e){nw.utils.errorReport("ele failed",e),console.log("e",e),nw.console.log("e",e)}},$(document).on("click",'a[href^="http"]',function(e){nw.console.log("open2");try{var n=$(this).attr("href");window.open(n,"_system"),e.preventDefault()}catch(e){nw.utils.errorReport("ele failed",e),console.log("e",e),nw.console.log("e",e)}}),$("body").delegate('a[href^="http"]',"click",function(e){nw.console.log("open3");try{e.preventDefault();var n=$(this).attr("href");window.open(n,"_system")}catch(e){nw.utils.errorReport("ele failed",e),console.log("e",e),nw.console.log("e",e)}}));nw.initialize(function(){e.setupOpenwith(),setTimeout(function(){void 0!==cordova.plugins&&void 0!==cordova.plugins.firebase&&void 0!==cordova.plugins.firebase.messaging&&e.notificationsFirebaseMessagingStart()},3e3),"undefined"!=typeof FCM&&(FCMPlugin=FCM),"undefined"!=typeof FCMPlugin&&e.pushNotification(),void 0!==window.plugins&&void 0!==window.plugins.insomnia&&window.plugins.insomnia.keepAwake()})},detectLowNetwork:function(e){clearInterval(app.intervalDetectedNetwoodsApp);var n=0,a=new Image;function t(){console.warn("SIGNAL LOW INTERNET!!!!"),nw.remove(".intervalDetectedNetwoodsApp"),clearInterval(app.intervalDetectedNetwoodsApp),nw.dialog(nw.utils.tr("Hemos detectado una conexión demasiado baja o nula, compruebe su conexión a internet")+". <br /><i class='nosignallowicon material-icons'>signal_cellular_connected_no_internet_4_bar</i>",function(){app.detectLowNetwork(function(){nw.remove(".intervalDetectedNetwoodsApp"),clearInterval(app.intervalDetectedNetwoodsApp),nw.utils.toast({html:"¡En línea!",timeRemove:5e3,addClass:"toast-enviado"})})},function(){return!0},{original:!0,addClass:"intervalDetectedNetwoodsApp",textAccept:"Comprobar de nuevo",textCancel:"Omitir"})}a.onload=function(){n=0,clearInterval(app.intervalDetectedNetwoodsApp),void 0!==e&&e()},a.onerror=function(){n=0,t()},a.src="https://www.google.com/images/cleardot.gif",app.intervalDetectedNetwoodsApp=setInterval(function(){n++,console.log("tiempoPasa",n),console.log("maxTime",2),2<=n&&(n=0,t())},1e3)},notificationsFirebaseMessagingStart:function(){nw.notificationPushFirebaseMessaging.getToken()},setupOpenwith:function(e){var i=this;if(void 0===cordova.openwith)return!1;console.log("START OPENWITH"),cordova.openwith.setVerbosity(cordova.openwith.DEBUG),cordova.openwith.init(function(){i.debug&&console.log("init success!")},function(e){i.debug&&console.log("init failed: "+e);nw.errorLogger.process("init failed: "+e)}),cordova.openwith.addHandler(function(o){nw.getPermission(["android.permission.WRITE_EXTERNAL_STORAGE","android.permission.CAMERA"],function(){i.debug&&(console.log("intent received"),console.log("  action: "+o.action),console.log("  exit: "+o.exit));for(var a="",t=[],e=0;e<o.items.length;++e){var n=o.items[e];i.debug&&(console.log("  type: ",n.type),console.log("  uri:  ",n.uri),console.log("  text: ",n.text),console.log("  name: ",n.name),console.log("  utis: ",n.utis),console.log("  path: ",n.path)),a=n.path,t.push(n)}0<o.items.length&&cordova.openwith.load(o.items[0],function(e,n){i.debug&&(console.log("item loaded, it weights "+e.length+" bytes"),console.log(e),console.log("file",a),console.log("items",t)),void 0!==nw.openWithMain&&nw.openWithMain(t)})})})},intervaloInBackground:null,activateBackgroundMode:function(){void 0!==cordova.plugins&&void 0!==cordova.plugins.backgroundMode&&cordova.plugins.backgroundMode.enable()},inactivateBackgroundMode:function(){void 0!==cordova.plugins&&void 0!==cordova.plugins.backgroundMode&&cordova.plugins.backgroundMode.disable()},startBackgroundQuestion:function(){var e=this;void 0!==cordova.plugins&&void 0!==cordova.plugins.backgroundMode&&(nw.evalueData(window.localStorage.getItem("nwPermisionBakgroundPositionMode"))?e.inBackground():e.inBackgroundQuestion(function(){window.localStorage.setItem("nwPermisionBakgroundPositionMode","true"),e.inBackground()}))},inBackgroundQuestion:function(e){var n=nw.utils.getMobileOperatingSystem(),a="compartir mi ubicación con otros usuarios en servicios";nw.evalueData(config.useGPSBackgroundMode_explication)&&(a=config.useGPSBackgroundMode_explication);var t="";t+="<div class='inbackq_title'><i class='material-icons'>location_on</i> "+nw.utils.tr("Usa tu ubicación")+"</div>",t+="<div class='inbackq_body'>",t+=" "+nw.utils.tr("Para ver mapas de actividades rastreadas automáticamente, permita que")+" <strong>"+config.name+"</strong> "+nw.utils.tr("use su ubicación todo el tiempo")+"<br /><br />",t+="<strong>"+config.name+"</strong> "+nw.utils.tr("recopila datos de ubicación para")+" "+nw.utils.tr(a)+", ",t+=nw.utils.tr("incluso cuando la aplicación está cerrada o no está en uso"),t+="</div>",t+="<div class='inbackq_img'></div>";var o=function(){return!0};"IOS"===n&&(o=!1);var i={original:!0,textAccept:"Continuar",textCancel:"Denegar",addClass:"inBackgroundQuestion"};nw.dialog(t,function(){return e(),!0},o,i)},inBackground:function(e){if(void 0===cordova.plugins)return!1;if(void 0===cordova.plugins.backgroundMode)return!1;var n=this;console.log("ENABLE BACK!"),"undefined"!=typeof cordova&&void 0!==cordova.plugins&&(console.log("cordova.plugins",cordova.plugins),console.log("Buscando cordova.plugins.foregroundService..."),void 0!==cordova.plugins.foregroundService?(console.log("ENCONTRADO! cordova.plugins.foregroundService..."),setTimeout(function(){nw.getPermission(["android.permission.ACCESS_BACKGROUND_LOCATION","android.permission.ACCESS_COARSE_LOCATION"],function(){console.log("Permisos concedidos"),cordova.plugins.foregroundService.stop(),setTimeout(function(){cordova.plugins.foregroundService.start(nw.utils.tr("GPS en funcionamiento"),nw.utils.tr("Servicio en segundo plano"),"myicon",3,10)},1e3)})},2e3)):console.log("NO EXISTE! cordova.plugins.foregroundService..."));var a=config.name,t=nw.utils.tr("Se está ejecutando en segundo plano"),o="icon",i="#000000",r=!0,l=!1,s=!1,c=!1,u=!0,d=0,p=!0;void 0!==config.configureBackgroundMode&&(void 0!==config.configureBackgroundMode.title&&(a=config.configureBackgroundMode.title),void 0!==config.configureBackgroundMode.text&&(t=config.configureBackgroundMode.text),void 0!==config.configureBackgroundMode.icon&&(o=config.configureBackgroundMode.icon),void 0!==config.configureBackgroundMode.color&&(i=config.configureBackgroundMode.color),void 0!==config.configureBackgroundMode.resume&&(r=config.configureBackgroundMode.resume),void 0!==config.configureBackgroundMode.hidden&&(l=config.configureBackgroundMode.hidden),void 0!==config.configureBackgroundMode.silent&&(s=config.configureBackgroundMode.silent),void 0!==config.configureBackgroundMode.sticky&&(c=config.configureBackgroundMode.sticky),void 0!==config.configureBackgroundMode.foreground&&(u=config.configureBackgroundMode.foreground),void 0!==config.configureBackgroundMode.id&&(d=config.configureBackgroundMode.id),void 0!==config.configureBackgroundMode.bigText&&(p=config.configureBackgroundMode.bigText)),console.log("sticky_______::::::::::::::::::::::::::::::::::::::",c),console.log("silent_______::::::::::::::::::::::::::::::::::::::",s),cordova.plugins.backgroundMode.setDefaults({title:nw.utils.tr(a),text:nw.utils.tr(t),icon:o,color:i,resume:r,hidden:l,silent:s,sticky:c,foreground:u,id:d,bigText:p}),cordova.plugins.backgroundMode.on("activate",function(){cordova.plugins.backgroundMode.disableWebViewOptimizations(),n.debug&&(console.log("BACKGROUND activate"),console.log("BACKGROUND activate")),nw.workInBackgroundMode=!0,clearInterval(n.intervaloInBackground);var e=0;(sendDataPosition=!1)!==config.useGPSBackgroundMode&&(n.intervaloInBackground=setInterval(function(){e++,n.debug&&(console.log("sendDataPosition",sendDataPosition),console.log("ESTO EN BACKGROUND MODE "+e+", sendDataPosition: "+sendDataPosition)),e<=2&&(sendDataPosition=!1),!sendDataPosition&&20<e&&n.openAppToFront()},1e3)),void 0!==cordova.plugins.backgroundMode.permissionOnTop&&cordova.plugins.backgroundMode.permissionOnTop()}),cordova.plugins.backgroundMode.on("enable",function(){n.debug&&console.log("BACKGROUND enable ")}),cordova.plugins.backgroundMode.on("disable",function(){n.debug&&console.log("BACKGROUND disable ")}),cordova.plugins.backgroundMode.on("deactivate",function(){nw.workInBackgroundMode=!1,n.debug&&console.log("BACKGROUND deactivate "),clearInterval(n.intervaloInBackground)}),cordova.plugins.backgroundMode.on("failure",function(e){console.log("background failure "+e),nw.dialog("background failure "+e)}),cordova.plugins.backgroundMode.ondeactivate=function(){n.debug&&console.log("BACKGROUND ondeactivate"),clearInterval(n.intervaloInBackground)},cordova.plugins.backgroundMode.onactivate=function(){n.debug&&console.log("BACKGROUND onactivate"),cordova.plugins.backgroundMode.disableWebViewOptimizations(),cordova.plugins.backgroundMode.disableBatteryOptimizations(),void 0!==cordova.plugins.backgroundMode.permissionOnTop&&cordova.plugins.backgroundMode.permissionOnTop()},cordova.plugins.backgroundMode.overrideBackButton(),cordova.plugins.backgroundMode.disableWebViewOptimizations(),cordova.plugins.backgroundMode.disableBatteryOptimizations(),void 0!==cordova.plugins.backgroundMode.permissionOnTop&&cordova.plugins.backgroundMode.permissionOnTop()},openAppToFront:function(){if(void 0===window.plugins)return!1;void 0!==cordova.plugins.backgroundMode&&(cordova.plugins.backgroundMode.unlock(),cordova.plugins.backgroundMode.moveToForeground(),cordova.plugins.backgroundMode.wakeUp()),void 0!==window.plugins.bringtofront&&window.plugins.bringtofront()},onPause:function(e){this.debug&&console.log("onPause",e),inApp=!1,(appState.takingPicture||appState.imageUri)&&(this.debug&&(console.log("PAUSE!"),console.log(appState)),window.localStorage.setItem(APP_STORAGE_KEY_CAMERA,JSON.stringify(appState))),clearInterval(this.intervaloInBackground)},appOnResumeCallback:function(){return!0},onResume:function(e){var n=this;n.debug&&console.log("onResume",e),nw.notificationPushFirebaseMessaging.clearNotifications(),inApp=!0;var a=window.localStorage.getItem(APP_STORAGE_KEY_CAMERA);n.debug&&console.log(a),a&&(appState=JSON.parse(a)),n.debug&&(console.log(e),console.log(appState));var t=!1;nw.evalueData(e)&&nw.evalueData(e.pendingResult)&&(t=e.pendingResult),!appState.takingPicture&&appState.imageUri||appState.takingPicture&&t&&(n.debug&&console.log("pendingResult!"),"OK"===t.pluginStatus&&setTimeout(function(){app.appOnResumeCallback(t)},2e3)),clearInterval(n.intervaloInBackground)},receivedEvent:function(e){},prueba:function(e){console.log("SI prueba "+e)},testingContextMenuNative:function(){var self=this;if("undefined"==typeof ContextMenu)return!1;var fun=function(){self.prueba(1)},entries=[];entries.push({title:"Entry 1",id:"one",callback:fun}),entries.push({title:"Entry 2",id:"foo"}),entries.push({title:"",id:"",isSeparator:!0}),entries.push({title:"Entry 3",id:"bar"});var context={title:"Title",items:entries,x:0,y:0};ContextMenu.open(context,function(ele){nw.dialog("You clicked the entry with an id of "+ele),console.log(ele);try{eval(ele)}catch(e){nw.utils.errorReport("ele failed",e)}})},testingLoadingNative:function(){nw.loading({text:"Buscando...",title:"Información"})},testingDialogsNative:function(){nw.dialog("accept",function(){return console.log("Acepto!"),!0},function(){return console.log("Cancela!"),!0})},statusBarEnc:function(){StatusBar.overlaysWebView(!0),StatusBar.styleLightContent(),StatusBar.backgroundColorByHexString("#ffffff")},diagnosticSettings:function(){var e=this;cordova.plugins.diagnostic.switchToSettings(function(){e.debug&&console.log("Successfully switched to Settings app")},function(e){console.error("The following error occurred: "+e),nw.errorLogger.process("The following error occurred: "+e)})},geoLocation:function(){try{navigator.geolocation.getCurrentPosition(function(e){navigator.notification.confirm("Ubicación "+e),app.geolocation=e},function(e){console.log("code: "+e.code+"\nmessage: "+e.message+"\n",e),nw.dialog("Por favor verifique que tenga su GPS activo y vuelva a intentarlo")},{enableHighAccuracy:!0})}catch(e){nw.utils.errorReport("navigator catch error",e)}},pushNotification:function(){var self=this;console.log("pushNotification start");try{nw.suscribedUserNotificacionPush(),FCMPlugin.onTokenRefresh(function(e){console.log("onTokenRefresh",e),nw.console.log("onTokenRefresh",e)}),FCMPlugin.onNotification(function(data){console.log("FCMPlugin.onNotification:::data",data),data.wasTapped?(console.log("Recived notify",JSON.stringify(data)),nw.console.log("Recived notify",JSON.stringify(data))):(console.log("False recived notify",JSON.stringify(data)),nw.console.log("False recived notify",JSON.stringify(data)));try{eval(data.data)}catch(e){nw.utils.errorReport("callback failed",e)}},function(e){console.log("onNotification callback successfully registered: "+e),nw.console.log("onNotification callback successfully registered: "+e)},function(e){console.log("Error registering onNotification callback: "+e),nw.console.log("Error registering onNotification callback: "+e),nw.dialog("Error registering onNotification callback: "+e)})}catch(e){nw.utils.errorReport("pushNotification failed",e)}}};nw.Class.define("nw.buttons",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{actionsButtons:function(){var e=".fileUpShow{background-image: url("+config.domain_rpc+"/nwlib6/icons/imagennodisponible2.png);}";e+=".classWidcomplet_signature .fileUpShow{background-image: url("+config.domain_rpc+"/nwlib6/icons/digital_signature.png);border: 0;}",e+=".archivo_asubir{min-width: 167px;min-height: 56px;display: inline-block; padding: 6px 12px;cursor: pointer;font-size: 0px; border: 0; box-shadow: none;} .archivo_asubir:after { content: '"+nw.utils.tr("Examinar")+"'; background-color: #78a3fa; color: #fff; font-size: 14px; padding: 17px 40px; font-weight: bold; border-radius: 5px;position: relative;top: 20px;left: -20px;}";var n=document.createElement("style");function t(t){var o=1e3,i=50,r=0;!function e(){var n,a=+new Date;setTimeout(function(){n=+new Date,o<=(r+=n-a)?t.fail&&t.fail():"0px"===window.getComputedStyle(document.body).marginTop?t.success():e()},i)}()}function o(){nw.utils.getDebug()&&console.log("LOAD main nemaker css"),setTimeout(function(){var e=document.createElement("style");e.innerHTML=".material-icons{opacity: 1;}",document.body.appendChild(e)},1500)}n.innerHTML=e,document.body.appendChild(n);var a=setInterval(function(){"loaded"!=document.readyState&&"interactive"!=document.readyState&&"complete"!=document.readyState||(!function(){for(var e=navigator.userAgent,n=(/CriOS|Chrome/.test(e),/Mozilla\/5.0/.test(e)&&/Android/.test(e)&&/AppleWebKit/.test(e),document.querySelectorAll("link")),a=0;a<n.length;a++)-1!==n[a].href.indexOf("nwmaker-2.css")&&t({success:o})}(),clearInterval(a))},100);if(setTimeout(function(){var e=document.createElement("style");e.innerHTML=".material-icons{opacity: 1;}",document.body.appendChild(e)},1e4),$(document).on("click",function(e){0===$(e.target).closest(".menuList").length&&nw.remove(".contain_menu_li_touch"),0===$(e.target).closest(".elementContainerMenuFloat").length&&$(".containMenuFloat").removeClass("containMenuFloatShow")}),!document.querySelector(".swiperight")){var i=document.createElement("div");i.className="swiperight",document.body.appendChild(i)}$(".swiperight").on("swiperight",function(){nw.back()});var r="click touch";nw.isMobile(),$("body").delegate(".resetBtnSearch",r,function(e,n){var a=this.getAttribute("data"),t=this.getAttribute("data-ui"),o=document.querySelector("."+a);console.log("btn",o),console.log("ui",t),o&&(o.value="",o.focus(),$(o).trigger("change"))}),$("body").delegate(".btnExec",r,function(e){nw.utils.disabledBtn(this),nw.utils.getDebug()&&console.log("%c<<<<DEBUG: starting $('body').delegate('.btnExec') >>>>","background: orange; color: #000"),e.preventDefault(),nw.buttons.execnclick(this,function(e){var n=e;void 0!==n.callback&&nw.evalueData(n.callback)&&(nw.rpc.closeConnection(),nw.utils.removeClass(".linksNavLeft","btnExec_active"),nw.utils.addClass(n,"btnExec_active"),n.callback(n),!0===n.classList.contains("linksNavLeft")&&(nw.utils.removeClass(".btnExec","btnExec_active_left"),nw.utils.addClass(n,"btnExec_active_left"))),nw.utils.isMobile()&&$("#leftpanel1").panel("close")})}),$("body").delegate(".fc-event-main-frame","mouseout",function(e,n){nw.remove(".tooltip_calendarnw")}),$("body").delegate(".fc-event-main-frame","mousemove",function(e,n){var a=this.innerHTML,t=e.clientY,o=e.clientX;nw.remove(".tooltip_calendarnw");var i=document.createElement("div");i.className="tooltip_calendarnw",i.innerHTML=a,i.style="top: "+t+"px; left: "+o+"px;",document.body.appendChild(i)}),$("body").delegate(".openProfile",r,function(){var e=this.getAttribute("data-profile");nw.evalueData(e)&&nw.account.openProfile(e)}),$("body").delegate(".createaccount_verpoliticaslink",r,function(){var e=this.getAttribute("data-url");nw.evalueData(e)}),$("body").delegate(".maxlengthClass","keyup",function(){var e=this.value,n=this.getAttribute("maxlength");e.length>parseFloat(n)&&(this.value=e.substring(0,e.length-1))}),$("body").delegate(".text_lower","input",function(){this.value=this.value.toLowerCase()}),$("body").delegate(".text_upper","input",function(){this.value=this.value.toUpperCase()}),$("body").delegate(".setMoney","keyup",function(){var e;null==(e=(e=(e=this.value).replace(/,/g,"")).match(/(\d+)/g))&&(e=""),null!=e&&"0"==e[0]&&(e="");var n=nw.addNumber(e);this.value=n}),$("body").delegate(".open_img_popup",r,function(){var e=$(this).attr("data-file");nw.showImg(e)}),$("body").delegate(".dataUserLeft",r,function(){nw.menuProfile()}),$("body").delegate(".close_developt",r,function(){$(".consoleEventsNw").css({height:"25px","max-height":"100px"})}),$("body").delegate(".open_developt_maximice",r,function(){$(".consoleEventsNw").css({height:"100%","max-height":"calc(100% - 20px)"})}),$("body").delegate(".open_developt_clean",r,function(){$(".bloqConsoleLog").remove()}),$("body").delegate(".open_developt",r,function(){$(".consoleEventsNw").css({height:"","max-height":"100px"})}),$("body").delegate(".nw_uploader","change",function(){nw.uploadFile(this)}),$("body").delegate(".classWidcomplet_signature .fileUpShow",r,function(){$(".nw_signature_widget").trigger("click")}),$("body").delegate(".nw_signature_widget",r,function(){var e=this.data,a=this.name;console.log("data",e),console.log("name",a),(new signature_pad).construct(function(e){console.log("data:::signature_pad:::response",e),APP_BASE64_SIGN[a]=e,nw.uploaderFileSrv.uploadFileCamera(a,"none",!0,e,!1,!1,!1,!1,function(e){console.log("result",e),nw.back();var n=document.querySelector(".nw_textField_"+a);n&&(n.value=e.response),nw.evalueData(a)&&(console.log("name",a),document.querySelector(".fileUpShow_"+a)&&(document.querySelector(".fileUpShow_"+a).style.backgroundImage="url("+mainNW.domain_rpc+e.response+")"),document.querySelector(".nw_textField_"+a)&&(document.querySelector(".nw_textField_"+a).value=e.response),$("."+a).trigger("change"))})})}),$("body").delegate(".nw_location_widget",r,function(){var a=this.name;console.log("name:",a);var e=new map_widget;console.log("sign",e),e.construct(function(e){console.log("data",e),nw.back();var n=document.querySelector(".nw_textField_"+a);n&&(n.value=e),nw.evalueData(a)&&(console.log("name",a),document.querySelector(".nw_textField_"+a)&&(document.querySelector(".nw_textField_"+a).value=e,document.querySelector(".nw_textField_"+a).data=e)),void 0!==main.callbackWidgetMap&&main.callbackWidgetMap(e)})}),$("body").delegate(".nwButtonCameraAndFiles",r,function(){var e={};e.name=this.name,e.quality=50,e.width=!1,e.height=!1,e.allowEdit=!1,nw.evalueData(this.getAttribute("data-quality"))&&(e.quality=parseInt(this.getAttribute("data-quality"))),nw.evalueData(this.getAttribute("data-cameraWidth"))&&(e.width=parseInt(this.getAttribute("data-cameraWidth"))),nw.evalueData(this.getAttribute("data-cameraHeight"))&&(e.height=parseInt(this.getAttribute("data-cameraHeight"))),nw.evalueData(this.getAttribute("data-allowEdit"))&&(e.allowEdit=this.getAttribute("data-allowEdit"),"true"===e.allowEdit&&(e.allowEdit=!0)),e.callback=!1,e.offline=!1,nw.evalueData(this.getAttribute("data-offline"))&&(e.offline=this.getAttribute("data-offline"),"true"===e.offline&&(e.offline=!0)),nw.filesPhotosCamera.start(e)}),$("body").delegate(".nwButtonCamera",r,function(){var e=50,n=!1,a=!1,t=!1;nw.evalueData(this.getAttribute("data-quality"))&&(e=parseInt(this.getAttribute("data-quality"))),nw.evalueData(this.getAttribute("data-cameraWidth"))&&(n=parseInt(this.getAttribute("data-cameraWidth"))),nw.evalueData(this.getAttribute("data-cameraHeight"))&&(a=parseInt(this.getAttribute("data-cameraHeight"))),nw.evalueData(this.getAttribute("data-allowEdit"))&&"true"===(t=this.getAttribute("data-allowEdit"))&&(t=!0);var o=!1;nw.evalueData(this.getAttribute("data-offline"))&&"true"===(o=this.getAttribute("data-offline"))&&(o=!0),nw.uploadFileCamera(this.name,"camera",!1,!1,e,n,a,t,!1,o)}),$("body").delegate(".nwButtonCameraFiles",r,function(){var e=50,n=!1,a=!1,t=!1;nw.evalueData(this.getAttribute("data-quality"))&&(e=parseInt(this.getAttribute("data-quality"))),nw.evalueData(this.getAttribute("data-cameraWidth"))&&(n=parseInt(this.getAttribute("data-cameraWidth"))),nw.evalueData(this.getAttribute("data-cameraHeight"))&&(a=parseInt(this.getAttribute("data-cameraHeight"))),nw.evalueData(this.getAttribute("data-allowEdit"))&&"true"===(t=this.getAttribute("data-allowEdit"))&&(t=!0);var o=!1;nw.evalueData(this.getAttribute("data-offline"))&&"true"===(o=this.getAttribute("data-offline"))&&(o=!0),nw.uploadFileCamera(this.name,"files",!1,!1,e,n,a,t,!1,o)}),$("body").delegate("input","keyup",function(e){nw.fadeInOutLabelInput(this)}),$("body").delegate("input","focusout",function(e){nw.validaValType(this)}),$("body").delegate("input","change",function(e){nw.validaValType(this),nw.fadeInOutLabelInput(this)}),$("body").delegate(".nw_selectBox","change",function(e){nw.setValSpanSel(this)}),$("body").delegate(".optionToken","click",function(e){$(".containTokenResult").remove()}),$("body").delegate(".optionTokenVisible","click",function(e){setTimeout(function(){$(".containTokenResultVisible").css({display:"none"})},300)}),$(document).on("click",function(e){-1===e.target.className.indexOf("nw_textField_search")&&$(".containTokenResult").fadeOut()}),$("body").delegate(".dateTimeLocal","tap",function(e){$(this).attr({type:"datetime-local"}),setTimeout(function(){$(this).trigger("click")},10)}),$("body").delegate(".dateField_input","tap",function(e){$(this).attr({type:"date"}),setTimeout(function(){$(this).trigger("click")},10)}),$("body").delegate(".time_input","tap",function(e){$(this).attr({type:"time"}),setTimeout(function(){$(this).trigger("click")},10)})},execnclick:function(n,a){nw.console.log("Execute nclick"),nw.utils.getDebug()&&(nw.console.log("Execute nclick CLASS nw.buttons"),console.log("%c<<<<DEBUG: starting nw.buttons.execnclick>>>>","background: orange; color: #000"));try{a(n)}catch(e){var t="::nw.buttons ERROR::";nw.evalueData(a)&&(t+=" :: CALLBACK: ",t+=a.toString()),nw.evalueData(n.parentNode.id)&&(t+=" :: ID: ",t+=n.parentNode.id),nw.evalueData(n.parentNode.class)&&(t+=" :: CLASS: ",t+=n.parentNode.id),nw.evalueData(n.parentNode.nodeName)&&(t+=" :: NODE: ",t+=n.parentNode.id),t+=nw.utils.convertWidgetToString(n),console.log(t),nw.utils.errorReport(t,e)}},focus:function(n,e){try{n.focus(function(){e(n)})}catch(e){nw.utils.errorReport("focus failed. WIDGET: <br /><span style='font-weight: 100;font-style: italic;'>"+nw.utils.convertWidgetToString(n)+"</span><br />",e)}},focusout:function(n,e){try{$(n).on("vmouseover",function(){console.log("focusout",n),e(n)})}catch(e){nw.utils.errorReport("focusout failed. WIDGET: <br /><span style='font-weight: 100;font-style: italic;'>"+nw.utils.convertWidgetToString(n)+"</span><br />",e)}},click:function(e,n){nw.buttons.nclick($(e),n)},nclick:function(n,a){try{var t="click touch";nw.evalueData(config.modeClickTouch)&&(t=config.modeClickTouch);$(n).on(t,function(e){o(e,this,a)});var o=function(e,n,a){e.preventDefault(),nw.utils.getDebug()&&(console.log("%c<<<<DEBUG: starting nclick>>>>","background: orange; color: #000"),console.log("widget",n),console.log("typeof widget",typeof n),console.log("nclick:::mode",t)),nw.buttons.execnclick(n,a)}}catch(e){nw.utils.errorReport("nclick failed. WIDGET: <br /><span style='font-weight: 100;font-style: italic;'>"+nw.utils.convertWidgetToString(n)+"</span><br />",e)}},validateBtnMaterialIcons:function(e){return!!nw.evalueData(e)&&-1!==e.indexOf("material-icons ")},getBtnMaterialIcons:function(e){if(!nw.validateBtnMaterialIcons(e))return!1;var n=e.split(" ")[1],a="";void 0!==e.split(" ")[2]&&(a=e.split(" ")[2]);var t=' style="';void 0!==e.split(" ")[3]&&"false"!==e.split(" ")[3]&&(t+="color:"+e.split(" ")[3]+";"),t+='" ';var o="";return void 0!==e.split(" ")[4]&&(o=e.split(" ")[4]),'<i class="material-icons '+a+" "+o+'" '+t+">"+n+"</i>"},createButton:function(e){var n="",a="",t="",o="button",i="center",r="btnExec btnForm needsclick ";nw.evalueData(e.getHTML)&&!0===e.getHTML&&(r=" btnForm ");var l="",s=!1,c=!1;nw.evalueData(e.position)&&(i=e.position),"center"===i?r+=" ui-shadow ui-btn ui-corner-all ui-btn-inline Btn":"header"===i?r+="ui-btn ui-btn-up-a ui-shadow ui-btn-corner-all":"header_left"===i?r+="ui-btn ui-btn-up-a ui-shadow ui-btn-corner-all ui-btn-left":"header_right"===i?r+="ui-btn ui-btn-up-a ui-shadow ui-btn-corner-all ui-btn-right ":"header_right_nav_enc"===i&&(r+="ui-btn ui-btn-up-a ui-btn-inline"),nw.evalueData(e.icon)&&(l=e.icon,r+="header_left"===i?" ui_btn_icon_left":"header_right"===i?" ui_btn_icon_right":" ui_btn_icon_left"),nw.evalueData(e.className)&&(r+=" "+e.className),nw.evalueData(e.text)&&(t=e.text),nw.evalueData(e.type)&&(o=e.type),nw.evalueData(e.callback)&&(s=e.callback),nw.evalueData(e.data)&&(c=e.data),nw.evalueData(e.name)&&(a=e.name),nw.evalueData(e.id)&&(n=e.id),"header_right_nav_enc"===i&&(t="<span class='ui-btn-inner'>"+nw.utils.tr(t)+"</span>"),""!==t&&!1!==t&&null!==t||(r+=" ui_btn_icon_vacio");var u="";nw.evalueData(e.style)&&(u=e.style),u=(u=u.replace("style='","")).replace("'","");var d="";if(nw.evalueData(l)&&-1===u.indexOf("background-image")){var p="#000000";nw.evalueData(e.colorBtnBackIOS)&&(p=e.colorBtnBackIOS),!1!==nw.validateBtnMaterialIcons(l)?d=nw.getBtnMaterialIcons(l+" "+p):-1!==l.indexOf("material-icons")?d=l:-1!==l.indexOf(".svg")?d="<span class='iconButton' style='-webkit-mask: url("+l+") no-repeat 50% 50%;mask: url("+l+") no-repeat 50% 50%;background-color:"+p+";-webkit-mask-size: cover;mask-size: cover;'></span>":u+="background-image: url("+l+");"}var g=!1;nw.evalueData(e.getHTML)&&!0===e.getHTML&&(g=!0);var m=document.createElement(o);if(m.href="#",m.className=r,m.innerHTML=d+t,m.callback=s,m.data=c,m.name=a,nw.evalueData(u)&&(m.style=u),!1===g&&nw.evalueData(e.addAttributes))for(var f=0;f<e.addAttributes.length;f++){a=e.addAttributes[f].name;var w=e.addAttributes[f].value;m[a]=w}if(m.id=n,!0!==g)return m;var v=m.outerHTML,h="";if(nw.evalueData(e.addAttributes))for(f=0;f<e.addAttributes.length;f++){h+=" data-"+(a=e.addAttributes[f].name)+"='"+(w=e.addAttributes[f].value)+"' "}return v=v.replace("<button","<button "+h)},addButtonsPage:function(e){if(nw.evalueData(e.buttons)){var n=e.buttons.length;if(0<n)if(1===n){var a=" "+(d=e.buttons[0]).name,t="center";"top"===d.position&&(t="header_right"),void 0!==d.className&&(a+=" "+d.className),void 0!==d.position&&(a+=" ui-btn-position-"+d.position+" ");var o=config.colorBtnBackIOS;void 0!==d.colorBtnBackIOS&&(o=d.colorBtnBackIOS);var i="";nw.evalueData(d.id)&&(i=d.id),(g={}).text=nw.utils.tr(d.label),g.type="button",g.position=t,g.icon=d.icon,g.className=a,g.callback=d.callback,g.style=d.style,g.data=d,g.id=i,g.colorBtnBackIOS=o;var r=nw.createButton(g);if("top"===d.position)document.querySelector(e.canvas)?$(e.canvas+" .my-header").append(r):$("."+e.id+" .my-header").append(r);else $("."+e.id_form+" .containBtnFooter").append(r)}else{var l=!0,s=e.canvas+" .my-header";document.querySelector(s)||document.querySelector(e.canvas+" .nwlist")&&(s=e.canvas+" .nwlist",l="prepend");var c="header_nav_"+Math.floor(1e7*Math.random()+1);"prepend"==l?$(s).prepend('<div data-role="navbar" class="ui-navbar ui-mini" role="navigation"> <ul class="ui-nav-enc ui-grid-b '+c+'"></ul></div>'):$(s).append('<div data-role="navbar" class="ui-navbar ui-mini" role="navigation"> <ul class="ui-nav-enc ui-grid-b '+c+'"></ul></div>');for(var u=0;u<n;u++){var d=e.buttons[u];i="";nw.evalueData(d.id)&&(i=d.id);a=" "+d.name,t="center";"top"===d.position&&(t="header_right_nav_enc"),void 0!==d.className&&(a+=" "+d.className);var p="";void 0!==d.styleContainer&&(p=" style='"+d.styleContainer+"' ");var g;o=config.colorBtnBackIOS;void 0!==d.colorBtnBackIOS&&(o=d.colorBtnBackIOS),(g={}).text=nw.utils.tr(d.label),g.type="a",g.position=t,g.icon=d.icon,g.className=a,g.callback=d.callback,g.style=d.style,g.data=d,g.id=i,g.colorBtnBackIOS=o;r=nw.createButton(g);d.facebook,"top"===d.position?($("."+c).append("<li class='ui-block-b ui-block-"+u+"' "+p+"></li>"),$("."+c+" .ui-block-"+u).append(r)):$("."+e.id_form+" .containBtnFooter").append(r),!0===d.facebook&&($(".fb-login-button").attr("scope","public_profile,email"),$(".fb-login-button").attr("onlogin","nw.checkLoginState()"),$(".fb-login-button").attr("data-size","large"),$(".fb-login-button").attr("data-button-type","continue_with"),$(".fb-login-button").attr("data-auto-logout-link","false"),$(".fb-login-button").attr("data-use-continue-as","true"))}}}nw.loadFastClick()}}}),nw.Class.define("nw.createAccount",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{formCreateAccount:function(e){var t=config.config_crear_cuenta,o=new nw.forms,n=nw.getGET(),a=!1,i=!1;n&&(nw.evalueData(n.createAccount)&&(i=!0),nw.evalueData(n.code_referido)&&(a=n.code_referido)),i?(o.canvas="#foo",o.id_form="createAccount"):(o.id="createAccount",o.setTitle="Crear cuenta",o.textClose="Login",o.showBack=!0,o.createBase());var r=[];if(r.push({name:"page",label:"Página",placeholder:"Página",type:"textField",required:!1,visible:!1}),nw.evalueData(t.terminal)&&r.push({name:"terminal",label:"Terminal",placeholder:"Terminal",type:"textField",required:!1,visible:!1}),nw.evalueData(t.pedir_empresa)&&r.push({name:"pedir_empresa",label:"Empresa",placeholder:"Empresa",type:"numeric",required:!1,visible:!1}),nw.evalueData(t.perfil)&&r.push({name:"perfil_send",label:"Perfil",placeholder:"Perfil",type:"numeric",required:!1,visible:!1}),nw.evalueData(t.perfil_crea_cuenta)&&r.push({name:"perfil_crea_cuenta",label:"Perfil crear cuenta",placeholder:"Perfil crear cuenta",type:"textField",required:!1,visible:!1}),nw.evalueData(e)&&nw.evalueData(e.foto_perfil)&&r.push({name:"foto_perfil",label:"Foto de perfil",placeholder:"Foto de perfil",type:"textField"}),!0===t.pedir_pais){var l=!0;void 0!==t.pedir_pais_required&&(l=t.pedir_pais_required),r.push({name:"pais",label:"País",placeholder:"País",type:"selectBox",required:l,visible:!1})}if(!0===t.pedir_departamento_geo&&r.push({name:"departamento",label:"Departamento",placeholder:"Departamento",type:"selectBox",required:!0}),!0===t.pedir_ciudad){var s=!0;void 0!==t.pedir_ciudad_required&&(s=t.pedir_ciudad_required),r.push({name:"ciudad",label:"Ciudad",placeholder:"Ciudad",type:"selectBox",required:s,visible:!1})}if(!0===t.pedir_nombre_y_apellidos&&(r.push({name:"nombre",label:"Nombre",placeholder:"Nombre",type:"textField",required:!0}),!0===t.pedir_apellido&&r.push({name:"apellido",label:"Apellidos",placeholder:"Apellidos",type:"textField",required:!0})),!0===t.pedir_documento){var c=!0;void 0!==t.pedir_documento_required&&(c=t.pedir_documento_required),r.push({name:"nit",label:"Documento",placeholder:"Documento",type:"textField",maxlength:"15",minlength:"4",required:c})}!0===t.pedir_genero&&r.push({name:"genero",label:"Género",placeholder:"Documento",type:"selectBox",required:!1}),!0===t.pedir_celular&&r.push({name:"celular",label:"Teléfono / Móvil",placeholder:"Teléfono / Móvil",type:"numeric",car_max:"20",maxlength:"20",minlength:"5",required:!0}),!0===t.pedir_direccion&&r.push({name:"direccion",label:"Dirección",placeholder:"Dirección",type:"textField",required:!0}),!0===t.pedir_fecha_nacimiento&&r.push({name:"fecha_nacimiento",label:"Fecha de nacimiento",placeholder:"Fecha de nacimiento",type:"dateField",required:!0}),r.push({name:"email",label:"Correo",placeholder:"Correo",type:"textField",mode:"email",upperOrLowerText:"lower",required:!0}),r.push({name:"clave_registro",label:"Contraseña",placeholder:"Contraseña",type:"textField",mode:"password",required:!0}),!0===t.pedir_confirmar_pass&&r.push({name:"clave_registro_validate",label:"Confirmar contraseña",placeholder:"Confirmar contraseña",type:"textField",mode:"password",required:!0}),!0===t.pedir_politicas&&!0!==t.pedir_politicas_in_session_create&&r.push({name:"accept_politics",label:t.pedir_politicas_text,placeholder:t.pedir_politicas_text,type:"checkBox",required:!0}),!0===t.pedir_suscribirse&&r.push({name:"accept_suscribirse",label:t.pedir_suscribirse_texto,placeholder:t.pedir_suscribirse_texto,type:"checkBox",required:!1}),void 0!==config.labelsAccount&&(r=nw.utils.labelsChange(config.labelsAccount,r)),o.setFields(r),o.buttons=[],o.buttons.push({styleContainer:"width:50%;",style:"text-shadow: none;font-weight: lighter;border: 0;",className:"btn_maxwidth",name:"aceptar",label:"Registrarme",callback:function(){var e=o.getRecord();if(console.log("nwCreateAccount:::data:::",e),!o.validate())return!1;if(e.estado=t.estado,!0===t.pedir_empresa_pais&&(e.pedir_empresa=e.pais),void 0!==t.verificar_celular_con_codigo&&(e.verificar_celular_con_codigo=t.verificar_celular_con_codigo),!1!==a&&(e.code_referido=a),!0===t.pedir_confirmar_pass&&e.clave_registro!=e.clave_registro_validate)return nw.dialog("Las contraseñas no coinciden"),!1;if(!0===t.pedir_politicas&&!0!==t.pedir_politicas_in_session_create&&!e.accept_politics){return nw.dialog("Por favor acepte los términos y condiciones de uso para continuar.",!1,!1,{original:!1}),!1}nw.createAccount.execCreateAccount(e)}}),t.permitir_registro_login_con_facebook,o.show(),nw.addClass(document.querySelector(o.canvas),"createAccountFoo");var u="<h3 style='text-align: center;'>Creación de cuenta</h3>";if(!1!==a&&(u="<h3 style='text-align: center;'>Creación de cuenta - referido</h3>"),o.addHeaderNote(u),!0===t.pedir_pais){var d={"":"Seleccione el país"};o.ui.pais.populateSelectFromArray(d),o.ui.pais.setValue("");d={};"undefined"!=typeof nwgeo&&nw.evalueData(nwgeo.countryCode)&&(d.countryCode=nwgeo.countryCode),o.ui.pais.populateSelect("nwMaker","populateCountries",d,function(e){if(o.ui.pais.setVisibility(!0),"undefined"!=typeof nwgeo&&nw.evalueData(nwgeo.countryCode))for(var n=0;n<e.length;n++){var a=e[n];a.alias===nwgeo.countryCode&&(o.ui.pais.setValue(a.id),p(a.id,"pais_id"))}},!0),o.ui.pais.changeValue(function(e){var n=o.ui.pais.getValue();!0===t.pedir_departamento_geo?g(n.val):!0===t.pedir_ciudad&&!1===t.pedir_departamento_geo&&(o.ui.ciudad.setVisibility(!0),p(n.val,"pais_id"))})}function p(e,n){if(!1===t.pedir_ciudad)return!1;o.ui.ciudad.cleanInput();var a={"":"Seleccione la ciudad"};o.ui.ciudad.populateSelectFromArray(a),o.ui.ciudad.setValue("");a={};nw.evalueData(n)&&(a.field=n),nw.evalueData(e)&&(a.value=e),o.ui.ciudad.populateSelect("nwMaker","populateCities",a,function(e){if(o.ui.ciudad.setVisibility(!0),"undefined"!=typeof nwgeo&&nw.evalueData(nwgeo.city))for(var n=0;n<e.length;n++){var a=e[n];a.nombre===nwgeo.city&&(o.ui.ciudad.setValue(a.id),o.ui.ciudad.setVisibility(!1))}},!0,!0)}if(!0===t.pedir_ciudad&&!0!==t.pedir_pais&&!0!==t.pedir_departamento_geo&&p(),!0===t.pedir_departamento_geo){d={"":"Seleccione el departamento"};o.ui.departamento.populateSelectFromArray(d),!0!==t.pedir_pais&&g()}function g(e){if(!1===t.pedir_departamento_geo)return!1;var n={table:"deptosGeo",order:"nombre"};nw.evalueData(e)&&(n.where=" and pais='"+e+"'"),o.ui.ciudad.populateSelect("master","populate",n,function(e){console.log(e)},!0,!0)}if(nw.evalueData(t.pedir_empresa)&&o.ui.pedir_empresa.setValue(t.pedir_empresa),nw.evalueData(t.perfil)&&o.ui.perfil_send.setValue(t.perfil),nw.evalueData(t.terminal)&&o.ui.terminal.setValue(t.terminal),nw.evalueData(t.perfil_crea_cuenta)&&o.ui.perfil_crea_cuenta.setValue(t.perfil_crea_cuenta),!0===t.pedir_genero){d={"":"Seleccione el género",hombre:"Hombre",mujer:"Mujer",otro:"Otro"};o.ui.genero.populateSelectFromArray(d)}nw.evalueData(t.page)&&o.ui.page.setValue(t.page),nw.evalueData(e)&&o.setRecord(e)},execCreateAccount:function(e){var n=new nw.rpc(nw.getRpcUrl(),"nwMaker");n.setAsync(!0),n.setLoading(!0);n.exec("createAccount",e,function(e){console.log(e),nw.console.log(e),nw.createAccount.responseCreateAccount(e)})},responseCreateAccount:function(e){var n=nw.getGET(),a=!1;if(n&&nw.evalueData(n.code_referido)&&(a=n.code_referido),"yaexiste"===e)return nw.dialog("Este usuario ya existe."),!1;if("preregistrado"===e)return nw.cleanAllWindow(),nw.home(),nw.dialog("Ha quedado pre-registrado."),!1;if(void 0!==e.usuario){if(!1!==a)return nw.createAccount.showLinkToOpenApp(),!1;nw.setUserInfo(e,function(){window.location.reload()})}},ingresaPhoneParaValidar:function(e){var t=new nw.forms,n=nw.userPolicies.getUserData(),o=!1;nw.evalueData(n.pais_all_data)&&(o=JSON.parse(n.pais_all_data));var a=!0;"dialog"===e&&(a=!1),a?(nw.empty(".contentCenter"),t.canvas="#foo",t.id_form="ingresaPhoneParaValidar"):("dialog"===e&&(t.role="dialog"),t.changeHash=!0,t.id="ingresaPhoneParaValidar",t.setTitle="<span style='color:#fff;'>Valida tu número móvil</span>",t.showBack=!1,t.closeBack=!1,t.html="<h3>Valida tu número móvil</h3>",t.textClose="",t.colorBtnBackIOS="#ffffff;",t.styleCloseIOS="top: 3px;",t.createBase());t.setFields([{name:"grupo_indicativo_celular",label:"",type:"startGroup",mode:"div",visible:!0},{name:"indicativo",label:"",placeholder:"57",type:"selectBox",required:!0},{name:"celular",label:"Número móvil",placeholder:"Ingresa tu número móvil",type:"numeric",required:!0},{name:"grupo_indicativo_celular",type:"endGroup"},{name:"email",label:"Correo",placeholder:"Email",type:"textField",mode:"email",required:!0}]),t.buttons=[],t.buttons.push({className:"btn_maxwidth",name:"aceptar",label:"Siguiente",callback:function(){var n=t.getRecord();if(!t.validate())return!1;var e=config.config_crear_cuenta;n.name=config.name,nw.evalueData(e.pedir_empresa)&&(n.empresa=e.pedir_empresa),nw.evalueData(e.perfil)&&(n.perfil=e.perfil),nw.evalueData(e.terminal)&&(n.terminal=e.terminal),nw.evalueData(e.perfil_crea_cuenta)&&(n.terminal=e.perfil_crea_cuenta);var a=new nw.rpc(nw.getRpcUrl(),"nwMaker");a.setAsync(!0),a.setLoading(!0);a.exec("sendPhoneVerificarByCode",n,function(e){console.log(e),!0===e?nw.createAccount.ingresaCodePhone(n.celular,n.indicativo):nw.dialog(e)})}}),"dialog"!==e&&t.buttons.push({name:"salir",label:"Salir",callback:function(){nw.closeSession()}}),t.show();var i={fields:"indicativo_celular as id, CONCAT(nombre, ' (+', indicativo_celular, ')') as nombre"};nw.evalueData(nwgeo)&&nw.evalueData(nwgeo.countryCode)&&(i.countryCode=nwgeo.countryCode),t.ui.indicativo.populateSelect("nwMaker","populateCountriesByIndicativo",i,function(e){if(nw.evalueData(o))for(var n=0;n<e.length;n++){var a=e[n];a.id===o.indicativo_celular&&t.ui.indicativo.setValue(a.id)}},!0),nw.evalueData(n.celular)&&(t.ui.celular.setValue(n.celular),t.ui.celular.disabled(!0)),nw.evalueData(n.email)&&(t.ui.email.setValue(n.email),t.ui.email.disabled(!0)),t.addHeaderNote("Valida tu número móvil y correo"),$("#foo").addClass("foo_phone"),void 0!==navigator.splashscreen&&setTimeout(function(){navigator.splashscreen.hide()},2e3),nw.remove(".progress_loading_home")},ingresaCodePhone:function(t,o){var i=new nw.forms;i.id="ingresaCodePhone",i.setTitle="Código de verificación",i.textClose="Enviar",i.html="<h3>"+nw.utils.tr("El código de verificación se ha enviado al")+" +"+o+" "+t+"</h3>",i.showBack=!0,i.createBase();i.setFields([{name:"token",label:"Código de 6 dígitos",placeholder:"Código de 6 dígitos",type:"numeric",required:!0}]),i.buttons=[{styleContainer:"width:50%;",style:"text-shadow: none;font-weight: lighter;border: 0;",className:"btn_maxwidth",name:"aceptar",label:"Enviar",callback:function(){if(!i.validate())return!1;var e=nw.userPolicies.getUserData(),n=i.getRecord();if(n.celular=o+""+t,n.user=o+""+t,n.use=!0,n.empresa=e.empresa,n.usuario=e.usuario,nw.console.log(n),!i.validate())return!1;var a=new nw.rpc(nw.getRpcUrl(),"nwMaker");a.setAsync(!0),a.setLoading(!0);a.exec("verificarCodeByPhone",n,function(e){nw.console.log(e),!0===e?(i.reject(),window.localStorage.setItem("celular",t),window.localStorage.setItem("celular_validado","true"),setTimeout(function(){window.location.reload()},500)):nw.dialog("El código no coincide, intente nuevamente")})}},{className:"btn_reenviar_code",name:"reenviar",label:"Reenviar código",callback:function(){nw.home()}}],i.show(),$("#foo").addClass("foo_phone")},verPoliticasApp:function(){var e=config.config_crear_cuenta,n={};n.textAccept=nw.utils.tr("Entendido"),n.original=!0,n.addClass="popupPilPolitics";var a=e.pedir_politicas_text;nw.evalueData(e.pedir_politicas_link)&&(a="<iframe class='iframepolitics' src='"+e.pedir_politicas_link+"'></iframe>."),nw.dialog(a,function(){return window.location.reload(),!0},!1,n)},politicasApp:function(){var e=config.config_crear_cuenta,n={textAccept:"Sí, acepto",textCancel:"No acepto",original:!0,addClass:"popupPilPolitics"};"undefined"!=typeof functionsStartedAppLoadAllFiles&&functionsStartedAppLoadAllFiles();var a=e.pedir_politicas_text;nw.evalueData(e.pedir_politicas_link)&&(a="<iframe class='iframepolitics' src='"+e.pedir_politicas_link+"'></iframe>."),nw.dialog(a,function(){nw.loading({text:"Por favor espere...",textVisible:!0,html:"",theme:"b"});var e=nw.userPolicies.getUserData(),n={};n.usuario=e.usuario,n.perfil=e.perfil;var a=new nw.rpc(nw.getRpcUrl(),"nwMaker");a.setAsync(!0),a.setLoading(!1);a.exec("saveAceptoTerminosCondiciones",n,function(e){if(console.log(e),!0===e)return window.localStorage.setItem("acepto_terminos_condiciones","SI"),window.location.reload(),!0;nw.dialog(e)})},function(){nw.closeSession()},n)},showLinkToOpenApp:function(){var e=new nw.forms;$(".createAccount").remove();e.canvas="#foo",e.id_form="showLinkToOpenApp";e.setFields([]),e.buttons=[{styleContainer:"width:50%;",style:"text-shadow: none;font-weight: lighter;border: 0;",className:"btn_maxwidth",name:"aceptar",label:"Ir la app",callback:function(){nw.openLink(config.url_play_store,"_BLANK")}}],e.show(),e.addHeaderNote("<h2 style='text-align: center;font-size: 22px;'>Ahora descarga y/o abre la app</h2>")}}}),nw.Class.define("nw.buscarActualizaciones",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{searchUpdatesAppInBack:function(){if("undefined"==typeof config)return!1;if(void 0===config.searchUpdatesAppInBack)return!1;if(!0!==config.searchUpdatesAppInBack)return!1;var e=Math.random();fetch(config.domain_rpc+"/version.json?"+e).then(function(e){return e.json()}).then(function(e){console.log("jsondatajsondatajsondatajsondatajsondatajsondatajsondatajsondatajsondatajsondatajsondata",e),alert("jsondata "+e);var n=/(\d+)/g,a=config.version_in_this_device,t=nw.utils.strip_tags(a);t=(t=nw.utils.cleanUserNwC(t)).match(n),console.log("versionDevice",a),console.log("versionDeviceClean",t),t=parseInt(t[0]);var o=e.version,i=nw.utils.strip_tags(o);i=(i=nw.utils.cleanUserNwC(i)).match(n),i=parseInt(i[0]),console.log("versionDevice",a),console.log("versionDeviceClean",t),console.log("versionLatest",o),console.log("versionLatestClean",i);var r=i;if(nw.utils.evalueData(window.localStorage.getItem("versionLocalQxJson"))&&(r=JSON.parse(window.localStorage.getItem("versionLocalQxJson"))),console.log("versionLocalQxJson",r),t!==i||r!==i){var l=r;t!==i&&(l=t),r!==i&&(l=r);var s="<h2>¡Nueva versión encontrada!</h2><br />";s+="<br /><strong>"+l+"</strong> Versión actual",s+="<br /><strong>"+i+"</strong> Versión nueva",s+="<br /><br />Click en aceptar para obtenerla o cancelar para omitir.",nw.dialog(s,function(e){if(e){var n="";n+="Actualizando de la versión actual "+l,n+=" a la versión nueva "+i,n+="... Por favor espere.",nw.dialog(n),window.localStorage.setItem("versionLocalQxJson",i),setTimeout(function(){window.location.reload()},2e3)}else setTimeout(function(){nw.buscarActualizaciones.searchUpdatesAppInBack()},5e3)})}else setTimeout(function(){nw.buscarActualizaciones.searchUpdatesAppInBack()},5e3),window.localStorage.setItem("versionLocalQxJson",i)})},searchUpdatesApp:function(e,f){var w=!0;if(!1===config.searchUpdatesApp)return!1;if(console.log("searchUpdatesApp",e,f),!0!==e){var v=new nw.newPage;v.id="searchUpdatesApp",v.title="Actualizar app",v.html="<div class='textbuscaupdateapp'><h3>"+nw.utils.tr("Buscando actualizaciones... Por favor espere.")+"</h3><div>",v.create(),v.show(),w=!1}var n=nw.userPolicies.getUserData(),a=nw.getMobileOperatingSystem(),h={};h.os=a;var t=!0;void 0!==config.validateUserWithoutCompany&&!0===config.validateUserWithoutCompany&&(t=!1),t&&(h.empresa=n.empresa,h.perfil=n.perfil),nw.evalueData(window.localStorage.getItem("token"))&&(h.token=window.localStorage.getItem("token")),console.log("searchUpdatesApp:::sendDataServer:::data",h);var o=new nw.rpc(nw.getRpcUrl(),"nwMaker");o.setAsync(!0),o.setLoading(!1);o.exec("getCurrentVersion",h,function(e){console.log("searchUpdatesApp:::responseServer:::r",e);var n=nw.getActualDate(),a=parseInt(config.version_in_this_device)+1;a=a.toString(),window.localStorage.setItem("version_in_this_device",a),config.version_in_this_device=a;var t=e.fecha;nw.utils.getDebug()&&(console.log("SEARCH_NEW_VERSION::: config.version_in_this_device",config.version_in_this_device),console.log("SEARCH_NEW_VERSION::: data.perfil",h.perfil),console.log("SEARCH_NEW_VERSION::: Is test: ",!1),console.log("SEARCH_NEW_VERSION::: My version device: ",config.version),console.log("SEARCH_NEW_VERSION::: Data new version: ",e),console.log("SEARCH_NEW_VERSION::: fecha_version",t),console.log("SEARCH_NEW_VERSION::: hoy",n),console.log("SEARCH_NEW_VERSION::: data",h),console.log("SEARCH_NEW_VERSION::: result",e),console.log("SEARCH_NEW_VERSION::: data.os",h.os));var o=!1,i=nw.utils.tr("No tiene actualizaciones"),r="",l="",s=nw.getMobileOperatingSystem();if("ANDROID"===s?l=config.url_play_store:"IOS"===s&&(l=config.url_app_store),window.localStorage.setItem("fecha_last_pregunta_update",n),!1===e&&nw.evalueData(config.requiredUpdateLastVersion))void 0!==f&&f(!0);else if(!1!==e)if(window.localStorage.setItem("fecha_version",t),t<=n){var c=parseInt(e.version.replace(/\./gi,"")),u=parseInt(config.version.replace(/\./gi,""));if(u<c)if(console.log("NEW_VERSION::: versionNew",c),console.log("NEW_VERSION::: versionAppActual",u),console.log("NEW_VERSION::: data.perfil",h.perfil),console.log("NEW_VERSION::: Is test: ",!1),console.log("NEW_VERSION::: My version device: ",config.version),console.log("NEW_VERSION::: Data new version: ",e),console.log("NEW_VERSION::: fecha_version",t),console.log("NEW_VERSION::: hoy",n),console.log("NEW_VERSION::: data",h),console.log("NEW_VERSION::: result",e),console.log("NEW_VERSION::: data.os",h.os),i=nw.utils.tr("Nueva actualización disponible"),r="material-icons offline_pin normal",(o=!0)===w){var d=function(){return window.location.reload(),!0},p=nw.utils.tr("Hay una nueva versión de la aplicación. Recomendamos actualizarla. Ingrese a la tienda de aplicaciones y actualice.");nw.evalueData(config.requiredUpdateLastVersion)&&(d=!1,p=nw.utils.tr("Hay una nueva versión de la aplicación, debe actualizarla para continuar")),nw.dialog(p,function(){return""===l?(nw.changePage(""),window.location.reload()):nw.utils.openLink(l,"blank"),window.location.reload(),!1},d,{textAccept:"Actualizar",textCancel:"Omitir"})}else void 0!==f&&f(!0);else void 0!==f&&f(!0)}else void 0!==f&&f(!0);else void 0!==f&&f(!0);if(!1===w){var g=new nw.forms;g.canvas="#"+v.id;var m=[{icon:r,name:"encontrada",label:i,type:"label"}];g.setFields(m),g.buttons=[],o?g.buttons.push({style:"text-shadow: none;font-weight: lighter;border: 0;",className:"btn_maxwidth",name:"aceptar",label:"Obtener la versión "+e.version.toString(),callback:function(){""===l?(nw.loading({text:"Actualizando... Por favor espere."}),window.location.reload()):nw.utils.openLink(l,"blank")}}):g.buttons.push({style:"text-shadow: none;font-weight: lighter;border: 0;",className:"btn_maxwidth",name:"aceptar",label:"Aceptar",callback:function(){nw.loading({text:"Recargando... Por favor espere."}),window.location.reload()}}),g.show(),g.addHeaderNote("<style>.textbuscaupdateapp{display:none;}</style>")}})}}}),nw.Class.define("nw.configuration",{extend:nw.object,construct:function(){var e=nw.userPolicies.getUserData(),n=new nw.newPage;n.id="configuration",n.title="Configuración",n.textClose="Inicio",n.html="",n.create(),n.show();var a="."+n.id,t=nw.containerLinksMenu();$(a).append(t);var o="lists_simple",i=nw.isOnline(),r=nw.utils.tr("Internet estable");!1===i&&(r=nw.utils.tr("Sin internet, compruebe su conexión."));var l="Estado de red",s=r,c="center",u="",d="btn_estado_red";imdev=0;var p=function(){if(nw.evalueData(window.localStorage.getItem("IAmDeveloper")))return!1;imdev++,5<=imdev&&(window.localStorage.setItem("IAmDeveloper","YEAH"),nw.dialog("Ahora cuenta con la opción de developer en configuración",function(){nw.loadHome(),window.location.reload()}))},g=nw.generateLink(l,p,c,0,s,u,o,d);nw.appendLinkMenu(g,a);l="Idioma",s="",c="center",u="",p=function(){nw.configuration.changeIdioma()},d="btn_cambiar_idioma",g=nw.generateLink(l,p,c,0,s,u,o,d);nw.appendLinkMenu(g,a);l="Cambiar tema",s="",c="center",u="",p=function(){nw.changeThema()},d="btn_cambiar_tema",g=nw.generateLink(l,p,c,0,s,u,o,d);nw.appendLinkMenu(g,a);l="Transición de ventanas",s="",c="center",u="",p=function(){nw.changeTransicionWindow()},d="btn_transicion_ventanas",g=nw.generateLink(l,p,c,0,s,u,o,d);nw.appendLinkMenu(g,a);l="Zoom",s="",c="center",u="",p=function(){nw.changeZoomWindow()},d="btn_zoom",g=nw.generateLink(l,p,c,0,s,u,o,d);nw.appendLinkMenu(g,a);l="Notificaciones",s="",c="center",u="",p=function(){nw.configuration.notificaciones()},d="btn_notificaciones_config",g=nw.generateLink(l,p,c,0,s,u,o,d);nw.appendLinkMenu(g,a);l="Sonido",s="",c="center",u="",p=function(){nw.configuration.sonido()},d="btn_sonido_config",g=nw.generateLink(l,p,c,0,s,u,o,d);nw.appendLinkMenu(g,a);l="Acerca de",s="",c="center",u="",p=function(){nw.about()},d="btn_acerca_de",g=nw.generateLink(l,p,c,0,s,u,o,d);if(nw.appendLinkMenu(g,a),nw.evalueData(window.localStorage.getItem("IAmDeveloper"))||"orionjafe@hotmail.com"===e.usuario.toLocaleLowerCase()||"orionjafe@gmail.com"===e.usuario.toLocaleLowerCase()||"alexf@netwoods.net"===e.usuario.toLocaleLowerCase()){l="Developer",s="",c="center",u="",p=function(){nw.developers()},d="btn_developers",g=nw.generateLink(l,p,c,0,s,u,o,d);nw.appendLinkMenu(g,a)}},destruct:function(){},members:{},statics:{sonido:function(){var n=new nw.forms;n.id="sonido",n.setTitle=nw.utils.tr("Sonido"),n.textClose=nw.utils.tr("Configurar"),n.html="",n.showBack=!0,n.createBase();n.setFields([{name:"soundNotificacionDesktop",label:"Sonido en notificaciones de escritorio",type:"selectBox",required:!0},{name:"soundNotificacionDesktopVolume",label:"Volumen sonido en notificaciones de escritorio",type:"range",rangeMax:"100",rangeMin:"0",required:!0}]),n.buttons=[{style:"text-shadow: none;font-weight: lighter;border: 0;",className:"btn_maxwidth",name:"aceptar",label:"Aceptar",callback:function(){var e=n.getRecord(!0);if(!n.validate()&&"0"!==e.soundNotificacionDesktopVolume.toString())return!1;e.soundNotificacionDesktopVolume=parseFloat(e.soundNotificacionDesktopVolume)/100,e.soundNotificacionDesktopVolume=e.soundNotificacionDesktopVolume.toString(),"0"===e.soundNotificacionDesktopVolume.toString()&&(e.soundNotificacionDesktopVolume="0.0"),window.localStorage.setItem("soundNotificacionDesktop",e.soundNotificacionDesktop),window.localStorage.setItem("soundNotificacionDesktopVolume",e.soundNotificacionDesktopVolume.toString()),nw.loading(),nw.loadHome(),window.location.reload()}}],n.show();var e={true:"SI",false:"NO"};n.ui.soundNotificacionDesktop.populateSelectFromArray(e),nw.evalueData(window.localStorage.getItem("soundNotificacionDesktop"))&&n.ui.soundNotificacionDesktop.setValue(window.localStorage.getItem("soundNotificacionDesktop")),void 0!==window.localStorage.getItem("soundNotificacionDesktopVolume")&&n.ui.soundNotificacionDesktopVolume.setValue(100*parseFloat(window.localStorage.getItem("soundNotificacionDesktopVolume")))},notificaciones:function(){var n=new nw.forms;n.id="notificaciones",n.setTitle=nw.utils.tr("Notificaciones"),n.textClose=nw.utils.tr("Configurar"),n.html="",n.showBack=!0,n.createBase();n.setFields([{name:"notificacionDesktop",label:"Mostrar notificaciones de escritorio",type:"selectBox",required:!0}]),n.buttons=[{style:"text-shadow: none;font-weight: lighter;border: 0;",className:"btn_maxwidth",name:"aceptar",label:"Aceptar",callback:function(){if(!n.validate())return!1;var e=n.getRecord(!0);window.localStorage.setItem("notificacionDesktop",e.notificacionDesktop),nw.loading(),nw.loadHome(),window.location.reload()}}],n.show();var e={true:"SI",false:"NO"};n.ui.notificacionDesktop.populateSelectFromArray(e),nw.evalueData(window.localStorage.getItem("notificacionDesktop"))&&n.ui.notificacionDesktop.setValue(window.localStorage.getItem("notificacionDesktop"))},changeZoomWindow:function(){var n=new nw.forms;n.id="changeZoomWindow",n.setTitle="Zoom",n.textClose="Configurar",n.html="",n.showBack=!0,n.createBase();n.setFields([{name:"zoomPage",label:"Zoom",placeholder:"Zoom",type:"selectBox",required:!0}]),n.buttons=[{style:"text-shadow: none;font-weight: lighter;border: 0;",className:"btn_maxwidth",name:"aceptar",label:"Aceptar",callback:function(){if(!n.validate())return!1;var e=n.getRecord(!0);window.localStorage.setItem("zoomPage",e.zoomPage),nw.loading(),nw.loadHome(),window.location.reload()}}],n.show();var e={normal:"Normal",1.035:"Mediana","1.060":"Grande"};n.ui.zoomPage.populateSelectFromArray(e),nw.evalueData(window.localStorage.getItem("zoomPage"))&&n.ui.zoomPage.setValue(window.localStorage.getItem("zoomPage"))},changeTransicionWindow:function(){var n=new nw.forms;n.id="changeTransicionWindow",n.setTitle=nw.utils.tr("Ventanas"),n.textClose=nw.utils.tr("Configurar"),n.html="",n.showBack=!0,n.createBase();n.setFields([{name:"defaultPageTransition",label:"Default Page Transition",placeholder:"Default Page Transition",type:"selectBox",required:!0}]),n.buttons=[{style:"text-shadow: none;font-weight: lighter;border: 0;",className:"btn_maxwidth",name:"aceptar",label:"Aceptar",callback:function(){if(!n.validate())return!1;var e=n.getRecord(!0);window.localStorage.setItem("defaultPageTransition",e.defaultPageTransition),nw.loading(),nw.loadHome(),window.location.reload()}}],n.show();var e={slide:"slide",slideup:"slideup",slidedown:"slidedown",slidefade:"slidefade",fade:"fade",flip:"flip",pop:"pop",turn:"turn",flow:"flow",none:"none"};n.ui.defaultPageTransition.populateSelectFromArray(e),n.ui.defaultPageTransition.setValue(window.localStorage.getItem("defaultPageTransition"))},changeIdioma:function(){var n=new nw.forms;n.id="changeIdioma",n.setTitle=nw.utils.tr("Idioma"),n.textClose="Configurar",n.html="<h1>"+nw.utils.tr("Seleccione el idioma")+"</h1>",n.showBack=!0,n.createBase();var e=[{name:"idioma",label:nw.utils.tr("Idioma"),placeholder:nw.utils.tr("Idioma"),type:"selectBox",required:!0}];n.setFields(e),n.buttons=[{style:"text-shadow: none;font-weight: lighter;border: 0;",className:"btn_maxwidth",name:"aceptar",label:nw.utils.tr("Aceptar"),callback:function(){if(!n.validate())return!1;var e=n.getRecord(!0);console.log("data",e),window.localStorage.setItem("idioma_config",e.idioma),nw.loading(),nw.loadHome(),window.location.reload()}}],n.show();var a={};a[""]=nw.utils.tr("Seleccione"),n.ui.idioma.populateSelectFromArray(a),n.ui.idioma.populateSelect("nwMaker","populateIdiomas",a,function(e){n.ui.idioma.setValue(window.localStorage.getItem("idioma_config"))},!0),n.ui.idioma.setValue(window.localStorage.getItem("idioma_config"))},changeThema:function(){var n=new nw.forms;n.id="changeThema",n.setTitle=nw.utils.tr("Cambiar tema"),n.textClose="Configurar",n.html="<h1>"+nw.utils.tr("Seleccione el tema")+"</h1>",n.showBack=!0,n.createBase();n.setFields([{name:"tema",label:"Tema",placeholder:"Tema",type:"selectBox",required:!0}]),n.buttons=[{style:"text-shadow: none;font-weight: lighter;border: 0;",className:"btn_maxwidth",name:"aceptar",label:"Aceptar",callback:function(){if(!n.validate())return!1;var e=n.getRecord(!0);window.localStorage.setItem("theme",e.tema),nw.loading(),nw.loadHome(),window.location.reload()}}],n.show();var e={a:"Claro",b:"Oscuro"};n.ui.tema.populateSelectFromArray(e),n.ui.tema.setValue(window.localStorage.getItem("theme"))},about:function(){var e="This device";"undefined"!=typeof domainLib&&(e=domainLib),""===e&&(e="This device");var n="This device";"undefined"!=typeof domainExtern&&(n=domainExtern),""===n&&(n="This device");var a=window.localStorage.getItem("token"),t="<h1>"+config.name+" versión "+config.version+"</h1></p> ";t+="<br /><p>Nwmaker-lib versión "+app.version+"</p></p> ",t+="<p>"+config.description+"</p>",t+="<p>Co creator: "+config.co_creator+"</p>",t+="<p>Dom-rpc: "+config.domain_rpc+"</p> ",t+="<p>Dom-fil: "+n+"</p> ",t+="<p>Dom-libnwmaker: "+e+"</p> ",t+="<p>Versión caché device: "+config.version_in_this_device+"</p> ",nw.evalueData(a)&&(t+="<p>Token Notify <textarea>"+a+"</textarea></p>");var o=new nw.newPage;o.changeHash=!0,nw.evalueData(config.credits_creator)?o.footer="Powered by "+config.credits_creator+"</p>":o.footer="Powered by Grupo Nw<br /><a href='https://www.gruponw.com' target='_BLANK'>gruponw.com</a></p>",o.id="about",o.title="",o.html=t,o.create(),o.show()}}}),nw.Class.define("nw.account",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{openProfile:function(e){var n="<iframe class='iframeProfileNw' src='"+(config.domain_rpc+"/nwlib6/nwproject/modules/nw_user_session/index.php?profilenw="+e)+"'></iframe>",a={};a.html=n,a.id="profile_nw_chat",a.className="profile_nw_chat",a.canvas=".profile_nw_chat",a.showBack=!1,a.closeBack=!0,nw.createDialogNw(a)},closeSessionExec:function(e,n){void 0===e&&(e=!0),e&&nw.loading({text:"Cerrando sesión..."});var a=config.config_crear_cuenta,t=nw.userPolicies.getUserData(),o=new nw.rpc(nw.getRpcUrl(),"nwMaker"),i={};i.usuario=t.usuario,i.terminal=t.terminal,nw.evalueData(window.localStorage.getItem("token"))&&(i.token=window.localStorage.getItem("token")),i.session_id=config.session_id,o.setAsync(!0),o.setLoading(!1);o.exec("closeSessionInApp",i,function(e){nw.utils.getDebug()&&nw.console.log("Close session OK!",e),localStorage.initSession="undefined",localStorage.outputMenuLeft="undefined",localStorage.outputMenuCenter="undefined",$.each(localStorage,function(e,n){localStorage.removeItem(e)}),!0===a.permitir_registro_login_con_facebook&&nw.fb_logout(),"undefined"!=typeof FCMPlugin&&nw.unSuscribedUserNotificacionPush(),nw.notificationPushFirebaseMessaging.unSuscribedUserNotificacionPush(),void 0!==n?n():setTimeout(function(){window.location=location.pathname},500)})},closeSession:function(e,n){nw.dialog(nw.utils.tr("¿Realmente deseas cerrar sesión?"),function(){return nw.account.closeSessionExec(e,n)},function(){return!0})},setUserInfo:function(e,n){window.localStorage.setItem("initSession","true"),$.each(e,function(e,n){var a=n;"object"==typeof n&&(a=JSON.stringify(n)),window.localStorage.setItem(e,a)}),nw.evalueData(n)&&n()},validateChangesUserSession:function(e,n){var o=!1;if($.each(e,function(a,e){if("fecha_ultima_conexion"!=a&&"version_in_this_device"!=a&&"estado_conexion"!=a&&"latitud"!=a&&"longitud"!=a&&"version"!=a&&"dispositivo"!=a&&"token"!=a&&"fecha_acepta_terminos"!=a&&"sistema_operativo"!=a&&"token_actual_app"!=a&&"token_actual_app_fecha"!=a&&"preoperacional_ultima_fecha"!=a&&"zonaHorariaActual"!=a&&"puntaje"!=a&&"null"!=a&&null!=a&&nw.utils.evalueData(a)&&"null"!=e&&null!=e&&nw.utils.evalueData(e)){var t=e;"object"==typeof e&&(t=JSON.stringify(e)),$.each(n,function(e,n){nw.utils.evalueData(n)&&("object"==typeof n&&(n=JSON.stringify(n)),e==a&&n!=t&&(console.log("key",a),console.log("key_up",e),console.log("val",t),console.log("value_up",n),console.warn("Session have changes by "+e+"!!!!"),o=!0))})}}),o)return nw.loading({text:"",title:"Un momento, estamos actualizando datos de sesión...",addClass:"loading_home_download_version_cache"}),setTimeout(function(){window.location.reload(!0),window.location.href=window.location.href},3e3),!1},refreshSessionApp:function(a,t){var o=nw.userPolicies.getUserData(),e={};e.id_usuario=o.id_usuario,e.usuario=o.usuario;var n=!0;nw.evalueData(config.validateUserWithoutCompany)&&(n=!1),n&&(e.empresa=o.empresa,e.terminal=o.terminal,e.perfil=o.perfil);var i=null;nw.evalueData(window.localStorage.getItem("token"))&&(i=window.localStorage.getItem("token")),e.version_in_this_device=config.version_in_this_device,e.version=config.version,e.dispositivo=config.device,e.token=i,e.sistema_operativo=nw.utils.getMobileOperatingSystem(),nw.evalueData(config.activeLatsConnectStatus)?e.estado=config.activeLatsConnectStatus:e.estado="conectado",nw.evalueData(config.activesaveAllPosition)&&(nw.evalueData(config.id_servi_ubic)&&(e.id_servi_ubic=config.id_servi_ubic),e.allPosition=config.activesaveAllPosition),nw.evalueData(config.ciudad)&&(e.ciudad=config.ciudad),nw.evalueData(config.ciudad_text)&&(e.ciudad_text=config.ciudad_text),nw.evalueData(config.latitud)&&nw.evalueData(config.longitud)&&(e.latitud=config.latitud,e.longitud=config.longitud);var r=new nw.rpc(nw.getRpcUrl(),"nwMaker");r.setAsync(!0),r.setLoading(!1);r.exec("refreshSessionApp",e,function(e){if(nw.utils.getDebug()&&console.log("refreshSessionApp",e),nw.utils.evalueData(e.foto_perfil)&&(e.foto=e.foto_perfil),"USUARIO_NO_EXISTE"===e){nw.loadingRemove(),nw.remove(".popup_pil");var n=nw.utils.tr("El usuario")+" "+o.usuario+" "+nw.utils.tr("no existe o está inactivo. Log: Perfil:")+" "+o.perfil+", "+nw.utils.tr("Empresa")+": "+o.empresa+" - "+nw.utils.tr("Terminal")+": "+o.terminal;return nw.account.closeSessionExec(!1,function(){console.log("Close")}),nw.dialog(n,function(){window.location.reload()},!1,{original:!0}),!1}nw.setUserInfo(e,function(){nw.evalueData(a)&&a()}),"noupdate"!=t&&nw.account.validateChangesUserSession(e,o)})},relojActiveCon:null,activeLatsConnectVar:null,activeLatsConnect:function(o){var i=this;if(!0!==o&&clearTimeout(i.activeLatsConnectVar),!nw.isMobile()&&nw.evalueData(config.activeLastConnectDetectInactivity)&&(nw.remove(".activeLastConnectDetectShowMessage"),!0===nw.utils.inactivity)){if(nw.evalueData(config.activeLastConnectDetectShowMessage)){var e=nw.utils.tr(config.activeLastConnectDetectShowMessage);nw.dialog(e,function(){return nw.utils.inactivity=!1,clearTimeout(i.activeLatsConnectVar),!0},!1,{addClass:"activeLastConnectDetectShowMessage"}),nw.utils.getDebug()&&console.log("Detecta inactividad")}return nw.utils.getDebug()&&console.log("última conexión detenida... esperando actividad del usuario..."),clearTimeout(i.activeLatsConnectVar),void(i.activeLatsConnectVar=setTimeout(function(){i.activeLatsConnect()},1e3))}if(!nw.evalueData(config.activeLatsConnect))return!1;var n=null;nw.evalueData(window.localStorage.getItem("token"))&&(n=window.localStorage.getItem("token"));var a=nw.userPolicies.getUserData(),r={};r.usuario=a.usuario,r.empresa=a.empresa,r.terminal=a.terminal,r.perfil=a.perfil,r.version_in_this_device=config.version_in_this_device,r.version=config.version,r.dispositivo=config.device,r.token=n,r.sistema_operativo=nw.utils.getMobileOperatingSystem(),nw.evalueData(config.activeLatsConnectStatus)?r.estado=config.activeLatsConnectStatus:r.estado="conectado",nw.evalueData(config.activesaveAllPosition)&&(nw.evalueData(config.id_servi_ubic)&&(r.id_servi_ubic=config.id_servi_ubic),r.allPosition=config.activesaveAllPosition),nw.evalueData(config.ciudad)&&(r.ciudad=config.ciudad),nw.evalueData(config.ciudad_text)&&(r.ciudad_text=config.ciudad_text),nw.evalueData(config.latitud)&&nw.evalueData(config.longitud)&&(r.latitud=config.latitud,r.longitud=config.longitud),r.timedate=nw.getActualFullDate(),r.haveCallBack="NO",void 0!==config.activeLatsConnectCallBack&&"function"==typeof config.activeLatsConnectCallBack&&(r.haveCallBack="SI"),r.timeStampUnix_ultima_conexion=Math.round(+new Date/1e3);var t=new nw.rpc(nw.getRpcUrl(),"nwMaker");t.setAsync(!0),t.setLoading(!1),nw.utils.getDebug()&&console.log("Data send activeLatsConnect",r);t.exec("actualizeLastConnectionAPP",r,function(e){if(nw.utils.getDebug()&&console.log("actualizeLastConnectionAPP",e),!0!==e&&"NO"===r.haveCallBack)return nw.dialog(e),!1;var n=3e4;if(nw.evalueData(config.activeLatsConnectTime)&&(n=config.activeLatsConnectTime),!0!==o){if(!0===config.activeLatsConnectShowLog){var a=0;clearInterval(i.relojActiveCon),i.relojActiveCon=setInterval(function(){a++,console.log(a+" Segundos para actualizar fecha de última conexión, cada "+n+" milisegs",a)},1e3)}i.activeLatsConnectVar=setTimeout(function(){i.activeLatsConnect()},n)}if("SI"===r.haveCallBack){var t={};t.response=e,t.dataSend=r,t.timedate=r,config.activeLatsConnectCallBack(t)}})},menuProfile:function(){var l=nw.userPolicies.getUserData(),s=config.edit_profile;console.log("config edit",s);var e=new nw.newPage;e.id="menuProfile",e.title="Mi cuenta",e.textClose="Atrás",e.html="",e.buttons=[],!0===s.permitir_editar&&e.buttons.push({style:"background-color:#fff;border-radius: 5px;",colorBtnBackIOS:"#000",icon:"material-icons edit normal",position:"top",name:"editar_account",label:"",callback:function(){nw.account.editProfile()}}),e.create(),e.show();var n="."+e.id,a=nw.containerLinksMenu();e.append(a);var t="";nw.evalueData(l.foto)&&(t=l.foto),t=1<t.split("://").length?l.foto:config.domain_rpc+nw.getFileByType(l.foto,150);var o="btn_mi_perfil",i=nw.utils.tr("Mi perfil"),r=l.nombre+"<br />"+l.email;nw.evalueData(l.documento)&&(r+="<br />"+l.documento),r+="<button class='editProfileBtn'>"+nw.utils.tr("Editar perfil")+"</button>";var c="center",u=t,d=function(){nw.account.editProfile()},p=nw.generateLink(i,d,c,0,r,u,"bloq",o);nw.appendLinkMenu(p,n);i="Correo electrónico",r=l.email,c="center",u="material-icons email normal false",o="btn_correo",d=!1,p=nw.generateLink(i,d,c,0,r,u,"lists_simple",o);nw.appendLinkMenu(p,n);var g=!0;if(!1===s.permitir_cambiar_idioma&&(g=s.permitir_cambiar_idioma),!0===g){i=nw.utils.tr("Idioma")+" - "+nw.utils.getLang(),r=nw.utils.tr("++Cambiar el idioma")+" - "+nw.utils.getLang(),c="center",u="material-icons language normal false",o="btn_cambiar_idioma",d=function(){nw.configuration.changeIdioma()},p=nw.generateLink(i,d,c,0,r,u,"lists_simple",o);nw.appendLinkMenu(p,n)}if(!0===s.permitir_cambiar_clave){i=nw.utils.tr("Cambiar contraseña"),r=nw.utils.tr("Seguridad"),c="center",u="material-icons security normal false",o="btn_cambiar_contrasena",d=function(){nw.changePass(!0)},p=nw.generateLink(i,d,c,0,r,u,"lists_simple",o);nw.appendLinkMenu(p,n)}if(!0===s.ver_saldo||!0===s.ver_puntaje){if(!0===s.ver_saldo){i="Saldo - Billetera Virtual",r=nw.utils.tr("Su saldo es")+": <strong> <span class='saldo_account_nwmaker'>0</span> <span class='moneda_account_nwmaker'>N/A</span></strong>",c="center",u="material-icons attach_money normal false",d=!(o="btn_eliminar_cuentas"),p=nw.generateLink(i,d,c,0,r,u,"lists_simple",o);nw.appendLinkMenu(p,n)}if(!0===w){i=nw.utils.tr("Vencimiento de recarga"),r=nw.utils.tr("Su recarga vence el")+" <strong><span class='saldofechavence_account_nwmaker'>N/A</span></strong><br />"+nw.utils.tr("Fecha última recarga")+": <span class='saldofechaultimarecarga_account_nwmaker'>N/A</span> \n                                       <br /> "+nw.utils.tr("Total recargas")+": <span class='totalrecargas_account_nwmaker'>N/A</span>",c="center",u="material-icons timer normal false",d=!(o="btn_eliminar_cuentafdsa"),p=nw.generateLink(i,d,c,0,r,u,"lists_simple",o);nw.appendLinkMenu(p,n)}if(nw.evalueData(config.accountAdminBancos)){i=nw.utils.tr("Datos bancarios"),r=nw.utils.tr("Administre las cuentas bancarias de pagos"),c="center",u="material-icons credit_card normal false",o="btn_correo",d=function(){nw.account.datosBancarios()},p=nw.generateLink(i,d,c,0,r,u,"lists_simple",o);nw.appendLinkMenu(p,n);i=nw.utils.tr("Histórico de pagos"),r=nw.utils.tr("Consulte pagos pasados o en canje"),c="center",u="material-icons history normal false",o="btn_correo",d=function(){nw.account.pagosHistorico()},p=nw.generateLink(i,d,c,0,r,u,"lists_simple",o);nw.appendLinkMenu(p,n)}if(nw.evalueData(config.accountAdminRetiros)){i=nw.utils.tr("Retirar fondos"),r=nw.utils.tr("Solicite retiro de fondos"),c="center",u="material-icons get_app normal false",o="btn_correo",d=function(){nw.retiroFondos()},p=nw.generateLink(i,d,c,0,r,u,"lists_simple",o);nw.appendLinkMenu(p,n);i=nw.utils.tr("Histórico de retiros"),r=nw.utils.tr("Consulte retiros pasados o en canje"),c="center",u="material-icons history normal false",o="btn_correo",d=function(){nw.historicoRetiros()},p=nw.generateLink(i,d,c,0,r,u,"lists_simple",o);nw.appendLinkMenu(p,n)}if(nw.evalueData(config.accountAdminPagarEmpresa)){i=nw.utils.tr("Pagar a empresa"),r=nw.utils.tr("Envíe el comprobante de sus pago"),c="center",u="material-icons send normal false",o="btn_correo",d=function(){nw.pagosEmpresa()},p=nw.generateLink(i,d,c,0,r,u,"lists_simple",o);nw.appendLinkMenu(p,n)}if(!0===s.ver_puntaje){i=nw.utils.tr("Puntaje"),r="<div class='menu_califica'><span class='puntajestars_account_nwmaker'>N/A</span></br><span>"+nw.utils.tr("Promedio")+": <span class='puntajepromedio_account_nwmaker'>N/A</span></span></br><span>"+nw.utils.tr("No servicios")+" : <span class='totalservicios_account_nwmaker'>N/A</span></span></div>",c="center",u="material-icons star normal false",o="btn_correo",d=!1,p=nw.generateLink(i,d,c,0,r,u,"lists_simple",o);nw.appendLinkMenu(p,n)}var m="soporte@gruponw.com";if(nw.evalueData(config.emailSupport)&&(m=config.emailSupport),"undefined"!=typeof main&&void 0!==main.configCliente&&nw.evalueData(main.configCliente.emailSupport)&&(m=main.configCliente.emailSupport),!0===s.ver_puntaje){i=nw.utils.tr("Soporte"),r=nw.utils.tr("Estaremos atentos a escucharte."),c="center",u="material-icons contact_phone normal false",o="btn_correo_soporte",d=function(){location.href="mailto:"+m},p=nw.generateLink(i,d,c,0,r,u,"lists_simple",o);nw.appendLinkMenu(p,n)}}if(!0===s.ver_saldo||!0===s.ver_puntaje){var f={};nw.utils.getDebug()&&console.log(l);var w=!1;nw.evalueData(config.usaFechaVencimientoSaldo)&&!0===config.usaFechaVencimientoSaldo&&(w=!0),f.id=l.id_usuario,f.usuario=l.usuario,f.empresa=l.empresa,f.perfil=l.perfil,!0===w&&(f.fecha_vencimiento_saldo="SI");var v=new nw.rpc(nw.getRpcUrl(),"nwMaker");v.setAsync(!0),v.setLoading(!0);v.exec("consultaSaldoUserApp",f,function(n){if(0===n)return nw.dialog("El usuario no existe o está inactivo. Consulte con el administrador del sistema."),!1;nw.utils.getDebug()&&console.log(n);var a="";if(nw.evalueData(config.decimales,config.decimales)&&(a=config.decimales),!0===s.ver_saldo){var t="";nw.evalueData(config.moneda)&&(t=config.moneda);var o=n.saldo;nw.saldoVal=o,nw.utils.validateElementIfExist(".saldo_account_nwmaker",function(e){e.innerHTML=o}),nw.utils.validateElementIfExist(".moneda_account_nwmaker",function(e){e.innerHTML=t})}if(!0===w){var i=n.fecha_vencimiento_saldo;nw.evalueData(i)||(i="Sin recarga"),nw.utils.validateElementIfExist(".saldofechavence_account_nwmaker",function(e){e.innerHTML=i}),nw.utils.validateElementIfExist(".saldofechaultimarecarga_account_nwmaker",function(e){e.innerHTML=n.fecha_ultima_recarga}),nw.utils.validateElementIfExist(".saldofechaultimarecarga_account_nwmaker",function(e){e.innerHTML=nw.addNumber(n.saldo_por_tiempo)+a})}if(!0===s.ver_puntaje){var e={};e.usuario=l.usuario,e.perfil=l.perfil,e.empresa=l.empresa;var r=new nw.rpc(nw.getRpcUrl(),"nwMaker");r.setAsync(!1),r.exec("consultaPuntaje",e,function(e){for(var n=e,a=n.puntuacion,t=Math.round(a),o="",i=0;i<5;i++)o+=i<t?"<i class='ico_1 material-icons' style='color: #e04935;'>star</i>":"<i class='ico_1 material-icons'>star_border</i>";var r=a.toFixed(2);nw.utils.validateElementIfExist(".puntajestars_account_nwmaker",function(e){e.innerHTML=o}),nw.utils.validateElementIfExist(".puntajepromedio_account_nwmaker",function(e){e.innerHTML=r}),nw.utils.validateElementIfExist(".totalservicios_account_nwmaker",function(e){e.innerHTML=n.total_servicios})})}})}if(nw.utils.evalueData(config.addButtonsInAccountOtherData))for(var h=0;h<config.addButtonsInAccountOtherData.length;h++)config.addButtonsInAccountOtherData[h]();i=nw.utils.tr("Otros datos"),r=nw.utils.tr("Empresa")+": "+l.empresa+"- "+nw.utils.tr("Perfil")+" ID: "+l.perfil+NaN+nw.utils.tr("Perfil")+" text: "+nw.utils.tr(l.perfil_text)+" - "+nw.utils.tr("Terminal")+": "+l.terminal+nw.utils.tr(" -  VITD: ")+config.version_in_this_device;nw.utils.evalueData(config.addTextInAccountOtherData)&&(r+=" "+config.addTextInAccountOtherData);c="center",u="material-icons email normal false",o="btn_others_account",d=!1,p=nw.generateLink(i,d,c,0,r,u,"lists_simple",o);nw.appendLinkMenu(p,n);i=nw.utils.tr("Buscar actualizaciones"),r=nw.utils.tr("Valide las últimas novedades"),c="center",u="material-icons system_update normal false",o="btn_buscar_actualizacion",d=function(){nw.buscarActualizaciones.searchUpdatesApp()},p=nw.generateLink(i,d,c,0,r,u,"lists_simple",o);nw.appendLinkMenu(p,n);i=nw.utils.tr("Acerca de"),r=nw.utils.tr("Versión, fabricante, otras"),c="center",u="material-icons info normal false",o="btn_acerca_de",d=function(){nw.about()},p=nw.generateLink(i,d,c,0,r,u,"lists_simple",o);nw.appendLinkMenu(p,n);i="Configuraciones",r=nw.utils.tr("Cambiar tema, fuente, otras"),c="center",u="material-icons settings normal false",o="btn_configuraciones",d=function(){nw.configuration()},p=nw.generateLink(i,d,c,0,r,u,"lists_simple",o);if(nw.appendLinkMenu(p,n),!0===s.eliminar_cuenta){i=nw.utils.tr("Eliminar mi cuenta"),r=nw.utils.tr("Si elimina su cuenta, no podrá recuperar sus datos"),c="center",u="",o="btn_eliminar_cuenta",d=function(){nw.dialog("¿Está seguro de eliminar su cuenta?",function(){nw.loading({text:"Por favor espere...",textVisible:!0,html:"",theme:"b"});var e={};e.usuario=l.usuario,e.empresa=l.empresa;var n=new nw.rpc(nw.getRpcUrl(),"nwMaker");n.setAsync(!0);n.exec("cancelarCuenta",e,function(e){console.log(e),nw.closeSession()})},function(){})},p=nw.generateLink(i,d,c,0,r,u,"bloq",o);nw.appendLinkMenu(p,n)}i=nw.utils.tr("Cerrar sesión"),r=nw.utils.tr("Salida segura"),c="center",u="material-icons exit_to_app normal false",o="btn_salida_segura",d=function(){nw.closeSession()},p=nw.generateLink(i,d,c,0,r,u,"lists_simple",o);nw.appendLinkMenu(p,n)},editProfile:function(e){var t=nw.userPolicies.getUserData(),o=config.edit_profile;if(!1===o.permitir_editar)return!1;var i=new nw.forms;!0===e?($(".containerCenterHome").empty(),i.canvas="#foo",i.id_form="editProfile"):(i.id="editProfile",i.setTitle="Perfil",i.textClose="Atrás",i.html="",i.showBack=!0,i.createBase());var n="";nw.evalueData(t.foto)&&(n=t.foto),nw.evalueData(t.foto_perfil)&&(n=t.foto_perfil);var a=[];if(a.push({style:"border-top: 1px solid #ccc;border-bottom: 1px solid #ccc;margin:0px;overflow:hidden;padding:20px 0;",name:"grupo_fotografia",label:"Foto de perfil",type:"startGroup",mode:"div",visible:JSON.parse(o.foto_perfil.split(" ")[0])},{icon:"material-icons photo normal",type:"button",mode:"camera_files",name:"foto_perfil",data:n,label:"Seleccionar foto de perfil",placeholder:"Seleccionar foto de perfil",visible:JSON.parse(o.foto_perfil.split(" ")[0]),enabled:JSON.parse(o.foto_perfil.split(" ")[1]),required:JSON.parse(o.foto_perfil.split(" ")[2])},{name:"grupo_visitantes_open",type:"endGroup"}),a.push({style:"border-top: 1px solid #ccc;border-bottom: 1px solid #ccc;margin:0px;overflow:hidden;padding:20px 0;",name:"grupo_usuario",label:"Datos Principales",type:"startGroup",mode:"div",visible:!0}),a.push({icon:"material-icons mail normal",name:"email",label:"Correo",placeholder:"Correo",type:"textField",mode:"email",visible:JSON.parse(o.email.split(" ")[0]),enabled:JSON.parse(o.email.split(" ")[1]),required:JSON.parse(o.email.split(" ")[2])}),a.push({icon:"material-icons person normal",name:"nombre",label:"Nombre",placeholder:"Nombre",type:"textField",visible:JSON.parse(o.nombre.split(" ")[0]),enabled:JSON.parse(o.nombre.split(" ")[1]),required:JSON.parse(o.nombre.split(" ")[2])}),a.push({icon:"material-icons person normal",name:"apellido",label:"Apellidos",placeholder:"Apellidos",type:"textField",visible:JSON.parse(o.apellido.split(" ")[0]),enabled:JSON.parse(o.apellido.split(" ")[1]),required:JSON.parse(o.apellido.split(" ")[2])}),!0===o.tipo_documento&&a.push({icon:"material-icons donut_small normal",name:"tipo_documento",label:"Tipo de documento",placeholder:"Tipo de documento",type:"selectBox",required:!0}),a.push({icon:"material-icons perm_contact_calendar normal",name:"nit",label:"Documento de identificación",placeholder:"Documento de identificación",type:"textField",visible:JSON.parse(o.nit.split(" ")[0]),enabled:JSON.parse(o.nit.split(" ")[1]),required:JSON.parse(o.nit.split(" ")[2])}),a.push({icon:"material-icons contact_phone normal",name:"celular",label:"Celular / móvil",placeholder:"Celular / móvil",type:"numeric",visible:JSON.parse(o.celular.split(" ")[0]),enabled:JSON.parse(o.celular.split(" ")[1]),required:JSON.parse(o.celular.split(" ")[2])}),void 0!==o.genero&&JSON.parse(o.genero.split(" ")[0])&&a.push({icon:"material-icons group normal",name:"genero",label:"Género",placeholder:"Género",type:"selectBox",visible:JSON.parse(o.genero.split(" ")[0]),enabled:JSON.parse(o.genero.split(" ")[1]),required:JSON.parse(o.genero.split(" ")[2])}),a.push({icon:"material-icons date_range normal",name:"fecha_nacimiento",label:"Fecha de nacimiento",placeholder:"Fecha de nacimiento",type:"dateField",visible:JSON.parse(o.fecha_nacimiento.split(" ")[0]),enabled:JSON.parse(o.fecha_nacimiento.split(" ")[1]),required:JSON.parse(o.fecha_nacimiento.split(" ")[2])}),void 0!==o.correo_gmail&&void 0!==JSON.parse(o.correo_gmail.split(" ")[2])&&a.push({icon:"material-icons mail normal",name:"correo_gmail",label:"Correo de Gmail",placeholder:"Correo de Gmail",type:"textField",mode:"email",visible:JSON.parse(o.correo_gmail.split(" ")[0]),enabled:JSON.parse(o.correo_gmail.split(" ")[1]),required:JSON.parse(o.correo_gmail.split(" ")[2])}),!0===o.adjunto_optional&&a.push({icon:"material-icons photo normal",type:"button",mode:"camera_files",name:"adjunto_opcional",label:"Adjunto opcional",placeholder:"Adjunto opcional",required:!0}),a.push({name:"grupo_usuario",type:"endGroup"}),a.push({style:"border-top: 1px solid #ccc;border-bottom: 1px solid #ccc;margin:0px;overflow:hidden;padding:20px 0;",name:"grupo_ubicacion",label:"Ubicación",type:"startGroup",mode:"div",visible:o.ubicacion}),a.push({icon:"material-icons gps_fixed normal",name:"pais",label:"País",placeholder:"País",type:"selectBox",visible:JSON.parse(o.pais.split(" ")[0]),enabled:JSON.parse(o.pais.split(" ")[1]),required:JSON.parse(o.pais.split(" ")[2])}),a.push({icon:"material-icons gps_fixed normal",name:"departamento",label:"Departamento",placeholder:"Departamento",type:"selectBox",visible:JSON.parse(o.departamento.split(" ")[0]),enabled:JSON.parse(o.departamento.split(" ")[1]),required:JSON.parse(o.departamento.split(" ")[2])}),a.push({icon:"material-icons gps_fixed normal",name:"ciudad",label:"Ciudad",placeholder:"Ciudad",type:"selectBox",visible:JSON.parse(o.ciudad.split(" ")[0]),enabled:JSON.parse(o.ciudad.split(" ")[1]),required:JSON.parse(o.ciudad.split(" ")[2])}),a.push({name:"grupo_ubicacion",type:"endGroup"}),void 0!==config.labelsAccount&&(a=nw.utils.labelsChange(config.labelsAccount,a)),i.setFields(a),i.buttons=[{styleContainer:"width:50%;",style:"text-shadow: none;font-weight: lighter;border: 0;",icon:"material-icons check_circle normal",colorBtnBackIOS:"green",className:"btn_enc",position:"center",name:"aceptar",label:"Guardar",callback:function(){if(!i.validate())return!1;var e=i.getRecord();e.usuario=t.usuario,e.empresa=t.empresa,e.perfil=t.perfil,nw.utils.getDebug()&&(nw.console.log(e),console.log(e)),nw.loading({text:"Por favor espere...",title:"Actualizando..."});var n=new nw.rpc(nw.getRpcUrl(),"nwprojectOut");n.setAsync(!0),n.setLoading(!1);n.exec("updateInfoUserperfil",e,function(e){if(nw.loadingRemove(),nw.utils.getDebug()&&(console.log(e),nw.console.log(e)),"string"==typeof e)return nw.dialog(e),!1;nw.setUserInfo(e,function(){window.location.reload()})})}}],i.show(),JSON.parse(o.pais.split(" ")[0])){var r={"":"Seleccione el país"};i.ui.pais.populateSelectFromArray(r),i.ui.pais.setValue(""),i.ui.pais.populateSelect("nwMaker","populateCountries",r,function(e){if(nw.evalueData(t.pais)){i.ui.pais.setValue(t.pais);var n="pais_id";nw.evalueData(config.field_pais_search_relation)&&(n=config.field_pais_search_relation),u(t.pais,n)}},!0),i.ui.pais.changeValue(function(e){var n=i.ui.pais.getValue();if(JSON.parse(o.departamento.split(" ")[0]))c(n.val);else if(JSON.parse(o.ciudad.split(" ")[0])&&!JSON.parse(o.departamento.split(" ")[0])){var a="pais_id";nw.evalueData(config.field_pais_search_relation)&&(a=config.field_pais_search_relation),u(n.val,a)}})}if(JSON.parse(o.departamento.split(" ")[0])){r={"":"Seleccione"};i.ui.departamento.populateSelectFromArray(r),JSON.parse(o.pais.split(" ")[0])||c()}if(JSON.parse(o.ciudad.split(" ")[0])){r={"":"Seleccione"};i.ui.ciudad.populateSelectFromArray(r);var l=!0;JSON.parse(o.pais.split(" ")[0])&&JSON.parse(o.departamento.split(" ")[0])||(l=!1),nw.evalueData(t.ciudad)&&(l=!0),l&&u()}if(void 0!==o.genero&&JSON.parse(o.genero.split(" ")[0])){r={"":"Seleccione",HOMBRE:"Masculino",MUJER:"Femenino"};i.ui.genero.populateSelectFromArray(r)}if(!0===o.tipo_documento){if(void 0!==config.labelsAccountTypeDocs)var s=config.labelsAccountTypeDocs;else s={"":"Seleccione",CC:"Cédula de ciudadanía",CE:"Cédula de extranjería",NI:"Nit",PP:"Pasaporte"};i.ui.tipo_documento.populateSelectFromArray(s)}function c(e){var n={table:"deptosGeo",order:"nombre"};nw.evalueData(e)&&(n.where=" and pais='"+e+"'"),i.ui.departamento.populateSelect("master","populate",n,function(e){nw.utils.getDebug()&&console.log(e),nw.evalueData(t.departamento)&&i.ui.departamento.setValue(t.departamento)},!0,!0)}function u(e,n){var a={};a={};nw.evalueData(n)&&(a.field=n),nw.evalueData(e)&&(a.value=e),i.ui.ciudad.populateSelect("nwMaker","populateCities",a,function(e){nw.evalueData(t.ciudad)&&i.ui.ciudad.setValue(t.ciudad)},!0,!0)}nw.utils.getDebug()&&console.log(t),i.setRecord(t),nw.evalueData(t.nombre)||i.ui.nombre.disabled(!1),nw.evalueData(t.apellido)||i.ui.apellido.disabled(!1),nw.evalueData(t.celular)||i.ui.celular.disabled(!1)},changePass:function(e,n){nw.loadingRemove();var a=config.edit_profile,t=config.config_crear_cuenta;if(!1===a.permitir_cambiar_clave)return!1;var o="#foo";if(!0===e){var i=new nw.newPage;i.id="changePass",i.title="Cambiar clave",i.html="",i.create(),o="#"+i.id}var r=nw.userPolicies.getUserData().usuario;nw.evalueData(n)&&(r=n);var l=new nw.forms;l.canvas=o,l.id_form="changePass";var s=[{name:"grupo_horario_open",label:"<div style='text-align:center;'><h1>"+nw.utils.tr("Actualizar contraseña")+"</h1><p>"+nw.utils.tr("Ingrese los siguientes datos para cambiar su contraseña")+"</p></div>",type:"startGroup",visible:!0},{name:"nueva",label:"Clave nueva",placeholder:"Clave nueva",type:"textField",mode:"password",required:!0},{name:"repetida",label:"Repita su clave nueva",placeholder:"Repita su clave nueva",type:"textField",mode:"password",required:!0},{name:"grupo_horario_close",type:"endGroup"}];l.setFields(s),l.buttons=[{style:"text-shadow: none;font-weight: lighter;border: 0;",className:"btn_maxwidth",name:"aceptar",label:"Enviar",callback:function(){if(!l.validate())return!1;var e=l.getRecord();e.showFirst=!1,e.usuario=r,nw.evalueData(t.pedir_empresa)&&(e.pedir_empresa=t.pedir_empresa),nw.evalueData(t.perfil)&&(e.perfil=t.perfil),nw.utils.getDebug()&&console.log(e);var n=new nw.rpc(l.getRpcUrl(),"nwMaker");n.setAsync(!0);n.exec("changeRecoveryPassNwMaker",e,function(e){if(nw.utils.getDebug()&&(nw.console.log(e),console.log(e)),!0===e){window.localStorage.setItem("cambio_clave","1"),nw.cleanAllWindow();var n={id:"claveCambiada",title:"",html:"<h2 style='text-align:center;'>¡Clave cambiada correctamente!</h2>",acceptButtonText:"",acceptButton:function(){window.location.reload()},showBack:!1};return nw.createDialog(n),!0}nw.dialog(e)})}}],l.show(),!0===e&&i.show()},datosBancarios:function(){var o=new nw.lists,i=nw.userPolicies.getUserData();o.createBase=new nw.newPage,o.createBase.showContextMenu=!0,o.createBase.id="l_cuentas_bancarias_conte",o.createBase.html="",o.createBase.showBack=!0,o.createBase.closeBack=!1,o.createBase.logotipo_text="<span style='color:#ffff;'>"+nw.utils.tr("Cuentas Bancarias")+"<span>",o.createBase.createAndShow(),o.showContextMenu=!0,o.id_form="l_cuentas_bancarias",o.canvas="#l_cuentas_bancarias_conte";o.setColumns([{name:"numero_cuenta",label:"Número de cuenta"},{name:"banco",label:"Banco"},{name:"tipo_cuenta",label:"Tipo de tarjeta"},{name:"documento",label:"Documento"},{name:"nombre",label:"Nombre"}]),o.buttons=[];o.buttons.push({style:"background: #19bbd7;color: #fff;border: 1px solid;",colorBtnBackIOS:"#f18107",icon:"material-icons how_to_reg normal",position:"top",name:"nuevo",label:"Nuevo",callback:function(e){var n=o.getAllData();nw.evalueData(n)&&1==n.length?nw.dialog("Ya tiene una cuenta creada."):o.formCuentas()}}),o.show(),o.contextMenu=function(){var a=this,e=new nw.contextmenu(this,"bottom");e.addAction("Editar","nwmaker/img/baseline-create-24px.svg",function(e){var n=a.selectedRecord();a.formCuentas(n)}),e.addAction("Eliminar","nwmaker/img/baseline-create-24px.svg",function(e){var n=a.selectedRecord();a.eliminar(n)})},o.formCuentas=function(e){var n=new nw.forms;n.id="f_cuentas_bancarias",n.setTitle=nw.utils.tr("Datos Cuenta"),n.createBase();var a=[{name:"numero_cuenta",label:"Número de cuenta",placeholder:"Ingrese el número",type:"textField",required:!0},{name:"banco",label:"Banco",placeholder:"Nombre Banco",type:"textField",required:!0},{name:"tipo_cuenta",label:"Tipo de cuenta",type:"selectBox",required:!0},{name:"documento",label:"Documento",type:"textField",enabled:!1,required:!0},{name:"nombre",label:"Nombre",type:"textField",enabled:!1,required:!0}];void 0!==config.labelsAccountBanco&&(a=nw.utils.labelsChange(config.labelsAccountBanco,a)),n.setFields(a),n.buttons=[{style:"border: 0;background-color:#1abbd7;color:#fff;margin:0px;",icon:"material-icons check_circle normal",colorBtnBackIOS:"#fff",position:"bottom",name:"aceptar",label:"Aceptar",callback:function(){if(n.validate()){var e=n.getRecord();o.save(e,function(){o.applyFilters(),nw.back()})}}}],n.show();var t={"":"Seleccione",Ahorros:"Ahorros",Corriente:"Corriente"};n.ui.tipo_cuenta.populateSelectFromArray(t),e?n.setRecord(e):(nw.evalueData(i.nit)?n.ui.documento.setValue(i.nit):n.ui.documento.enabled(!0),nw.evalueData(i.nombre)?n.ui.nombre.setValue(i.nombre+" "+i.apellido):n.ui.nombre.enabled(!0))},o.applyFilters=function(){o.clean(),nw.loading({text:"Cargando...",textVisible:!0,html:"",theme:"b",container:o.canvas});var e={};e.usuario=i.usuario,e.id_usuario=i.id_usuario,e.empresa=i.empresa;var n=new nw.rpc(o.getRpcUrl(),"nwMaker");n.setAsync(!0),n.setLoading(!1);n.exec("consultaDatosCuenta",e,function(e){nw.loadingRemove({container:o.canvas}),e&&(e[0].documento=i.nit,e[0].nombre=i.nombre+" "+i.apellido,o.setModelData(e))})},o.applyFilters(),o.eliminar=function(e){nw.createPopUp("¿Esta seguro de eliminar esta cuenta?",function(){var e={numero_cuenta:null,banco:null,tipo_cuenta:null,eliminar:!0};o.save(e,function(){o.applyFilters()})},function(e){})},o.save=function(n,a){var e=n;e.usuario=i.usuario,e.empresa=i.empresa,e.usuario_text=i.nombre,e.id_usuario=i.id_usuario;var t=new nw.rpc(nw.getRpcUrl(),"nwMaker");t.setAsync(!0);t.exec("saveDatosCuenta",e,function(e){!0===e&&(n.eliminar?nw.dialog("Cuenta eliminada correctamente."):nw.dialog("Cuenta guardada correctamente."),a())})}},retiroFondos:function(){var t=new nw.forms,o=nw.userPolicies.getUserData();t.id="f_retiros_fondos",t.setTitle="Retiros",t.createBase();t.setFields([{name:"documento",label:"Documento",type:"textField",enabled:!1},{name:"nombre",label:"Nombre",type:"textField",enabled:!1},{name:"saldo",label:"saldo",placeholder:"Mi saldo",type:"numeric",enabled:!1},{name:"valor_minimo_retiro",label:"Valor mínimo a retirar",placeholder:"Valor mínimo a retirar",type:"numeric",enabled:!1},{name:"valor",label:"Valor",placeholder:"Ingrese el valor",type:"numeric",required:!0},{name:"observaciones",label:"Observaciones",type:"textField",required:!1}]),t.buttons=[{style:"border: 0;background-color:#1abbd7;color:#fff;margin:0px;",icon:"material-icons check_circle normal",colorBtnBackIOS:"#fff",position:"bottom",name:"aceptar",label:"Aceptar",callback:function(){var e=t.getRecord();t.save(e)}}],t.show(),t.ui.documento.setValue(o.nit),t.ui.nombre.setValue(o.nombre+" "+o.apellido),t.ui.saldo.setValue(nw.saldoVal);var e=1;nw.evalueData(config.valor_minimo_retiro)&&(e=config.valor_minimo_retiro),t.ui.valor_minimo_retiro.setValue(e),t.save=function(e){if(!t.validate())return!1;var n=e;if(n.perfil=o.perfil,n.usuario=o.usuario,n.empresa=o.empresa,parseFloat(n.valor)>parseFloat(n.saldo))nw.dialog("El valor no puede ser mayor al saldo.");else{if(parseFloat(n.valor)<0)return nw.dialog("No puede retirar valores negativos"),!1;if(parseFloat(n.valor)<parseFloat(n.valor_minimo_retiro))return nw.dialog("El valor mínimo a retirar es de $"+nw.addNumber(n.valor_minimo_retiro)),!1;var a=new nw.rpc(nw.getRpcUrl(),"nwMaker");a.setAsync(!0);a.exec("saveRetirosFondos",n,function(e){!0===e&&nw.dialog("Solicitud guardada correctamente.",function(){nw.back()})})}}},pagosEmpresa:function(){var n=new nw.forms,t=nw.userPolicies.getUserData();n.id="f_pagos_empresa",n.setTitle="Pagos",n.createBase();n.setFields([{name:"id",label:"Id",type:"textField",visible:!1},{name:"documento",label:"Documento",type:"textField",visible:!1},{name:"nombre",label:"Nombre",type:"textField",visible:!1},{name:"comprobante_pago",label:"Comprobante de pago",type:"button",mode:"camera_files",required:!0},{name:"saldo",label:"saldo",placeholder:"Mi saldo",type:"numeric",enabled:!1,visible:!0},{name:"valor",label:"Valor",placeholder:"Ingrese el Valor",type:"numeric",required:!0},{name:"fecha_pago",label:"Fecha de pago",type:"dateField",required:!0},{name:"observaciones",label:"Observaciones",type:"textArea"}]),n.buttons=[{style:"border: 0;background-color:#1abbd7;color:#fff;margin:0px;",icon:"material-icons check_circle normal",colorBtnBackIOS:"#fff",position:"bottom",name:"aceptar",label:"Aceptar",callback:function(){if(n.validate()){var e=n.getRecord();n.save(e)}}}],n.show(),n.ui.documento.setValue(t.nit),n.ui.nombre.setValue(t.nombre+" "+t.apellido),n.ui.saldo.setValue(nw.saldoVal),n.save=function(e){var n=e;if(n.perfil=t.perfil,n.usuario=t.usuario,n.empresa=t.empresa,n.usuario_text=t.nombre,n.id_usuario=t.id_usuario,0<=parseFloat(n.saldo))nw.dialog("No tienes saldo a pagar");else{if(parseFloat(n.valor)<0)return nw.dialog("No puedes pagar valores negativos"),!1;var a=new nw.rpc(nw.getRpcUrl(),"nwMaker");a.setAsync(!0);a.exec("savePagosEmpresas",n,function(e){!0===e&&nw.dialog("Pago registrado correctamente.",function(){nw.back()})})}}},recargasHistorico:function(){var a=new nw.lists,t=nw.userPolicies.getUserData();a.createBase=new nw.newPage,a.createBase.showContextMenu=!1,a.createBase.id="l_historico_recargas",a.createBase.html="",a.createBase.showBack=!0,a.createBase.closeBack=!1,a.createBase.logotipo_text="<span style='color:#ffff;'>Histórico recargas<span>",a.createBase.createAndShow(),a.showContextMenu=!1,a.id_form="l_historico_recargas",a.canvas="#l_historico_recargas";a.setColumns([{name:"valor_recarga",label:"Valor"},{name:"total_recarga",label:"Total recarga"},{name:"tiempo",label:"Minutos total recargados"},{name:"saldo_anterior",label:"Saldo anterior"},{name:"saldo_actual",label:"Saldo actual"},{name:"saldoAnteriorTime",label:"saldo Anterior Time"},{name:"saldoActualTime",label:"saldo Actual Time"},{name:"fecha_vencimiento_anterior",label:"Fecha vencimiento anterior"},{name:"fecha_vencimiento_actual",label:"Fecha vencimiento actual"},{name:"fecha",label:"Fecha"},{name:"estado",label:"Estado"},{name:"descripcion",label:"Descripción"}]),a.show(),a.applyFilters=function(){a.clean();var e={};e.perfil=t.perfil,e.usuario=t.usuario,e.id_usuario=t.id_usuario,e.empresa=t.empresa;var n=new nw.rpc(a.getRpcUrl(),"servicios");n.setAsync(!0),n.setLoading(!0);n.exec("consultaHistoricoRecargas",e,function(e){a.setModelData(e)})},a.applyFilters()},pagosHistorico:function(){var a=new nw.lists,t=nw.userPolicies.getUserData();a.createBase=new nw.newPage,a.createBase.showContextMenu=!1,a.createBase.id="l_historico_pagos_conte",a.createBase.html="",a.createBase.showBack=!0,a.createBase.closeBack=!1,a.createBase.logotipo_text="<span style='color:#ffff;'>Histórico pagos<span>",a.createBase.createAndShow(),a.showContextMenu=!1,a.id_form="l_historico_pagos";a.canvas="#l_historico_pagos_conte";a.setColumns([{name:"id",label:"Id",visible:!1},{name:"comprobante_pago",label:"Comprobante de pago",visible:!1},{name:"valor",label:"Valor"},{name:"fecha_pago",label:"Fecha de pago"},{name:"estado",label:"Estado"},{name:"observaciones",label:"Observaciones"}]),a.show(),a.applyFilters=function(){a.clean(),nw.loading({text:"Cargando...",textVisible:!0,html:"",theme:"b",container:a.canvas});var e={};e.perfil=t.perfil,e.usuario=t.usuario,e.id_usuario=t.id_usuario,e.empresa=t.empresa;var n=new nw.rpc(a.getRpcUrl(),"nwMaker");n.setAsync(!0),n.setLoading(!1);n.exec("consultaHistoricoPagos",e,function(e){nw.loadingRemove({container:a.canvas}),e&&a.setModelData(e)})},a.applyFilters()},historicoRetiros:function(){var a=new nw.lists,t=nw.userPolicies.getUserData();a.createBase=new nw.newPage,a.createBase.showContextMenu=!1,a.createBase.id="l_historico_retiros_conte",a.createBase.html="",a.createBase.showBack=!0,a.createBase.closeBack=!1,a.createBase.logotipo_text="<span style='color:#ffff;'>"+nw.utils.tr("Histórico retiros")+"<span>",a.createBase.createAndShow(),a.showContextMenu=!1,a.id_form="l_historico_retiros";a.canvas="#l_historico_retiros_conte";a.setColumns([{name:"id",label:"Id",visible:!1},{name:"nombre",label:"Nombre"},{name:"documento",label:"Documento"},{name:"valor",label:"Valor"},{name:"fecha",label:"Fecha Solicitud"},{name:"estado",label:"Estado"},{name:"observaciones",label:"Observaciones"}]),a.show(),a.applyFilters=function(){a.clean(),nw.loading({text:"Cargando...",textVisible:!0,html:"",theme:"b",container:a.canvas});var e={};e.perfil=t.perfil,e.usuario=t.usuario,e.id_usuario=t.id_usuario,e.empresa=t.empresa;var n=new nw.rpc(a.getRpcUrl(),"nwMaker");n.setAsync(!0),n.setLoading(!1);n.exec("consultaHistoricoRetiros",e,function(e){nw.loadingRemove({container:a.canvas}),e&&a.setModelData(e)})},a.applyFilters()}}}),nw.Class.define("nw.audio",{extend:nw.object,construct:function(){},destruct:function(){},members:{status:null},statics:{recordAudio:function(t,a){if("undefined"==typeof Media)return nw.dialog2("No tiene instalado el plugin-media."),!1;if("iOS"==device.platform)var e=cordova.file.tempDirectory,n=".wav",o="myRecording";else if("Android"==device.platform)e=cordova.file.cacheDirectory,n=".wav",o="myRecording";void 0!==t&&nw.evalueData(t)||(t={});var i=!0,r="Detener",l="Grabando...";void 0!==t.showDialogReproductor&&(i=t.showDialogReproductor),void 0!==t.textAccept&&(r=t.textAccept),void 0!==t.body&&(l=t.body);var s=null,c="myRecording.wav",u=o+n;function d(e){console.log("getFileWin:::START"),console.log("getFileWin:::fileEntry ",e),console.log("getFileWin:::File created at "+e.fullPath),fileURL=e.fullPath,fileURL=e.toURL(),console.log("getFileWin:::fileURL",fileURL);var n=fileURL;console.log("getFileWin:::fileName:",n),(s=new Media(n,g,m,f)).startRecord(),console.log("getFileWin:::recordAudio(), recording to "+c);var a={};a.textAccept=r,a.destroyAutomaticOnAccept=!0,!(a.useDialogNative=!1)!==t.useButtonCancel&&(w=!1),setTimeout(function(){nw.dialog(l,v,w,a)},500)}function p(e){console.log("Failed to retrieve file",e)}function g(e){console.log("recordAudio():Audio Success",e),console.log("recordAudio():Audio Success",Media.MEDIA_MSG[f]),nw.uploaderFileSrv.uploadFileCamera("prueba","none",!0,fileURL,!1,!1,!1,!1,function(e){if(s.stop(),s.release(),!0===i){var n={textAccept:"Reproducir",textCancel:"Detener",useDialogNative:!1,destroyAutomaticOnAccept:!1,destroyAutomaticOnClose:!1};nw.dialog2("¡Audio generado correctamente! "+c,function(){new Media(c,function(e){console.log("playAudio():Audio Success")},function(e){console.log("playAudio():Audio Error: ",e)}).play()},function(){var e;(e=new Media(c,function(e){console.log("pauseAudio():Audio Success")},function(e){console.log("pauseAudio():Audio Error: ",e)})).play(),e.pause()},n)}a(e)})}function m(e){var n,a;console.log(e),console.log("recordAudio():Audio Error: "+(n=e.code,(a=[]).push("Media.MEDIA_ERR_ABORTED"),a.push("Media.MEDIA_ERR_NETWORK"),a.push("Media.MEDIA_ERR_DECODE"),a.push("Media.MEDIA_ERR_NONE_SUPPORTED"),a[n-1])),console.log("recordAudio():Audio Error Status",f)}function f(e){var n,a;console.log(e),console.log("recordAudio():Audio Status: "+(n=e,(a=[]).push("Media.MEDIA_NONE"),a.push("Media.MEDIA_STARTING"),a.push("Media.MEDIA_RUNNING"),a.push("Media.MEDIA_PAUSED"),a.push("Media.MEDIA_STOPPED"),a[n])),console.log("recordAudio():Audio Success",Media.MEDIA_MSG[e])}function w(){return s.stop(),console.log("recordAudio(): cancel"),!0}function v(){return console.log("recordAudio(): accept()",s),s.stopRecord(),s.release(),!0}window.resolveLocalFileSystemURL(e,function(e){console.log("LOCALIZA:",e),e.getFile(u,{create:!0,exclusive:!1},d,p)},function(e){console.log("getFSFail",e),console.log(e.target.error),console.log(e.target.error.code)})}}}),nw.Class.define("nw.bluetooth",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{devicePrinter:function(){var e=nw.bluetooth.dataPrinter;bluetoothSerial.write(e,function e(){console.log(e)},function e(){connectPrint=!1;console.log(e)})},deviceConnect:function(e){nw.bluetooth.dataPrinter=e,bluetoothSerial.isConnected(function(){nw.devicePrinter(),console.log("Bluetooth is connected")},function(){nw.bluetoothSerialList(),console.log("Bluetooth is *not* connected")})},bluetoothSerialList:function(){bluetoothSerial.isEnabled(function(){console.log("Bluetooth is enabled"),bluetoothSerial.list(function(e){var n=document.createElement("div");n.className="popup_print",n.innerHTML="<div class='popup_print_int'><div class='closeEncPil'></div><div class='popup_print_text'></div><div class='popup_print_btns'></div></div>",document.body.appendChild(n);var a="";e.forEach(function(e){console.log(e),a+='<div class="print_id">'+e.name+"<br>"+e.id+"</div>"}),bluetoothSerial.discoverUnpaired(function(e){e.forEach(function(e){console.log(e.id)})}),document.querySelector(".popup_print_text").innerHTML=a,nw.buttons.nclick($(".print_id"),function(e){var n=e.toElement.innerHTML;nw.conectDevice(n)})})},function(){var e={};e.textCancel="Cancelar",e.textAccept="Activar",nw.dialog("Bluetooth inhabilitado.",function(){bluetoothSerial.enable(function(){console.log("Bluetooth is enabled"),nw.bluetoothSerialList()},function(){console.log("The user did *not* enable Bluetooth")})},function(){},e),console.log("Bluetooth is *not* enabled")})},conectDevice:function(e){var n=e.split("<br>"),a=n[1];bluetoothSerial.connect(a,function(){connectPrint=!0,$(".popup_print").remove(),nw.dialog("Dispositivo conectado "+n[0],function(){nw.devicePrinter()},function(){nw.bluetoothSerialList()})},function e(){console.log(e)})}}}),nw.Class.define("nw.bd_offline",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{create_or_read_database:function(a,e,t,o,n){if(!("indexedDB"in window))return console.log("This browser doesn't support IndexedDB"),void nw.dialog("This browser doesn't support IndexedDB");var i=indexedDB.open(a,e);i.onerror=function(e){n(e,e.target.errorCode)},i.onsuccess=function(e){console.log("nw.bd_offline:::onsuccess:::event",e);var n=e.target.result;n.onversionchange=function(){n.close(),nw.dialog("Database is outdated, please reload the page.")},o({db:n,event:e})},i.onupgradeneeded=function(e){console.log("nw.bd_offline:::onupgradeneeded::event",e);var n=e.target.result;console.log("nw.bd_offline:::event.oldVersion",e.oldVersion),0===e.oldVersion?(console.log("nw.bd_offline:::no existe la base de datos, database "+a+" create ok!!"),t({exist:!1,db:n,event:e,oldVersion:e.oldVersion})):(console.log("nw.bd_offline:::database "+a+", existe pero cambió de versión"),t({exist:!0,db:n,event:e,oldVersion:e.oldVersion}))}},createTable:function(e){for(var n=e.db,a=e.name,t=n.createObjectStore(a,{keyPath:e.key}),o=0;o<e.fields.length;o++){var i=e.fields[o];t.createIndex(i.name,i.name,{unique:i.unique})}console.log("nw.bd_offline:::table "+a+" create ok!!")},select:function(e){var n=e.db;console.log("nw.bd_offline:::array",e),console.log("nw.bd_offline:::db",n);var a=e.table,t=e.where,o=n.transaction(a,"readwrite").objectStore(a),i=null;(i=nw.evalueData(t)?o.getAll(t):o.getAll()).onsuccess=function(){void 0!==i.result?e.callback(i.result):e.callback(0)}},insert:function(e){var n=e.db,a=e.table,t=n.transaction(a,"readwrite").objectStore(a),o=e.fields,i=t.add(o);i.onsuccess=function(){e.callback(i.result)},i.onerror=function(){e.callback(i.error)}},update:function(e){var n=e.db,a=e.table,t=e.callback,o=e.fieldToCompare,i=e.fieldToUpdate,r=e.fieldToUpdateValue;n.transaction([a],"readwrite").objectStore(a).openCursor().onsuccess=function(e){var n=e.target.result;if(n){if(n.value.id===o){var a=n.value;a[i]=r,n.update(a).onsuccess=function(){console.log("Update OK field "+i+" value "+r+" in "+o),t(!0)}}n.continue()}else console.log("nw.bd_offline:::Entries displayed."),t(!1)}},deleteTable:function(e){var n=e.db,a=e.table;n.deleteObjectStore(a)},deleteRecord:function(e){var n=e.db,a=e.table,t=e.callback,o=e.id;n.transaction(a,"readwrite").objectStore(a).delete(o),t(!0)}}}),nw.Class.define("nw.calendar",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{construct:function(e){nw.requireCss("nwmaker/css/calendar.css");var n=nw.utilsDate.getActualDate(),a=e.container,o=!1;nw.evalueData(e.callbackload)&&(o=e.callbackload);var i=[];nw.evalueData(e.events)&&(i=e.events);var r=n;nw.evalueData(e.initialDate)&&(r=e.initialDate);var l="prevYear,prev,next,nextYear today";nw.evalueData(e.headerToolbar_left)&&(l=e.headerToolbar_left);var s="title";nw.evalueData(e.headerToolbar_center)&&(s=e.headerToolbar_center);var c=!0;nw.evalueData(e.navLinks)&&(c=e.navLinks);var u=!0;nw.evalueData(e.editable)&&(u=e.editable);var d=!0;nw.evalueData(e.selectable)&&(d=e.selectable);var p="auto";nw.evalueData(e.height)&&(p=e.height);var g=!0;nw.evalueData(e.expandRows)&&(g=e.expandRows);var m="08:00";nw.evalueData(e.slotMinTime)&&(m=e.slotMinTime);var f="20:00";nw.evalueData(e.slotMaxTime)&&(f=e.slotMaxTime);var w="dayGridMonth,timeGridWeek,timeGridDay,listMonth,listYear";nw.evalueData(e.headerToolbar_right)&&(w=e.headerToolbar_right);var v="dayGridMonth";nw.evalueData(e.initialView)&&(v=e.initialView);var h=!0;nw.evalueData(e.nowIndicator)&&(h=e.nowIndicator);var b=!1;nw.evalueData(e.dayMaxEvents)&&(b=e.dayMaxEvents);var _="Mes";nw.evalueData(e.dayGridMonth)&&(_=e.dayGridMonth);var y="Semana";nw.evalueData(e.timeGridWeek)&&(y=e.timeGridWeek);var k="Día";nw.evalueData(e.timeGridDay)&&(k=e.timeGridDay);var C="Agenda Año";nw.evalueData(e.listYear)&&(C=e.listYear);var D="Agenda Mes";nw.evalueData(e.listMonth)&&(D=e.listMonth);var S=!1;nw.evalueData(e.selectCallBack)&&(S=e.selectCallBack);var x=!1;nw.evalueData(e.eventClick)&&(x=e.eventClick);var N=!0;nw.evalueData(e.weekNumbers)&&(N=e.weekNumbers);var E="ISO";nw.evalueData(e.weekNumberCalculation)&&(E=e.weekNumberCalculation);var I="es";nw.evalueData(e.initialLocaleCode)&&(I=e.initialLocaleCode);var A=!0;nw.evalueData(e.businessHours)&&(A=e.businessHours);var T=[1,2,3,4,5];nw.evalueData(e.businessHoursDaysWeek)&&(T=e.businessHoursDaysWeek);var R="07:00";nw.evalueData(e.businessHoursDaysWeekStartTime)&&(R=e.businessHoursDaysWeekStartTime);var P="18:00";nw.evalueData(e.businessHoursDaysWeekEndTime)&&(P=e.businessHoursDaysWeekEndTime);var B=[6];nw.evalueData(e.businessHoursWeekEnd)&&(B=e.businessHoursWeekEnd);var F="08:00";nw.evalueData(e.businessHoursWeekEndStartTime)&&(F=e.businessHoursWeekEndStartTime);var M="13:00";nw.evalueData(e.businessHoursDaysWeekEndTime)&&(M=e.businessHoursWeekEndEndTime);var L=!0;nw.evalueData(e.weekends)&&(L=e.weekends);var O=[];nw.evalueData(e.hiddenDays)&&(O=e.hiddenDays);var $="00:30:00";nw.evalueData(e.slotDuration)&&($=e.slotDuration);var U=!0;nw.evalueData(e.showNonCurrentDates)&&(U=e.showNonCurrentDates);var z=!0;nw.evalueData(e.fixedWeekCount)&&(z=e.fixedWeekCount);var q="09:00:00";nw.evalueData(e.nextDayThreshold)&&(q=e.nextDayThreshold),nw.loading({text:"",textVisible:!0,html:"",theme:"b"}),nw.require("nwmaker/calendar.min.js",function(){setTimeout(function(){var t=new FullCalendar.Calendar(a,{nextDayThreshold:q,fixedWeekCount:z,showNonCurrentDates:U,slotDuration:$,hiddenDays:O,weekends:L,locale:I,height:p,expandRows:g,slotMinTime:m,slotMaxTime:f,initialView:v,nowIndicator:h,dayMaxEvents:b,customButtons:{},views:{listMonth:{buttonText:D},listYear:{buttonText:C},timeGridWeek:{buttonText:y},timeGridDay:{buttonText:k},dayGridMonth:{buttonText:_}},headerToolbar:{left:l,center:s,right:w},initialDate:r,navLinks:c,businessHours:A,businessHours:[{daysOfWeek:T,startTime:R,endTime:P},{daysOfWeek:B,startTime:F,endTime:M}],editable:u,selectable:d,selectMirror:!0,weekNumbers:N,weekNumberCalculation:E,eventClick:function(e){if(e.jsEvent.preventDefault(),nw.evalueData(x))return x(e),!0;confirm("¿Está seguro de que desea eliminar este evento?")&&e.event.remove()},select:function(e,n){if(nw.evalueData(S))return S(e,n),!0;var a=prompt("Título:");a&&t.addEvent({title:a,start:e.start,end:e.end,allDay:e.allDay}),t.unselect()},events:i});return t.render(),nw.loadingRemove(),nw.evalueData(o)&&o(t),t},300)},!0)}}}),nw.Class.define("nw.contextmenu",{extend:nw.object,construct:function(i,r,e){var l=this;l.native=!1,l.entries=[],void 0!==window.plugins&&void 0!==window.plugins.actionsheet&&(l.native=!0),0==e&&(l.native=!1),!1===i.contextmenu_native&&(l.native=!1);var n=i.activeRow,s=i.canvas;if(nw.contextmenuClear(i),!l.native){var a="";if("vertical"===r&&(a+=" contain_menu_li_touch_vertical"),!0===i.columnsInTable&&(a+=" contain_menu_li_touch_horizontal"),"bottom"===r)a+=" menu_btm_hidden contain_menu_li_touch_bottom",$(s).append("<div class='contain_menu_li_touch "+a+"'></div>");else if(0<$(n).find(".menuListInTabled").length){var t=$(n).find(".menuListInTabled").offset();$(s).append("<div style='top: "+t.top+"px; left: "+t.left+"px;' class='contain_menu_li_touch "+a+"'></div>")}else $(n).append("<div class='contain_menu_li_touch "+a+"'></div>")}l.opts=[],l.addAction=function(e,n,a){i.activeRow;if(l.opts.push({name:e,icon:n,callback:a}),!l.native){var t={className:"menu_li_touch"};t.text=nw.utils.tr(e),t.type="a",t.position="center",t.callback=function(){nw.contextmenuClear(i,r),a()},t.icon=n,t.colorBtnBackIOS=config.colorBtnBackIOS;var o=nw.createButton(t);$(s).find(".contain_menu_li_touch").prepend(o)}},l.valida=function(){if(l.native){var o=function(a){setTimeout(function(){var e=l.opts[parseInt(a)-1];if(void 0===e)return!1;var n=e.callback;nw.contextmenuClear(i,r),n()})};!function(){for(var e=[],n=0;n<l.opts.length;n++){var a=l.opts[n];e[n]=nw.utils.tr(a.name)}var t={androidTheme:window.plugins.actionsheet.ANDROID_THEMES.THEME_DEVICE_DEFAULT_LIGHT,title:"",subtitle:"",buttonLabels:e,androidEnableCancelButton:!0,winphoneEnableCancelButton:!0,addCancelButtonWithLabel:"Cancel",addDestructiveButtonWithLabel:"",position:[20,40],destructiveButtonLast:!0};window.plugins.actionsheet.show(t,o)}()}},setTimeout(function(){l.valida()},50),l.exec=function(){};var o=nw.getMobileOperatingSystem();if("bottom"===r&&!l.native){var c={className:"menu_li_touch menu_li_touch_cancel"};c.text=nw.utils.tr("Cancelar"),c.type="a",c.position="center",c.callback=function(){nw.contextmenuClear(i,r)},"ANDROID"===o&&(c.icon="material-icons arrow_back_ios normal"),c.colorBtnBackIOS=config.colorBtnBackIOS;var u=nw.createButton(c);$(s).find(".contain_menu_li_touch").append(u);var d=document.createElement("div");d.className="btnExec bglimen",d.callback=function(){nw.contextmenuClear(i,r)},$(s).find(".contain_menu_li_touch").after(d),setTimeout(function(){$(s).find(".contain_menu_li_touch").removeClass("menu_btm_hidden")},100)}},destruct:function(){},members:{},statics:{}}),nw.Class.define("nw.fb",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{loadSDKFB:function(e){var n,a,t,o;nw.console.log(e),n=document,a="facebook-jssdk",o=n.getElementsByTagName("script")[0],n.getElementById(a)||((t=n.createElement("script")).id=a,t.src="https://connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(t,o)),window.fbAsyncInit=function(){FB.init({appId:e,cookie:!0,xfbml:!0,version:"v6.0"})}},statusChangeCallback:function(e){console.log("statusChangeCallback"),nw.console.log("statusChangeCallback"),console.log(e),nw.console.log(e),"connected"===e.status&&nw.connectFB()},checkLoginState:function(){console.log("checkLoginState"),nw.console.log("checkLoginState"),FB.getLoginStatus(function(e){console.log(e),nw.statusChangeCallback(e)})},connectFB:function(){console.log("connectFB"),FB.api("/me?fields=name,email,gender,age_range,picture,location{location{country, country_code, city, city_id, latitude, longitude, region, region_id, state, street, name}}",{fields:"name,last_name,first_name,email,picture,birthday"},function(e){FB.login(function(e){console.log("RESPONDE",e)},{scope:"email,public_profile"}),console.log("Successful login for: "+e.name,e),nw.saveOrLoginFBConnect(e)})},fb_logout:function(){if("undefined"!=typeof facebookConnectPlugin){facebookConnectPlugin.logout(function(e){nw.console.log("[facebookConnectPlugin.logout OK] response: "+JSON.stringify(e))},function(e){nw.console.log("[facebookConnectPlugin.logout ERROR] response: "+JSON.stringify(e))})}},fb_login:function(){function a(e){console.log(e),nw.console.log(e),nw.console.log(JSON.stringify(e))}console.log("fb_login"),facebookConnectPlugin.login(["public_profile","email"],function(e){var n;console.log(e),n=e,console.log(n),facebookConnectPlugin.api("/me?fields=email,name,picture",["public_profile","email"],function(e){console.log(JSON.stringify(e)),console.log(e),nw.saveOrLoginFBConnect(e)},function(e){a(e)})},function(e){a(e)})},saveOrLoginFBConnect:function(a){console.log("saveOrLoginFBConnect response",a);var t=config.config_crear_cuenta,o=!1;if((!0===t.pedir_pais||!0===t.pedir_departamento_geo||!0===t.pedir_ciudad||!0===t.pedir_documento||!0===t.pedir_celular||!0===t.pedir_direccion||!0===t.pedir_fecha_nacimiento||!1===t.pedir_politicas_in_session_create&&!0===t.pedir_politicas)&&(o=!0),!nw.evalueData(a.email))return nw.dialog("No existe el correo de red social del usuario"),!1;var i="";nw.evalueData(a.picture)?i=a.picture:nw.evalueData(a.picture.data)&&nw.evalueData(a.picture.data.url)&&(i=a.picture.data.url);var e=a;e.page=t.page,e.email=a.email,e.usuario=a.email,e.id=a.id,e.nombre=a.name,e.foto_perfil=i,e.showcreate=o,nw.evalueData(t.perfil)&&(e.perfil=t.perfil),nw.evalueData(t.pedir_empresa)&&(e.empresa=t.pedir_empresa),console.log(e);var n=new nw.rpc(nw.getRpcUrl(),"nwMaker");n.setAsync(!0),n.setLoading(!0);n.exec("validaUserFBCreate",e,function(e){if(console.log("connectFB",e),"noexisteuser"===e&&o){var n={};return n.page=t.page,n.usuario=a.email,n.nombre=a.first_name,n.foto_perfil=i,!1===t.pedir_apellido&&(n.nombre=a.name),!1!==t.pedir_empresa&&(n.pedir_empresa=t.pedir_empresa),0!=t.perfil&&(n.perfil_send=t.perfil),n.email=a.email,n.apellido=a.last_name,n.fecha_nacimiento=a.birthday,n.foto_perfil=i,n.clave_registro=a.id+"-nwp5",console.log("generate by facebook",n),nw.createAccount.execCreateAccount(n),!1}nw.responseLogin(e)})}}}),nw.Class.define("nw.permissions",{extend:nw.object,construct:function(){},destruct:function(){},members:{status:null},statics:{get:function(a,n,t,o){if(void 0===cordova.plugins)return t("no_plugin","No existe plugin"),!1;if(void 0===cordova.plugins.permissions)return t("no_plugin","No existe plugin"),!1;var i=cordova.plugins.permissions,r=i[a];i.checkPermission(r,function(e){console.warn("status::: "+a,e),e.hasPermission?(console.warn("Yes :D "+a),window.localStorage.setItem("userPermissionsSet_"+a,"allow"),t("allow",a+" HAVE PERMISSION OK")):(console.warn("No :( "+a),n="<div class='textDescriptionPermissionsDialog'>"+n+'</div><div class="content_ini"></div>',nw.dialog(n,function(){function n(){console.warn("error:::"+a+" permission is not turned on"),window.localStorage.setItem("userPermissionsSet_"+a,"rejected"),t("rejected",a+" USER REJECTED PERMISSION")}i.requestPermission(r,function(e){console.warn("success:::status.hasPermission",e.hasPermission),e.hasPermission?(console.warn(a+" permission success!!!!",e),window.localStorage.setItem("userPermissionsSet_"+a,"allow"),t("allow",a+" USER ACCEPTED THE PERMISSION")):(console.warn(a+" permission ERROR!!!!",e),nw.utils.evalueData(window.localStorage.getItem("userPermissionsSet_"+a))&&"rejected"==window.localStorage.getItem("userPermissionsSet_"+a)&&nw.utils.evalueData(o)&&o(),n())},n)},function(){return window.localStorage.setItem("userPermissionsSet_"+a,"skip"),t("skip",a+" SKIP"),!0},{original:!0,textAccept:"Continuar",textCancel:"Omitir",addClass:"nwPermissionsDialog"}))})}}}),nw.Class.define("nw.google",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{clickInButton:!1,login:function(){var e=!0;return void 0===window.plugins?e=!1:void 0===window.plugins.googleplus&&(e=!1),console.log("native",e),e?nw.google.loginNative():nw.google.loginWeb()},loginValidate:function(){void 0!==window.plugins&&void 0!==window.plugins.googleplus||nw.require("https://apis.google.com/js/platform.js",function(){function e(e){var n=e.getBasicProfile();if(console.log("googleUser",e),console.log("googleUser.getBasicProfile()",e.getBasicProfile()),console.log("Logged in as: "+n.getName()),console.log("Logged in as: "+n.getEmail()),console.log("Logged in as: "+n.getImageUrl()),console.log("Logged in as: "+n.getId()),console.log("nw.google.clickInButton",nw.google.clickInButton),nw.google.clickInButton){var a={};return a.id=n.getId(),a.email=n.getEmail(),a.name=n.getName(),a.picture=n.getImageUrl(),a.birthday=null,nw.fb.saveOrLoginFBConnect(a)}}function n(e){console.log(e)}console.log("Load google auth"),nw.google.clickInButton=!1,gapi.load("auth2",function(){gapi.auth2.init({client_id:config.google_client_id+".apps.googleusercontent.com"}),gapi.signin2.render("my-signin2",{scope:"profile email",width:240,height:50,longtitle:!0,theme:"dark",onsuccess:e,onfailure:n})})})},loginWeb:function(){nw.google.clickInButton=!0},loginNative:function(){window.plugins.googleplus.login({},function(e){console.log("user",e);var n="";nw.evalueData(e.imageUrl)&&(n=e.imageUrl);var a={};return a.id=e.userId,a.email=e.email,a.name=e.displayName,a.picture=n,a.birthday=null,nw.fb.saveOrLoginFBConnect(a)},function(e){console.log("error",e),nw.console.log("error",e)})},logo:function(){return'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="18px" height="18px" viewBox="0 0 48 48" class="abcRioButtonSvg"><g><path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"></path><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"></path><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"></path><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"></path><path fill="none" d="M0 0h48v48H0z"></path></g></svg>'}}}),nw.Class.define("nw.mainPolicies",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{getUseRpcQxnw:function(){return"undefined"!=typeof config&&void 0!==config.getUseRpcQxnw&&config.getUseRpcQxnw},getShowRpcLog:function(){return void 0!==app&&1==app.debug}}}),nw.Class.define("nw.md5",{extend:nw.object,construct:function(){this._ASCII="01234567890123456789012345678901 !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},destruct:function(){},members:{},statics:{MD5:function(e){if(void 0===e||null==e||""==e)return null;var n,a,t,o,r,l;for(state=new this._array(4),count=new this._array(2),count[0]=0,count[1]=0,buffer=new this._array(64),transformBuffer=new this._array(16),digestBits=new this._array(16),S11=7,S12=12,S13=17,S14=22,S21=5,S22=9,S23=14,S24=20,S31=4,S32=11,S33=16,S34=23,S41=6,S42=10,S43=15,S44=21,this._init(),a=0;a<e.length;a++)n=e.charAt(a),this._update(this._ASCII.lastIndexOf(n));for(this._finish(),t=o=r=l=0,i=0;i<4;i++)t+=this._shl(digestBits[15-i],8*i);for(i=4;i<8;i++)o+=this._shl(digestBits[15-i],8*(i-4));for(i=8;i<12;i++)r+=this._shl(digestBits[15-i],8*(i-8));for(i=12;i<16;i++)l+=this._shl(digestBits[15-i],8*(i-12));return this._hexa(l)+this._hexa(r)+this._hexa(o)+this._hexa(t)},_array:function(e){for(i=0;i<e;i++)this[i]=0;this._length=e},_integer:function(e){return e%4294967296},_shr:function(e,n){return e=this._integer(e),n=this._integer(n),0<=e-2147483648?(e%=2147483648,e>>=n,e+=1073741824>>n-1):e>>=n,e},_shl1:function(e){return!0&(e%=2147483648)?(e-=1073741824,e*=2,e+=2147483648):e*=2,e},_shl:function(e,n){e=this._integer(e),n=this._integer(n);for(var a=0;a<n;a++)e=this._shl1(e);return e},_and:function(e,n){var a=(e=this._integer(e))-2147483648,t=(n=this._integer(n))-2147483648;return 0<=a?0<=t?2147483648+(a&t):a&n:0<=t?e&t:e&n},_or:function(e,n){var a=(e=this._integer(e))-2147483648,t=(n=this._integer(n))-2147483648;return 0<=a?0<=t?2147483648+(a|t):2147483648+(a|n):0<=t?2147483648+(e|t):e|n},_xor:function(e,n){var a=(e=this._integer(e))-2147483648,t=(n=this._integer(n))-2147483648;return 0<=a?0<=t?a^t:2147483648+(a^n):0<=t?2147483648+(e^t):e^n},_not:function(e){return 4294967295-(e=this._integer(e))},_F:function(e,n,a){return this._or(this._and(e,n),this._and(this._not(e),a))},_G:function(e,n,a){return this._or(this._and(e,a),this._and(n,this._not(a)))},_H:function(e,n,a){return this._xor(this._xor(e,n),a)},_I:function(e,n,a){return this._xor(n,this._or(e,this._not(a)))},_rotateLeft:function(e,n){return this._or(this._shl(e,n),this._shr(e,32-n))},_FF:function(e,n,a,t,o,i,r){return e=e+this._F(n,a,t)+o+r,e=this._rotateLeft(e,i),e+=n},_GG:function(e,n,a,t,o,i,r){return e=e+this._G(n,a,t)+o+r,e=this._rotateLeft(e,i),e+=n},_HH:function(e,n,a,t,o,i,r){return e=e+this._H(n,a,t)+o+r,e=this._rotateLeft(e,i),e+=n},_II:function(e,n,a,t,o,i,r){return e=e+this._I(n,a,t)+o+r,e=this._rotateLeft(e,i),e+=n},_transform:function(e,n){var a=0,t=0,o=0,r=0,l=transformBuffer;for(a=state[0],t=state[1],o=state[2],r=state[3],i=0;i<16;i++)for(l[i]=this._and(e[4*i+n],255),j=1;j<4;j++)l[i]+=this._shl(this._and(e[4*i+j+n],255),8*j);a=this._FF(a,t,o,r,l[0],S11,3614090360),r=this._FF(r,a,t,o,l[1],S12,3905402710),o=this._FF(o,r,a,t,l[2],S13,606105819),t=this._FF(t,o,r,a,l[3],S14,3250441966),a=this._FF(a,t,o,r,l[4],S11,4118548399),r=this._FF(r,a,t,o,l[5],S12,1200080426),o=this._FF(o,r,a,t,l[6],S13,2821735955),t=this._FF(t,o,r,a,l[7],S14,4249261313),a=this._FF(a,t,o,r,l[8],S11,1770035416),r=this._FF(r,a,t,o,l[9],S12,2336552879),o=this._FF(o,r,a,t,l[10],S13,4294925233),t=this._FF(t,o,r,a,l[11],S14,2304563134),a=this._FF(a,t,o,r,l[12],S11,1804603682),r=this._FF(r,a,t,o,l[13],S12,4254626195),o=this._FF(o,r,a,t,l[14],S13,2792965006),t=this._FF(t,o,r,a,l[15],S14,1236535329),a=this._GG(a,t,o,r,l[1],S21,4129170786),r=this._GG(r,a,t,o,l[6],S22,3225465664),o=this._GG(o,r,a,t,l[11],S23,643717713),t=this._GG(t,o,r,a,l[0],S24,3921069994),a=this._GG(a,t,o,r,l[5],S21,3593408605),r=this._GG(r,a,t,o,l[10],S22,38016083),o=this._GG(o,r,a,t,l[15],S23,3634488961),t=this._GG(t,o,r,a,l[4],S24,3889429448),a=this._GG(a,t,o,r,l[9],S21,568446438),r=this._GG(r,a,t,o,l[14],S22,3275163606),o=this._GG(o,r,a,t,l[3],S23,4107603335),t=this._GG(t,o,r,a,l[8],S24,1163531501),a=this._GG(a,t,o,r,l[13],S21,2850285829),r=this._GG(r,a,t,o,l[2],S22,4243563512),o=this._GG(o,r,a,t,l[7],S23,1735328473),t=this._GG(t,o,r,a,l[12],S24,2368359562),a=this._HH(a,t,o,r,l[5],S31,4294588738),r=this._HH(r,a,t,o,l[8],S32,2272392833),o=this._HH(o,r,a,t,l[11],S33,1839030562),t=this._HH(t,o,r,a,l[14],S34,4259657740),a=this._HH(a,t,o,r,l[1],S31,2763975236),r=this._HH(r,a,t,o,l[4],S32,1272893353),o=this._HH(o,r,a,t,l[7],S33,4139469664),t=this._HH(t,o,r,a,l[10],S34,3200236656),a=this._HH(a,t,o,r,l[13],S31,681279174),r=this._HH(r,a,t,o,l[0],S32,3936430074),o=this._HH(o,r,a,t,l[3],S33,3572445317),t=this._HH(t,o,r,a,l[6],S34,76029189),a=this._HH(a,t,o,r,l[9],S31,3654602809),r=this._HH(r,a,t,o,l[12],S32,3873151461),o=this._HH(o,r,a,t,l[15],S33,530742520),t=this._HH(t,o,r,a,l[2],S34,3299628645),a=this._II(a,t,o,r,l[0],S41,4096336452),r=this._II(r,a,t,o,l[7],S42,1126891415),o=this._II(o,r,a,t,l[14],S43,2878612391),t=this._II(t,o,r,a,l[5],S44,4237533241),a=this._II(a,t,o,r,l[12],S41,1700485571),r=this._II(r,a,t,o,l[3],S42,2399980690),o=this._II(o,r,a,t,l[10],S43,4293915773),t=this._II(t,o,r,a,l[1],S44,2240044497),a=this._II(a,t,o,r,l[8],S41,1873313359),r=this._II(r,a,t,o,l[15],S42,4264355552),o=this._II(o,r,a,t,l[6],S43,2734768916),t=this._II(t,o,r,a,l[13],S44,1309151649),a=this._II(a,t,o,r,l[4],S41,4149444226),r=this._II(r,a,t,o,l[11],S42,3174756917),o=this._II(o,r,a,t,l[2],S43,718787259),t=this._II(t,o,r,a,l[9],S44,3951481745),state[0]+=a,state[1]+=t,state[2]+=o,state[3]+=r},_init:function(){for(count[0]=count[1]=0,state[0]=1732584193,state[1]=4023233417,state[2]=2562383102,state[3]=271733878,i=0;i<digestBits.length;i++)digestBits[i]=0},_update:function(e){var n;n=this._and(this._shr(count[0],3),63),count[0]<4294967288||(count[1]++,count[0]-=4294967296),count[0]+=8,buffer[n]=this._and(e,255),63<=n&&this._transform(buffer,0)},_finish:function(){var e,n,a,t=new this._array(8),o=0;for(o=0;o<4;o++)t[o]=this._and(this._shr(count[0],8*o),255);for(o=0;o<4;o++)t[o+4]=this._and(this._shr(count[1],8*o),255);for(a=(n=this._and(this._shr(count[0],3),63))<56?56-n:120-n,(e=new this._array(64))[0]=128,o=0;o<a;o++)this._update(e[o]);for(o=0;o<8;o++)this._update(t[o]);for(o=0;o<4;o++)for(j=0;j<4;j++)digestBits[4*o+j]=this._and(this._shr(state[o],8*j),255)},_hexa:function(e){var n="",a=e;for(hexa_i=0;hexa_i<8;hexa_i++)n="0123456789abcdef".charAt(Math.abs(a)%16)+n,a=Math.floor(a/16);return n}}}),nw.Class.define("nw.filesPhotosCamera",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{start:function(r){if("browser"!==cordova.platformId){var e=function(){if("browser"===cordova.platformId)return nw.dialog("En construcción");nw.uploadFileCamera(r.name,"camera",!1,!1,r.quality,r.width,r.height,r.allowEdit,r.callback,r.offline)},n=function(){nw.uploadFileCamera(r.name,"files",!1,!1,r.quality,r.width,r.height,r.allowEdit,r.callback,r.offline)},a={iconAccept:"<i class='material-icons' style='top: 5px;position: relative;'>camera_alt</i> ",iconCancel:"<i class='material-icons' style='top: 5px;position: relative;'>photo_library</i> ",useDialogNative:!1,closeEnc:!0,autocierre:!0,cleanHtml:!1,textAccept:"Cámara"};"browser"===cordova.platformId?e=n=!(a.textAccept="Volver"):a.textCancel="Galería",a.addClass="popup_sel_camera_files";var t=nw.dialog("Seleccione",e,n,a);console.log("d",t),console.log("array",r);var o={colorBtnBackIOS:"#7f7f7f",style:"box-shadow: none;border: 0;background-color: transparent;color:#7f7f7f;"};o.text=nw.tr("Archivos"),o.className="btnpil_other ",o.type="button",o.icon="<i class='material-icons' style='top: 5px;position: relative;'>insert_drive_file</i>",o.position="center",o.callback=function(){l(),t.remove()};var i=nw.createButton(o);$(t.querySelector(".popup_pil_btns")).prepend(i)}else l();function l(){nw.filesPhotosCamera.files_op2(r,function(e){if(console.log("res",e),console.log("array",r),document.querySelector(".nw_textField_"+r.name)&&(document.querySelector(".nw_textField_"+r.name).value=e.archivo_asubir),document.querySelector(".fileUpShow_"+r.name)){document.querySelector(".fileUpShow_"+r.name).style.display="block";for(var n=e.archivo_asubir,a=nw.getExtensionFile(e.archivo_asubir),t=nw.utils.getArraysFile("extensiones_img"),o=!1,i=0;i<t.length;i++)t[i]==a&&(o=!0);o||(n=nw.utils.getFileByType(e.archivo_asubir)),document.querySelector(".fileUpShow_"+r.name).style.backgroundImage="url("+config.domain_rpc+n+")",$("."+r.name).trigger("change")}})}},files_op2:function(e,n){var a={setTitle:"Subir archivo",id:"nwmakerSubirArchivo",html:"<div class='titleconfirmatime'>Confirma el archivo pdf, etc</div>",changeHash:!0,showBack:!0,closeBack:!1,destroyAutomaticOnAccept:!1};nw.isMobile()&&(a.role="page",a.transition="slide"),a.fields=[{name:"archivo_asubir",label:"Busca tu archivo a subir",placeholder:"Busca tu archivo a subir",type:"uploader",required:!0}];nw.dialog("<div id='containerFilesUploader' class='containerFilesUploader'></div>",function(){if(!t.validate())return!1;var e=t.getRecord();return console.log("data",e),n(e),nw.remove("."+t.id),nw.remove(".containerFilesUploader_container"),!0},function(){return nw.remove(".containerFilesUploader_container"),!0},{addClass:"containerFilesUploader_container",original:!0,destroyAutomaticOnAccept:!1}),a.showButtons=!1,a.createInHome=!0,a.canvas="#containerFilesUploader",a.id="containerFilesUploader_list",a.id_form="containerFilesUploader_list_int";var t=nw.dialog2("",!1,!1,a)},files:function(a){if("undefined"==typeof fileChooser)return nw.dialog("Debe instalar el complemento fileChooser"),!1;fileChooser.open(function(e){console.log("fileChooser:::uri",e);var n={};n.imageURI=e,n.callback=function(e){console.log("fileChooser:::response:::r",e),a.callback(e)},n.name=e,nw.uploaderFileSrv.saveFileOnServer(n)})}}}),nw.Class.define("nw.login",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{createLogin:function(){var n=new nw.forms,e=config.config_crear_cuenta,a="lower";void 0!==e.upperOrLowerUserLogin&&(a=e.upperOrLowerUserLogin),n.canvas="#foo",n.id_form="createLogin";var t="none",o="Correo / Usuario";!0===config.initSessionWithEmail&&(t="email"),!0===config.change_placeholder_loguin&&(o=config.change_placeholder_name_loguin);var i=[{icon:"material-icons account_circle normal",name:"usuario",label:o,placeholder:o,type:"textField",mode:t,upperOrLowerText:a,required:!0},{icon:"material-icons lock normal",name:"clave",label:nw.utils.tr("Contraseña")+" <span class='mostrar_clave_login'><i class='material-icons'>visibility</i></span>",placeholder:"Contraseña",type:"textField",mode:"password",required:!0}],r=!1;if(nw.utils.validateElementIfExist(".mostrar_clave_login",function(n){n.onclick=function(){var e=document.querySelector(".clave");e&&(n.innerHTML=r?(r=!1,e.setAttribute("type","password"),"<i class='material-icons'>visibility</i>"):(r=!0,e.setAttribute("type","text"),"<i class='material-icons'>visibility_off</i>"))}}),nw.evalueData(e.pedir_empresa)&&i.push({name:"pedir_empresa",label:"Empresa",placeholder:"Empresa",type:"numeric",required:!1,visible:!1}),nw.evalueData(e.perfil)&&i.push({name:"perfil_send",label:"Perfil",placeholder:"Perfil",type:"numeric",required:!1,visible:!1}),nw.evalueData(e.perfil_tipo)&&i.push({name:"perfil_tipo",label:"Perfil tipo",placeholder:"Perfil tipo",type:"textField",required:!1,visible:!1}),!0===config.login_solicitar_code&&i.push({icon:"material-icons offline_pin normal",name:"codigo",label:"Código de seguridad",placeholder:"Código de seguridad",type:"textField",required:!0}),n.setFields(i),n.buttons=[],n.buttons.push({className:"btn_maxwidth",name:"aceptar",label:"Iniciar sesión",callback:function(){nw.login.iniciarSesion(n)}}),!0===config.login_crear_cuenta){if(!0===e.permitir_registro_login_con_facebook){var l="";"web"===nw.appMode&&"undefined"==typeof facebookConnectPlugin&&(nw.loadSDKFB(config.fb_appid),l=" login_fb_pc"),n.buttons.push({styleContainer:"width:50%;",style:"text-shadow: none;font-weight: lighter;border: 0;background-color:#1877f2;color:#fff;width:100%;",className:"fb-login-button"+l,facebook:!0,name:"facebook",label:"Continuar con Facebook",callback:function(){"undefined"!=typeof facebookConnectPlugin&&nw.fb_login()}})}if(!0===e.permitir_registro_login_con_google){nw.google.loginValidate();var s="my-signin2";void 0!==window.plugins&&void 0!==window.plugins.googleplus&&(s="my-signin2-native"),n.buttons.push({styleContainer:"width:50%;",style:"text-shadow: none;font-weight: lighter;border: 0;background-color:#fff;color:#4285f4;width:100%;",className:"google-login-button",id:s,facebook:!0,name:"google_login",label:"<span class='logoGoogleLoginBtn'>"+nw.google.logo()+"</span><span class='logoGoogleLoginText'>Continuar con Google</span>",callback:function(){nw.google.login()}})}}!0===config.login_generate_code&&n.buttons.push({style:"width:100%;margin:0px;font-size: 14px;",name:"generar_codigo",label:"Generar código",callback:function(){nw.login.generarCodigo()}});var c=!0;void 0!==config.login_permitir_cambiar_clave&&!1===config.login_permitir_cambiar_clave&&(c=!1),c&&n.buttons.push({style:"width:100%;margin:0px;font-size: 14px;",name:"cambiar_clave",label:"¿Olvidó su contraseña?",callback:function(){nw.login.recoveryPass()}}),!0===config.login_crear_cuenta&&n.buttons.push({style:"width:100%;margin:0px;margin-top:5px;font-size: 14px;",name:"crear_cuenta",label:"Crear cuenta",callback:function(){nw.createAccount.formCreateAccount()}}),n.show(),nw.addClass(document.querySelector(n.canvas),"createLoginFoo"),nw.addClass(document.body,"createLoginBody"),nw.evalueData(e.pedir_empresa)&&n.ui.pedir_empresa.setValue(e.pedir_empresa),nw.evalueData(e.perfil)&&n.ui.perfil_send.setValue(e.perfil),nw.evalueData(e.perfil_tipo)&&n.ui.perfil_tipo.setValue(e.perfil_tipo),n.ui.clave.addListener("enter",function(e){nw.login.iniciarSesion(n)}),n.addFooterNote("<p class='versioninlogin' style='margin: 0;'>v "+config.version+"</p>"),void 0!==navigator.splashscreen&&navigator.splashscreen.hide()},iniciarSesion:function(e){var n=e.getRecord();if(nw.utils.getDebug()&&console.log("iniciarSesion",n),!e.validate())return!1;"alexf"===n.usuario&&n.clave,nw.login.connectByInitSession(n)},connectByInitSession:function(e){if(void 0!==config.connectByInitSession)return config.connectByInitSession(e);nw.loading();var n=new nw.rpc(nw.getRpcUrl(),"nwMaker");n.setAsync(!0),n.setLoading(!1);n.exec("loginStarSession",e,function(e){console.log(e),nw.console.log(e),nw.login.responseLogin(e)})},responseLogin:function(e){var n={};console.log(e),nw.loadingRemove();var a=config.config_crear_cuenta;return nw.evalueData(a.pedir_empresa)&&!1!==a.pedir_empresa&&a.pedir_empresa!=e.empresa?(n.html=" "+nw.str("No puede ingresar, verifique el usuario y/o contraseña y vuelva a intentarlo (empresa no válida)")+".",nw.dialog(n),void nw.login.removeLoadingInit()):nw.evalueData(a.perfil)&&nw.evalueData(e.perfil)&&a.perfil.toString()!==e.perfil.toString()?(n.html=" "+nw.str("No puede ingresar, verifique el usuario y / o contraseña y vuelva a intentarlo (perfil no válido)")+".",nw.dialog(n),void nw.login.removeLoadingInit()):nw.evalueData(a.perfil_tipo)&&nw.evalueData(e.perfil_tipo)&&a.perfil_tipo.toString()!==e.perfil_tipo.toString()?(n.html=" "+nw.str("No puede ingresar, verifique el usuario y / o contraseña y vuelva a intentarlo (perfil no válido)")+".",nw.dialog(n),void nw.login.removeLoadingInit()):!1===e?(n.html="<h3 class='textClaveoInvalida'>"+nw.str("Usuario o clave inválida")+"</div>",nw.dialog(n),nw.login.removeLoadingInit(),!1):"product_usuario_no_exist"===e?(n.html="<h3 class='textUserInactive'>"+nw.str("El usuario no existe en nuestra central de productos. Verifique el usuario y/o contraseña y vuelva a intentarlo")+".</div>",nw.dialog(n),void nw.login.removeLoadingInit()):"nonexisteusuario"===e?(n.html="<h3 class='textUserInactive'>"+nw.str("El usuario no existe. Verifique el usuario y/o contraseña y vuelva a intentarlo")+".</div>",nw.dialog(n),void nw.login.removeLoadingInit()):"usuariopreregistrado"===e?(n.html="<h3 class='textUserInactive'>"+nw.str("El usuario se encuentra pre-registrado. Ingrese a su correo y siga las instrucciones")+"</div>",nw.dialog(n),void nw.login.removeLoadingInit()):"tokennovalido_useryaregistrado"===e?(n.html="<h3 class='textUserInactive'>"+nw.str("El enlace no es válido. Puede ser el token incorrecto, el usuario ya activó su cuenta o la clave es incorrecta")+".</div>",nw.dialog(n),void nw.login.removeLoadingInit()):"usuarioinactivo"===e?(n.html="<h3 class='textUserInactive'>"+nw.str("Usuario inactivo, comuníquese con el administrador del sistema")+"</div>",nw.dialog(n),void nw.login.removeLoadingInit()):"usuariooclaveinvalida"===e?((n={}).html="<h3 class='textClaveoInvalida'>"+nw.str("Usuario o clave inválida")+"</div>",nw.dialog(n),void nw.login.removeLoadingInit()):"NO TIENE USUARIO ACTIVO EN NUESTRA CENTRAL"===e?((n={}).html="<h3 class='textClaveoInvalida'>"+nw.str("NO TIENE USUARIO ACTIVO EN NUESTRA CENTRAL")+"</div>",nw.dialog(n),void nw.login.removeLoadingInit()):void 0!==e.concurrente&&!0===e.concurrente?(nw.openConcurrente(e),nw.login.removeLoadingInit(),!1):void nw.setUserInfo(e,function(){void 0!==config.callBackOnLogin?config.callBackOnLogin():window.location.reload()})},recoveryPass:function(){var a=config.config_crear_cuenta,t=new nw.forms;t.id="recoveryPass",t.setTitle="Recuperar clave",t.textClose="Login",t.html="<h3>"+nw.utils.tr("Si ha olvidado su contraseña digite su correo y siga las instrucciones")+"</h3>",t.showBack=!0,t.createBase();t.setFields([{name:"correo_registrado",label:"Ingrese su correo",placeholder:"Ingrese su correo",type:"textField",mode:"email",required:!0}]),t.buttons=[{styleContainer:"width:50%;",style:"text-shadow: none;font-weight: lighter;border: 0;",className:"btn_maxwidth",name:"aceptar",label:"Solicitar código",callback:function(){var e=t.getRecord();if(e.app=config.name,nw.evalueData(a.pedir_empresa)&&(e.pedir_empresa=a.pedir_empresa),nw.evalueData(a.perfil)&&(e.perfil=a.perfil),console.log(e),!t.validate())return!1;var n=new nw.rpc(nw.getRpcUrl(),"nwMaker");n.setAsync(!0),n.setLoading(!0);n.exec("solicitarCambioClave",e,function(e){if(console.log(e),nw.console.log(e),!0!==e)return nw.dialog(e),!1;nw.login.sendCodeResetPass()})}},{styleContainer:"width:50%;",style:"text-shadow: none;font-weight: lighter;border: 0;",className:"btn_enc",name:"ingresar",label:"Ingresar código",callback:function(){nw.login.sendCodeResetPass()}}],t.show()},sendCodeResetPass:function(){var t=new nw.forms;t.id="sendCodeResetPass",t.setTitle="Ingresar código",t.textClose="Clave",t.html="<h3>"+nw.utils.tr("Ingrese el código que fue enviado a su correo registrado")+"</h3>",t.showBack=!0,t.createBase();t.setFields([{name:"token",label:"Ingrese el código",placeholder:"Ingrese el código",type:"numeric",required:!0}]),t.buttons=[{styleContainer:"width:50%;",style:"text-shadow: none;font-weight: lighter;border: 0;",className:"btn_maxwidth",name:"aceptar",label:"Enviar código",callback:function(){var e=config.config_crear_cuenta,n=t.getRecord();if(nw.evalueData(e.pedir_empresa)&&(n.pedir_empresa=e.pedir_empresa),nw.evalueData(e.perfil)&&(n.perfil=e.perfil),!t.validate())return!1;nw.loading({text:"Por favor espere...",textVisible:!0,html:"",theme:"b"});var a=new nw.rpc(nw.getRpcUrl(),"nwMaker");a.setAsync(!0);a.exec("sendCodeCambioClave",n,function(e){return nw.console.log(e),"string"==typeof e?(nw.dialog(e),!1):"object"==typeof e?(nw.changePass(!0,e.usuario),!1):void 0})}},{styleContainer:"width:50%;",style:"text-shadow: none;font-weight: lighter;border: 0;",className:"btn_enc",name:"volver",label:"Volver",callback:function(){nw.back()}}],t.show()},generarCodigo:function(){var a=new nw.forms;a.id="generarCodigo",a.setTitle="Generar código",a.html="<h1>Generar código</h1><br />",a.showBack=!0,a.createBase();a.setFields([{name:"documento",label:"Documento",placeholder:"Documento",type:"numeric",required:!0},{name:"usuario",label:"Usuario",placeholder:"Usuario",type:"textField",mode:"correo",required:!0}]),a.buttons=[{style:"text-shadow: none;font-weight: lighter;border: 0;",className:"btn_maxwidth",name:"aceptar",label:"Enviar",callback:function(){if(!a.validate())return!1;var e=a.getRecord(),n=new nw.rpc(nw.getRpcUrl(),"nwMaker");n.setAsync(!0);n.exec("generateCodeUserNew",e,function(e){return nw.consolelog(e),!0===e?nw.popupSimple("Hemos recibido su solicitud. Le enviaremos respuesta al correo registrado."):nw.popupSimple(e)})}}],a.show()},openConcurrente:function(e){var n="00:01:30",a=nw.str("Ya existe otra sesión iniciada con esta cuenta. Vuelve a intentar en");if(nw.evalueData(e.fecha_ultima_conexion)&&void 0!==e.fecha_ultima_conexion.split(" ")[1]){var t=new Date,o=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),i=e.fecha_ultima_conexion.split(" ")[1];console.log(e),n=nw.diferenciaHoras(o,i),n=nw.diferenciaHoras("00:01:30",n)}var r=a+" <span class='createDialogTimeConcurrencia'>"+n+"</span>";nw.dialog(r,!1,!1,{cleanHtml:!1,useDialogNative:!1}),nw.activeTimerConcurrenDialog(n),createDialogTimeConcurrencia=setInterval(nw.activeTimerConcurrenDialog,1e3)},activeTimerConcurrenDialog:function(e){var n=document.querySelector(".createDialogTimeConcurrencia");if(!n)return clearInterval(createDialogTimeConcurrencia),!1;var a=n.innerHTML;void 0!==e&&(a=e),a=a.replace(/:/gi,"");var t=(a=(a=parseFloat(a)-1).toString()).substr(-2),o=a.replace(t,"");60<=parseInt(t)&&(t=59);var i=o+":"+t;":0"!==(n.innerHTML=i)||clearInterval(createDialogTimeConcurrencia)},removeLoadingInit:function(){var e=document.querySelector(".progress_loading_home");e&&e.remove()}}}),nw.Class.define("map_widget",{extend:nw.forms,construct:function(e){var n=this;n.id="map_widget_create",n.showBack=!0,n.closeBack=!1,n.transition="slide",n.setTitle="Ubicación",n.html="",n.callback=e,n.createBase();n.setFields([{name:"direccion",label:"Mueva el mapa o digite una dirección para seleccionar la ubicación",placeholder:"Mueva el mapa o digite una dirección",type:"textField"},{name:"mapa",label:"",type:"html"}]),n.data=!1,n.buttons=[{style:"background-color: green;color:#fff;",position:"center",name:"aceptar",label:"Aceptar",callback:function(){var e=n.getRecord();nw.utils.evalueData(n.data)&&(e.info=n.data),n.callback(e)}},{style:"",position:"center",name:"cancelar",label:"Cancelar",callback:function(){nw.back()}}],n.show(),nw.loading({text:"Por favor espere...",title:"Cargando mapa..."}),n.onAppear(function(){nw.getGeoLocation(function(e){console.log("1:::::::::::::::::::position",e,nwgeo),nwgeo.getMapLocation(function(e){console.log("1:::::::::::::::::::position",e,nwgeo),nwgeo.initialize(function(e){main.gps_location_inapp=e,n.autocomplete(),n.openMap()},!0,"")},!1,!0)},!0)})},destruct:function(){},members:{autocomplete:function(){var o=this,e={strictBounds:!1},n=document.querySelector(".direccion");nwgeo.autocomplete(n,o.map,function(e){console.log("r",e);var n=e.place.geometry.location.lat(),a=e.place.geometry.location.lng();o.data={latitude:n,longitude:a,autocomplete:e},nwgeo.setPositionMarker(o.markerMyPosition,n,a);var t=[{lat:n,lng:a}];nwgeo.centerMap(o.map,o.markerMyPosition,!1,!1,t,!0,!1)},!1,e)},openMap:function(){var o=this;console.log("main.gps_location_inapp",main.gps_location_inapp);var e=new nwgeo.getMap;e.animate=!1,e.bearing=0,e.tilt=0,e.durationAnimation=2e3,e.canvas=document.querySelector(o.canvas+" .mapa"),e.latitude=nwgeo.latitude,e.longitude=nwgeo.longitude,e.zoom=16,o.map=e.show(function(){o.data={latitude:nwgeo.latitude,longitude:nwgeo.longitude},nw.loadingRemove(),setTimeout(function(){var e=new nwgeo.addMarker;e.map=o.map,e.latitude=nwgeo.latitude,e.longitude=nwgeo.longitude,e.label="",e.icon="",e.draggable=!1,e.animation=!0,o.markerMyPosition=e.show(function(){})},500)}),nwgeo.dragMap("drag",o.map,function(e){var n=0,a=0;if(nwgeo.native){var t=o.map.getCameraTarget();n=t.lat,a=t.lng}else n=o.map.center.lat(),a=o.map.center.lng();nwgeo.setPositionMarker(o.markerMyPosition,n,a)}),nwgeo.dragMap("dragstart",o.map,function(e){}),nwgeo.dragMap("dragend",o.map,function(e){var n=nwgeo.getCenterMap(o.map);console.log("center",n),nwgeo.api_geocodeInverse(n.lat,n.lng,function(e){console.log("START:::map_widget:::result",e);var n=nwgeo.extraerDataResult(e[0]);console.log("START:::map_widget:::d",n),o.ui.direccion.setValue(n.address),o.data={latitude:n.allData.latitude,longitude:n.allData.longitude,dragmap:n}})})}}}),nw.Class.define("nw.developers",{extend:nw.object,construct:function(){var n=new nw.forms;n.id="optionsDevelopers",n.setTitle="Developers",n.showBack=!0,n.textClose=nw.utils.tr("Configurar"),n.createBase();nw.userPolicies.getUserData();var e=nw.utils.isDeveloper(),a=[];e&&(a.push({icon:"material-icons person_add normal",name:"maestro_versions",label:"Maestro versiones",placeholder:"Maestro versiones",type:"button"}),a.push({icon:"material-icons person_add normal",name:"updater_nwmaker",label:"Updater NwMaker",placeholder:"Updater NwMaker",type:"button"})),a.push({icon:"material-icons person_add normal",name:"error_tester",label:"Simular error en cliente",placeholder:"Simular error en cliente",type:"button"},{icon:"material-icons person_add normal",name:"error_tester_server",label:"Simular error en server",placeholder:"Simular error en server",type:"button"},{icon:"material-icons person_add normal",name:"examples",label:"Examples fields forms",placeholder:"Examples fields forms",type:"button"},{icon:"material-icons person_add normal",name:"examples_list",label:"Examples list",placeholder:"Examples list",type:"button"},{icon:"material-icons person_add normal",name:"examples_list_columns",label:"Examples list columns",placeholder:"Examples list columns",type:"button"},{icon:"material-icons person_add normal",name:"printbluetooth",label:"Print Bluetooth",placeholder:"Print Bluetooth",type:"button"},{icon:"material-icons person_add normal",name:"notify",label:"Test notification",placeholder:"Test notification",type:"button"},{name:"mostrar_consola",label:"Mostrar consola",placeholder:"Mostrar consola",type:"selectBox",required:!0},{name:"eventos_consola",label:"Mostrar eventos en consola",placeholder:"Mostrar eventos en consola",type:"selectBox",required:!0},{name:"domain_rpc",label:"Dominio SRV",placeholder:"Dominio SRV",type:"textField",required:!0},{name:"testing",label:"Testing",placeholder:"Testing",type:"selectBox",required:!0}),n.setFields(a),n.buttons=[{style:"text-shadow: none;font-weight: lighter;border: 0;",className:"btn_maxwidth",name:"aceptar",label:"Aceptar",callback:function(){if(!n.validate())return!1;var e=n.getRecord(!0);window.localStorage.setItem("showConsoleDeveloper",e.mostrar_consola),window.localStorage.setItem("showConsoleEvents",e.eventos_consola),window.localStorage.setItem("domain_rpc",e.domain_rpc),window.localStorage.setItem("testing",e.testing),nw.loading(),nw.loadHome(),window.location.reload()}}],n.show(),n.ui.error_tester.addListener("execute",function(){nw.utils.errorReport("Probando...","test")}),n.ui.error_tester_server.addListener("execute",function(){var e=new nw.rpc(n.getRpcUrl(),"nwMaker");e.setAsync(!0),e.setLoading(!0);e.exec("simulateError",{},function(e){console.log("error tester server",e)})}),n.ui.notify.addListener("execute",function(){nw.developers.testingSendNotificactions()}),n.ui.examples.addListener("execute",function(){nw.developers.fields()}),n.ui.examples_list.addListener("execute",function(){nw.developers.list()}),n.ui.examples_list_columns.addListener("execute",function(){nw.developers.list(!0)}),e&&(n.ui.maestro_versions.addListener("execute",function(){nw.developers.maestro_versions()}),n.ui.updater_nwmaker.addListener("execute",function(){nw.developers.updater_nwmaker()})),n.ui.printbluetooth.addListener("execute",function(){var e={text:[{type:"text",value:">>> Size demo",size:"00",align:"0"},{type:"line"},{type:"text",value:"Quad area 30 0",size:"30",align:"0"},{type:"text",value:"Double width 20 0",size:"20",align:"0"},{type:"text",value:"font 11",size:"11",align:"0"},{type:"text",value:"Double height 10 0",size:"10",align:"0"},{type:"text",value:"font 8",size:"8",align:"0"},{type:"text",value:"Normal size 0 0",size:"0",align:"0"},{type:"text",value:"Reduced size 01 0",size:"1",align:"0"},{type:"text",value:"Align left 0",size:"0",align:"0"},{type:"text",value:"Align center 1",size:"0",align:"1"},{type:"text",value:"Align right 2",size:"0",align:"2"}],callback:function(){}};nw.printer.printBluetooth(e)});var t={false:"NO",true:"SI"};n.ui.testing.populateSelectFromArray(t),n.ui.mostrar_consola.populateSelectFromArray(t),n.ui.eventos_consola.populateSelectFromArray(t),n.ui.mostrar_consola.setValue(window.localStorage.getItem("showConsoleDeveloper")),n.ui.eventos_consola.setValue(window.localStorage.getItem("showConsoleEvents")),nw.evalueData(window.localStorage.getItem("domain_rpc"))?n.ui.domain_rpc.setValue(window.localStorage.getItem("domain_rpc")):n.ui.domain_rpc.setValue(config.domain_rpc),n.ui.testing.setValue(window.localStorage.getItem("testing"))},destruct:function(){},members:{},statics:{list:function(e){var a=new nw.lists,t=nw.userPolicies.getUserData();a.createBase=new nw.newPage,a.createBase.showContextMenu=!0,a.createBase.id="List_developers",a.createBase.html="",a.createBase.showBack=!0,a.createBase.closeBack=!1,a.createBase.logotipo_text="<span style='color:#ffff;'>List developers<span>",a.createBase.createAndShow(),a.showContextMenu=!0,a.id_form="List_developers",a.canvas="#List_developers",e&&(a.columnsInTable=!0);a.setColumns([{name:"nombre",label:"Nombre"},{name:"alias",label:"Alias"},{name:"idioma_text",label:"Idioma Text"},{name:"moneda",label:"Moneda"},{name:"indicativo_celular",label:"Indicativo"},{name:"imagen",label:"Imagen",type:"image",mode:"phpthumb"},{name:"boton",label:"Abrir",type:"button"},{name:"cancelar",label:"Cancelar",type:"button"}]);a.createFilters([{icon:"material-icons search normal",name:"buscar",label:"Buscar",required:!1,type:"textField"}]),a.buttons=[],a.buttons.push({icon:"material-icons close normal",position:"top",name:"cancelar",label:"Cancelar",callback:function(e){nw.dialog2("Cancelar")}},{icon:"material-icons close normal",position:"top",name:"otro",label:"Seleccionar",callback:function(e){var n={callback:function(e){console.log("selected rows",e)}};a.selectedRows(n)}},{icon:"material-icons add_circle normal",position:"top",name:"nuevo",label:"Nuevo",callback:function(e){nw.dialog("<div class=det_cant_mas>Comentario<br></div>",function(e){nw.dialogRemove(),console.log(e),a.save(e)},function(){nw.dialogRemove()},{cleanHtml:!1,autoCierre:!1,isprompt:!0})}}),a.show(),a.contextMenu=function(){nw.userPolicies.getUserData();var e=this.selectedRecord();console.log(e);var n=new nw.contextmenu(this,"vertical");n.addAction("Abre nw.utils.dialog2","material-icons check_circle normal",function(e){nw.dialog2("Hola esto es un nw.utils.dialog2")}),n.addAction("Abre un nw.utils.dialog","material-icons check_circle normal",function(e){nw.dialog("Hola esto es un dialog normal")}),n.addAction("Abre un nw.nw_dialog","material-icons check_circle normal",function(e){nw.nw_dialog("Hola esto es un nw_dialog")})},a.clicRow=function(){var e=this.selectedRecord();console.log("clicRowalexf",e),this.contextMenu()},a.applyFilters=function(){var a=this;a.clean();var e={};e.perfil=t.perfil,e.usuario=t.usuario,e.id_usuario=t.id_usuario,e.empresa=t.empresa;var n=new nw.rpc(a.getRpcUrl(),"nwMaker");n.setAsync(!0),n.setLoading(!0);n.exec("populateCountries",e,function(e){console.log("populateCountries",e),e=nw.lists.addValueInModel(e,"boton","Abrir"),e=nw.lists.addValueInModel(e,"cancelar","<i class='material-icons'>delete</i> Eliminar"),a.setModelData(e);var n={callback:function(e){console.log("selected rows",e)}};a.selectedRows(n);a.checkBeforeRows([0,2])})},a.applyFilters()},updater_nwmaker:function(){var e=new nw.rpc(nw.getRpcUrl(),"nwMaker");e.setAsync(!0),e.setLoading(!0);e.exec("actualizaBD",{},function(e){console.log("updater_nwmaker",e),nw.dialog(e)})},maestro_versions:function(){var n=new nw.lists,t=nw.userPolicies.getUserData();n.createBase=new nw.newPage,n.createBase.showContextMenu=!0,n.createBase.id="maestro_versions",n.createBase.html="",n.createBase.showBack=!0,n.createBase.closeBack=!1,n.createBase.logotipo_text="<span style='color:#ffff;'>Versiones<span>",n.createBase.createAndShow(),n.showContextMenu=!0,n.id_form="maestro_versions",n.canvas="#maestro_versions";n.setColumns([{name:"version",label:"Versión"},{name:"usuario",label:"Usuario"},{name:"fecha",label:"Fecha"},{name:"os",label:"OS"},{name:"empresa",label:"Empresa"},{name:"perfil",label:"Perfil"},{name:"description",label:"Description"}]),n.buttons=[],n.buttons.push({icon:"material-icons add_circle normal",position:"top",name:"nuevo",label:"Nuevo",callback:function(e){nw.developers.creaEditaNuevaVersionForm(!1,!1,n)}}),n.show(),n.contextMenu=function(){var n=this,a=(nw.userPolicies.getUserData(),n.selectedRecord());console.log(a);var e=new nw.contextmenu(n,"bottom");e.addAction("Editar","material-icons check_circle normal",function(e){nw.developers.creaEditaNuevaVersionForm(!1,a,n)}),e.addAction("Eliminar","material-icons check_circle normal",function(e){})},n.clicRow=function(){var e=this.selectedRecord();console.log(e),this.contextMenu()},n.applyFilters=function(){var n=this;n.clean();var e={};e.perfil=t.perfil,e.usuario=t.usuario,e.id_usuario=t.id_usuario,e.empresa=t.empresa;var a=new nw.rpc(n.getRpcUrl(),"nwMaker");a.setAsync(!0),a.setLoading(!0);a.exec("populateAppMaestroVersiones",e,function(e){console.log("populateAppMaestroVersiones",e),n.setModelData(e)})},n.applyFilters()},creaEditaNuevaVersionForm:function(e,n,a){var t=new nw.forms;!0===e?($(".containerCenterHome").empty(),t.canvas="#foo",t.id_form="creaEditaNuevaVersionForm"):(t.id="creaEditaNuevaVersionForm",t.setTitle="creaEditaNuevaVersionForm",t.textClose="Developers",t.html="creaEditaNuevaVersionForm",t.showBack=!0,t.createBase());var o=nw.userPolicies.getUserData();t.setFields([{icon:"material-icons check normal",name:"id",label:"ID",placeholder:"ID",type:"textField"},{icon:"material-icons check normal",name:"version",label:"Versión",placeholder:"Versión",type:"textField",required:!0},{icon:"material-icons check normal",name:"os",label:"Sistema operativo",placeholder:"Sistema operativo",type:"selectBox",required:!0},{icon:"material-icons check normal",name:"empresa",label:"Empresa",placeholder:"Empresa",type:"textField",required:!0},{icon:"material-icons check normal",name:"perfil",label:"Perfil",placeholder:"Perfil",type:"textField",required:!0},{icon:"material-icons check normal",name:"description",label:"Descripción",placeholder:"Descripción",type:"textField",required:!0},{icon:"material-icons check normal",name:"fecha",label:"Fecha",placeholder:"Fecha",type:"dateField",required:!0}]),t.buttons=[{styleContainer:"width:50%;",style:"text-shadow: none;font-weight: lighter;border: 0;",icon:"material-icons check_circle normal",colorBtnBackIOS:"green",className:"btn_enc",position:"top",name:"aceptar",label:"Aceptar",callback:function(){var e=t.getRecord();if(!t.validate())return!1;e.usuario=o.usuario,console.log("data",e);var n=new nw.rpc(nw.getRpcUrl(),"nwMaker");n.setAsync(!0),n.setLoading(!0);n.exec("guardaAppMaestroVersiones",e,function(e){console.log(e),nw.back(),a.applyFilters()})}}],t.show();var i={"":"Seleccione",ANDROID:"ANDROID",IOS:"IOS",NONE:"WEB"};t.ui.os.populateSelectFromArray(i);var r=nw.getActualDate();t.ui.fecha.setValue(r),console.log("datapopulate",n),nw.evalueData(n)?t.setRecord(n):t.ui.id.setVisibility(!1)},fields:function(e){var o=new nw.forms;!0===e?($(".containerCenterHome").empty(),o.canvas="#foo",o.id_form="f_crear_viaje"):(o.id="fields",o.setTitle="Examples",o.textClose="Developers",o.html="fields() in nwmaker-2.js",o.showBack=!0,o.createBase());o.setFields([{icon:"material-icons check normal",name:"text_con_mask",visible_label:!0,label:"Texto con Mask patter",mask:"99.999.999-*",placeholder:"99.999.999-*",type:"textField",required:!0},{icon:"material-icons check normal",name:"scaner",visible_label:!0,label:"Scan QR / barras",placeholder:"Scan QR / barras",type:"button",required:!0},{icon:"material-icons check normal",name:"camera_files",visible_label:!0,label:"Take photo camera and files (type: 'button', mode: 'camera_files')",placeholder:"Take photo camera and files (type: 'button', mode: 'camera_files')",mode:"camera_files",type:"button",required:!0},{icon:"material-icons check normal",name:"camera",visible_label:!0,label:"Take photo camera (type: 'button', mode: 'camera')",placeholder:"Take photo camera (type: 'button', mode: 'camera')",mode:"camera",quality:"50",cameraWidth:"auto",cameraHeight:"auto",allowEdit:!0,type:"button",required:!0},{icon:"material-icons check normal",name:"files",visible_label:!0,label:"UUse uploader files (type: 'button', mode: 'files')",placeholder:"Use uploader files (type: 'button', mode: 'files')",mode:"files",type:"button",required:!0},{icon:"material-icons check normal",visible_label:!0,name:"money",label:"Money",type:"textField",mode:"money",required:!0},{icon:"material-icons check normal",type:"uploader_frame",name:"uploader_frame",label:"Uploader by frame (type: 'uploader_frame')",data:"https://www.movilmove.com/imagenes/logomovilmove.png",placeholder:"Uploader by frame",required:!0},{icon:"material-icons check normal",type:"uploader",mode:"images",name:"adjunto_only_images",label:"field uploader only images (type: 'uploader', mode: 'images')",placeholder:"field uploader only images (type: 'uploader', mode: 'images')",required:!0},{icon:"material-icons check normal",type:"uploader",mode:"takePhoto",name:"adjunto_take_photo",label:"field uploader only photo (type: 'uploader', mode: 'takePhoto')",placeholder:"field uploader only photo (type: 'uploader', mode: 'takePhoto')",required:!0},{icon:"material-icons check normal",type:"uploader",name:"adjunto",label:"field uploader",placeholder:"field uploader",required:!0},{icon:"material-icons check normal",name:"selectbox",label:"field selectBox",placeholder:"field selectBox",type:"selectBox",required:!0},{icon:"material-icons check normal",name:"button",label:"Field button",placeholder:"Field button",type:"button",required:!0},{name:"checkBox",label:"Field checkBox",placeholder:"Field checkBox",type:"checkBox",required:!0},{icon:"material-icons check normal",type:"label",name:"label",label:"field label, el de abajo es switch",placeholder:"field label, el de abajo es switch",required:!0},{icon:"material-icons check normal",type:"switch",name:"switch",label:"field switch",options:"<option value='SI'>SI</option><option value='NO'>NO</option>",placeholder:"field switch",required:!0},{icon:"material-icons check normal",name:"inhabilitar",label:"Inhabilitar /habilitar todo",placeholder:"Inhabilitar todo",type:"selectBox",required:!0},{icon:"material-icons check normal",name:"dateField",label:"Field dateField",placeholder:"Field dateField",type:"dateField",enabled:!0},{icon:"material-icons check normal",name:"dateTime",label:"Field dateTime",placeholder:"Field dateTime",type:"dateTime",required:!0},{icon:"material-icons check normal",name:"time",label:"Field time",placeholder:"Field time",type:"time",required:!0},{icon:"material-icons check normal",name:"numeric",label:"Field numeric",placeholder:"Field numeric",type:"numeric",required:!0},{icon:"material-icons check normal",name:"search",label:"Field search (usuarios)",placeholder:"Field search (usuarios)",type:"search",required:!0},{style:"border-top: 1px solid #ccc;border-bottom: 1px solid #ccc;margin:0px;overflow:hidden;padding:20px 0;",name:"grupo_visitantes_open",label:"Visitantes",type:"startGroup",visible:!0},{name:"grupo_visitantes_open",type:"endGroup"}]),o.buttons=[{styleContainer:"width:50%;",style:"text-shadow: none;font-weight: lighter;border: 0;",icon:"material-icons check_circle normal",colorBtnBackIOS:"green",className:"btn_enc",name:"aceptar",label:"Aceptar",callback:function(){var e=o.getRecord();if(e.navtable=o.navTable.getAllData(),console.log(e),!o.validate())return!1}},{styleContainer:"width:50%;",style:"text-shadow: none;font-weight: lighter;border: 0;",icon:"material-icons check_circle normal",colorBtnBackIOS:"green",className:"btn_enc",name:"cancelar",label:"Cancelar",callback:function(){var e=o.getRecord();if(e.navtable=o.navTable.getAllData(),nw.console.log(e),!o.validate())return!1}},{styleContainer:"width:50%;",style:"text-shadow: none;font-weight: lighter;border: 0;",icon:"material-icons check_circle normal",colorBtnBackIOS:"green",className:"btn_enc",position:"top",name:"dialog",label:"Dialog",callback:function(){var e=o.getRecord();if(e.navtable=o.navTable.getAllData(),nw.console.log(e),nw.dialog("nw.dialog('texto...', callbackAccept, callbackCancel, {textAccept:'SI',textCancel:'NO'})"),!o.validate())return!1}}],o.show();var n={normal:"Normal",mediana:"Mediana",grande:"Grande"};o.ui.selectbox.populateSelectFromArray(n);n={SI:"Habilitar",NO:"Inhabilitar"};o.ui.inhabilitar.populateSelectFromArray(n);n={fields_search:"nombre",fields_get:"nombre",table:"usuarios",service:"nwMaker",method:"populateSelectTokenFieldGeneric",showsinresult:!0};o.ui.search.actionSearch(n),o.ui.search.addListener("clickToken",function(e){var n=e;if(!n.data)return nw.cleanTokenField(),!1;o.ui.search.setValue();var a={};a.nombre=n.data.row.nombre,o.navTable.addRow(a,!0)}),o.ui.button.addListener("execute",function(e){nw.dialog("Click!")}),o.ui.scaner.addListener("execute",function(e){nw.barcodeScanner(function(e){nw.dialog(e)})}),o.ui.time.changeValue(function(e){var n=o.ui.time.data,a=o.ui.time.getValue(),t=o.ui.time.fieldData;console.log("e",e),console.log("dateField data",n),console.log("dateField getValue",a),console.log("dateField fieldData",t)}),o.ui.inhabilitar.changeValue(function(e){var n=o.ui.inhabilitar.getValue().val;console.log("inhabilitar val",n),"SI"===n?(o.ui.dateField.disabled(!1),o.ui.dateTime.disabled(!1),o.ui.time.disabled(!1)):(o.ui.dateField.disabled(!0),o.ui.dateTime.disabled(!0),o.ui.time.disabled(!0))});var a=nw.getActualFullDate("datetime-local"),t=nw.getActualDate(),i=nw.getActualHour();o.ui.dateTime.setValue(a),o.ui.dateTime.minValue(a),o.ui.dateField.setValue(t),o.ui.dateField.minValue(t),o.ui.time.setValue(i),o.ui.time.minValue(i),nw.developers.testNavTable();var r=new l_navtable_test;r.construct(o.canvas+" .grupo_visitantes_open"),o.navTable=r,o.ui.selectbox.changeValue(function(e){var n=o.ui.selectbox.getValue();nw.dialog("self.ui.selectbox.changeValue "+n.val)}),o.ui.adjunto.setValue("/hola.png")},testNavTable:function(){nw.Class.define("l_navtable_test",{extend:nw.lists,construct:function(e){this.showContextMenu=!0,this.canvas=e;return this.setColumns([{name:"nombre",label:"Nombre"}]),this},destruct:function(){},members:{contextMenu:function(){var a=this;nw.userPolicies.getUserData(),a.selectedRecord();new nw.contextmenu(this,"bottom").addAction("Quitar de la lista","material-icons create normal",function(e){var n=a.activeRow;$(n).remove()})},clicRow:function(){var e=this.selectedRecord();nw.console.log("clicRow",e)}}})},testingSendNotificactions:function(){var a=new nw.forms;a.id="testingSendNotificactions",a.setTitle="Examples",a.textClose="Developers",a.html="",a.showBack=!0,a.createBase();a.setFields([{icon:"material-icons check normal",name:"user",label:"User",placeholder:"User",type:"selectBox"},{icon:"material-icons check normal",name:"token",label:"Token",placeholder:"Token",type:"textArea"},{icon:"material-icons check normal",name:"title",label:"Title",placeholder:"Title",type:"textField"},{icon:"material-icons check normal",name:"body",label:"Body",placeholder:"Body",type:"textField"},{icon:"material-icons check normal",name:"callback",label:"CallBack",placeholder:"CallBack",type:"textArea"},{icon:"material-icons check normal",name:"send",label:"Send",placeholder:"Send",type:"button"}]),a.show(),a.ui.user.addListener("change",function(){var e=a.ui.user.getValue();a.ui.token.setValue(e.val)}),a.ui.send.addListener("execute",function(){var n=a.getRecord();nw.sendNotificacion({title:n.title,body:n.body,icon:"fcm_push_icon",sound:"default",data:n.callback,callback:"FCM_PLUGIN_ACTIVITY",to:n.token},function(e){nw.dialog("Notify send OK to "+n.token+"! "+e)})}),a.ui.token.setValue(window.localStorage.getItem("token")),a.ui.title.setValue("Título..."),a.ui.body.setValue("Escribe lo que quieras"),a.ui.callback.setValue("nw.dialog('¿Abrir consola developers?', function(){nw.developers.fields()},function(){})");var e={"":"Seleccione"};a.ui.user.populateSelectFromArray(e);var n=nw.userPolicies.getUserData();(e={}).usuario=n.usuario,a.ui.user.populateSelect("nwMaker","getUsersTokens",e,function(e){console.log(e)},!0)}}}),nw.Class.define("nw.getFiltersRecords",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{getRecords:function(e,n,a){return void 0===n&&(n=!1),nw.getFilterRecords(e,n,a)},getFilterRecords:function(u,e,d){var p=[];void 0!==e&&1==e&&(p={});var g=$(u);return $(u).find("input, input:password, input:file, input:checkBox, select, textarea, radio").each(function(){var e=$(this).attr("type"),n=$(this).attr("id"),a=$(this).attr("name");if("radio"===e)$(u+" .label_radio_"+n).hasClass("ui-radio-on")&&(p[a]=void 0===$(this).val()?"":$(this).val(),p[a+"_text"]=$(u+" .label_radio_"+n).text());else if("selectBox"==e){if(!0===g.find("#"+n).data("nwmultiple"))p[n]=g.find("#"+n).getAllSelectOptions(),p[n+"_values"]=implodeArray(p[n],n),p[n+"_texts"]=implodeArray(p[n],n+"_text");else{var t=void 0===g.find("#"+n+" option:selected").val()?"":g.find("#"+n+" option:selected").val();p[n]=t,p[n+"_text"]=g.find("#"+n+" option:selected").text();var o=d.ui[n].data,i=d.ui[n].data_array;if("object"==typeof o&&(p[n+"_model"]=o,p[n+"_all_data"]=o),"object"==typeof i)for(var r=0;r<i.length;r++){var l=i[r];nw.evalueData(l)&&l.id.toString()===t.toString()&&(p[n+"_model_selected"]=l)}}}else if("file"==e)p[n]=void 0===$(this).attr("data-file")?"":$(this).attr("data-file"),p[n]=p[n].replace("C:\\fakepath\\","");else if("date"==e||$(this).hasClass("nw_dateField")){p[n]=void 0===$(this).val()?"":$(this).val();var s=p[n],c=p[n].split("-");1<c.length&&(s=new Date(c[0],c[1]-1,c[2])),p[n+"_object"]=s}else if("checkBox"==e)p[n]=$(this).prop("checked");else if("location"==e){o=d.ui[n].data;p[n]=document.querySelector(".nw_textField_"+n).data}else p[n]=void 0===$(this).val()?"":$(this).val()}),p}}}),nw.Class.define("signature_pad",{extend:nw.forms,construct:function(e){var t=this;t.id="signature_pad_create",t.showBack=!0,t.closeBack=!1,t.transition="slide",t.setTitle=nw.tr("Firma digital"),t.html="<p style='text-align: center;'>"+nw.tr("Firma digital")+"</p>",t.callback=e,t.createBase();t.setFields([{name:"signature_html",label:"Firma",type:"html",required:!0}]),t.buttons=[{style:"background-color: green;color:#fff;",icon:"material-icons how_to_reg normal",colorBtnBackIOS:"#ffffff",position:"center",name:"aceptar",label:"Aceptar",callback:function(){if(t.signaturePad.isEmpty())return nw.dialog("Ingresa una firma por favor.");var e=t.signaturePad.toDataURL("image/jpeg");t.callback(e)}},{style:"",icon:"material-icons how_to_reg normal",colorBtnBackIOS:"#ffffff",position:"center",name:"limpiar",label:"Limpiar",callback:function(){t.signaturePad.clear()}},{style:"",icon:"material-icons how_to_reg normal",colorBtnBackIOS:"#ffffff",position:"center",name:"cancelar",label:"Cancelar",callback:function(){nw.back()}}],t.show(),nw.require("https://cdn.jsdelivr.net/npm/signature_pad@4.1.5/dist/signature_pad.umd.min.js",function(){var e=document.querySelector(".signature_html"),n=document.createElement("canvas");function a(){var e=Math.max(window.devicePixelRatio||1,1);n.width=n.offsetWidth*e,n.height=n.offsetHeight*e,n.getContext("2d").scale(e,e)}n.className="signature_pad",e.appendChild(n),console.log("canvas",n),(window.onresize=a)(),t.signaturePad=new SignaturePad(n,{backgroundColor:"rgb(255, 255, 255)"})})},destruct:function(){},members:{cancelar:function(){var r=this,l=r.getRecord();if(console.log("data",l),!nw.evalueData(l.cancelado_motivo_text))return nw.dialog("Debe seleccionar un motivo de cancelación"),!1;function n(e,n){var a=r.data_service,t=nw.userPolicies.getUserData();if(l.usuario=t.usuario,l.empresa=t.empresa,l.perfil=t.perfil,l.nombre=t.nombre,l.apellido=t.apellido,l.nit=t.documento,l.domain_rpc=config.domain_rpc,l.estado="CANCELADO_POR_CONDUCTOR",nw.evalueData(config.cancelarliberaServicio)&&1==config.cancelarliberaServicio&&(l.libera_servicio="SOLICITUD"),config.cancelarliberaServicio&&!nw.evalueData(l.cancelado_motivo))return nw.dialog("Seleccione un motivo de cancelación"),!1;var o="";""!=t.nombre&&(o=t.nombre),nw.evalueData(l.cancelado_motivo)?l.cancelado_motivo=l.cancelado_motivo.replace(/_/g," "):l.cancelado_motivo="",void 0!==a&&(l.cancela="cancela_conductor",l.tiempo=a.hora,l.hora_llegada=a.hora_llegada,l.estado_service=a.estado),nw.evalueData(e)&&(l.files=e);var i=new nw.rpc(nw.getRpcUrl(),"servicios");i.setAsync(!0);i.exec("cancelarServicio",l,function(e){nw.evalueData(n)&&n(),"string"==typeof e&&(r.recargo=e),r.event.detail={recargo:r.recargo},document.dispatchEvent(r.event),nw.back(),nw.sendNotificacion({title:"Servicio cancelado",body:"El conductor "+o+" ha cancelado el servicio por "+l.cancelado_motivo,icon:"fcm_push_icon",sound:"default",callback:"FCM_PLUGIN_ACTIVITY",to:r.data_service.token_usuario}),nw.evalueData(r.callback)&&r.callback()})}l.pide_fotos=l.cancelado_motivo,l.cancelado_motivo=l.cancelado_motivo_text,console.log("data",l),"SI"==l.pide_fotos?main.f_drive_mapa_servicios.subirImagenes(function(e){console.log("files",e),n(e,function(){nw.remove(".pruebauno_container")})}):n()}}}),nw.Class.define("nw.forms",{extend:nw.object,construct:function(){var e=this;e.id=nw.createRandomId(),e.styleCloseIOS=config.styleCloseIOS,e.id_form="nw_form_"+nw.createRandomId(),e.canvas="#"+mainNW.id,e.setTitle="",e.html="",e.showBack=!0,e.closeBack=!1,e.closeBackCallBack=!1,e.textClose=!1,e.popup=!1,e.title="::NW::",e.columnsForm=1,e.columnsHTML="",e.buttons=[],e.role="page",e.changeHash=!0,e.transition=config.defaultPageTransition,e.ui=new nw.uiOptions,e.container="body",e.formContainer=null,e.__listenerCallbacks={},e.up=nw.userPolicies.getUserData()},destruct:function(){},addEventListener:function(e,n){this.__listenerCallbacks[e]=n},members:{setCanvas:function(e){mainNW.id=e,this.canvas=e},accept:function(){void 0!==this.__listenerCallbacks.accept&&this.__listenerCallbacks.accept()},backgroundColor:function(e){nw.backgroundColor(this,e)},settings:{},dialog:function(e,n,a){nw.dialog(e,n,a)},addRequiredMessage:function(e,n){nw.addRequiredMessage(e,n)},loadingRemove:function(){nw.loadingRemove()},cleanTokenField:function(){nw.cleanTokenField()},reject:function(){nw.reject(this)},clean:function(){var e="."+this.id_form;$(":input",e).not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected"),$(".showImage").html(" ");for(var n=$(":input",e),a=n.length,t=0;t<a;t++){var o=$(n[t]);o.attr("type");"file"==o.attr("typenwmaker")&&o.val("")}},back:function(){nw.back()},evalueData:function(e){return nw.evalueData(e)},validate:function(e,n){var a="."+this.id_form;return nw.evalueData(e)&&(a=e),!!nw.forms.validateForm(a,n)},addHeaderNote:function(e){nw.addHeaderNote("."+this.id_form,e)},addFooterNote:function(e){nw.addFooterNote("."+this.id_form,e)},setFielsUI:function(e){this.setFieldsForm(this,e)},setFieldsForm:function(d,e){var p=$(e).attr("id"),n=$(e).attr("data-type"),a=$(e).attr("data-mask");$(e).attr("type");0==$(e).data("nwenabled")&&$(e).prop("disabled","disabled"),"disabled"==$(e).attr("disabled")&&$(e).addClass("disabled_nw"),"required"==$(e).attr("required")&&$(e).addClass("required"),$("#"+d.id_form+" .nw_widget_div_"+p+" .nw_label").addClass("nw_label_"+p),(e.parent=d).ui[p]=$(e),"selectBox"===n&&(d.ui[p].parents(".ui-btn").removeClass("ui-btn"),d.ui[p].parents(".ui-icon-carat-d").removeClass("ui-btn-icon-right")),e.ui=d.ui[p];if(nw.evalueData(d.fields)){var t=d.fields.filter(function(e){return e.name==p});d.ui[p].fieldData=t}d.ui[p].change(function(){}),nw.evalueData(a)&&$(d.ui[p]).mask(a),d.ui[p].onAppear=function(e){var n=d.ui[p].attr("type"),a=d.ui[p].attr("data-type");if("uploader_frame"!==n&&"uploader_frame"!==a)return d.ui[p]&&e(t),!0;var t=nw.getElement(d.canvas+" .iframe_uploader_"+p);return nw.utils.validateElement(t,function(){!function e(n,a){var t=nw.getElement(d.canvas+" .iframe_uploader_"+n);"complete"!=(t.contentDocument||t.contentWindow.document).readyState?window.setTimeout(e(n,a),100):t.contentWindow.onload=function(){a()}}(p,function(){e(t)})}),!0},d.ui[p].setRequired=function(e){var n=document.querySelector(d.canvas+" .nw_widget_div_"+p+" .form-required");if(n&&n.remove(),!1===e)$(d.ui[p]).removeClass("required");else{$(d.ui[p]).addClass("required");var a=document.querySelector(d.canvas+" .nw_label_"+p);a||(a=document.querySelector(d.canvas+" ."+p)),a&&$(a).append(" <span class='form-required'> * </span>")}},d.ui[p].focus=function(e){nw.utils.getDebug()&&console.log("ACTION:::FOCUS",p),$(d.canvas+" ."+p).focus(function(){nw.utils.getDebug()&&console.log("ACTION_EXEC:::FOCUS",p),void 0!==e&&nw.evalueData(e)&&e()})},d.ui[p].focusout=function(e){nw.utils.getDebug()&&console.log("ACTION:::FOCUSOUT",p),$(d.canvas+" ."+p).focusout(function(){nw.utils.getDebug()&&console.log("ACTION_EXEC:::FOCUSOUT",p),void 0!==e&&nw.evalueData(e)&&e()})},d.ui[p].setVisibility=function(e){"excluded"===e&&(e=!1),"visible"===e&&(e=!0),!1===e?($("."+d.id_form+" .nw_widget_div_"+p+" .nw_label_"+p).css({display:"none"}),$("."+d.id_form+" .nw_widget_div_"+p+" ."+p).css({display:"none"}),$("."+d.id_form+" #"+p).css({display:"none"}),$("."+d.id_form+" .nw_widget_div_"+p+" #"+p).css({display:"none"}),$("."+d.id_form+" .nw_widget_div_"+p+" .nw_widget_div_"+p).css({display:"none"}),$("."+d.id_form+" .nw_widget_div_"+p).css({display:"none"}),$("."+d.id_form+" #"+p+"-button").css({display:"none"})):($("."+d.id_form+" .nw_widget_div_"+p+" .nw_label_"+p).css({display:""}),$("."+d.id_form+" .nw_widget_div_"+p+" ."+p).css({display:""}),$("."+d.id_form+" #"+p).css({display:""}),$("."+d.id_form+" .nw_widget_div_"+p+" #"+p).css({display:""}),$("."+d.id_form+" .nw_widget_div_"+p+" .nw_widget_div_"+p).css({display:""}),$("."+d.id_form+" .nw_widget_div_"+p).css({display:""}),$("."+d.id_form+" #"+p+"-button").css({display:""}))},d.ui[p].actionSearchVisible=function(o){console.log("actionSearchVisible dat",o),console.log("actionSearchVisible ID",p),console.log("actionSearchVisible SELF",d),$(".errorNwForm").remove();var i=this,r=".nw_widget_div_"+$(i).attr("name"),l=d,e=i.value;clearTimeout(void 0),nw.cleanTokenField(),nw.loadingRemove({container:r});var n=nw.userPolicies.getUserData();if(nw.loading({container:r}),void 0===l.getRecord)var a=l.getFiltersData(!0);else a=l.getRecord(!0);a.token=e,nw.evalueData(o.sendData)&&(a.sendData=o.sendData),nw.evalueData(o.fields_search)&&(a.fields_search=o.fields_search),nw.evalueData(o.fields_get)&&(a.fields_get=o.fields_get),nw.evalueData(o.table)&&(a.table=o.table),a.terminal=n.terminal,a.usuario=n.usuario,a.empresa=n.empresa,a.perfil=n.perfil;var t=new nw.rpc(nw.getRpcUrl(),o.service);t.setAsync(!0),t.setLoading(!1);t.exec(o.method,a,function(e){console.log("actionSearchVisible result",e),nw.loadingRemove({container:r}),nw.cleanTokenField(),$("."+l.id_form+" .containTokenResult_visible_"+$(i).attr("id")).remove();var n=!0;if(void 0!==o.showsinresult&&!1===o.showsinresult&&(n=!1),!1===e){var a,t;return n&&((a=document.createElement("div")).className="containTokenResultVisible containTokenResult_visible_"+$(i).attr("id"),$(i).after(a),(t=document.createElement("div")).className="optionTokenVisible optionToken_"+$(i).attr("id"),t.data=!1,t.innerHTML="Sin resultados",$("."+l.id_form+" .containTokenResult_visible_"+$(i).attr("id")).append(t)),!1}if(!1!==e.length)return d.ui[p].actionSearchVisibleSet(e,i)})},d.ui[p].actionSearchVisibleSet=function(e,n){var a=d,t=this;void 0!==n&&(t=n);var o=document.createElement("div");o.className="containTokenResultVisible containTokenResult_visible_"+$(t).attr("id"),o.style="display: none;";var i="listviewvisible_id_"+$(t).attr("id"),r="listviewvisible "+i;o.innerHTML=nw.lists.listStructureTable(!1,!1,!1,!1,!0,r," "),$(t).after(o);for(var l=0;l<e.length;l++){var s=e[l],c={row:s,input:t,parent:a},u=document.createElement("li");u.className="ui-btn ui-btn-icon-right ui-icon-carat-r optionTokenVisible optionToken_"+$(t).attr("id"),u.data=c,u.innerHTML=s.nombre,$("."+a.id_form+" .containTokenResult_visible_"+$(t).attr("id")+" .uiListRows").append(u)}$("."+i).listview({filter:!0,autodividers:!1}),t.on("input propertychange",function(e){console.log("input propertychange:::this",this),console.log("input propertychange:::this.data",this.data),console.log("input propertychange:::e",e)}),t.on("click",function(e){console.log("input propertychange:::this",this),console.log("input propertychange:::this.data",this.data);var n=this.getAttribute("id");document.querySelector(".containTokenResult_visible_"+n).style.display="block",$(".containTokenResult_visible_"+n+" input").focus(),$(".containTokenResult_visible_"+n+" input").focusin()}),t.on("blur",function(e){console.log("input propertychange:::this",this),console.log("input propertychange:::this.data",this.data);this.getAttribute("id")}),document.querySelector(".containTokenResult_visible_"+$(t).attr("id")+" input").id="idresearch_"+$(t).attr("id"),$(".containTokenResult_visible_"+$(t).attr("id")+" input").on("blur",function(e){console.log("input propertychange:::this",this);var n=this.getAttribute("id");n=n.replace("idresearch_",""),setTimeout(function(){document.querySelector(".containTokenResult_visible_"+n).style.display="none"},10)})},d.ui[p].actionSearch=function(u){var e;this.on("input propertychange",function(){$(".errorNwForm").remove();var l=this,s=".nw_widget_div_"+$(l).attr("name"),c=d,a=l.value;if(clearTimeout(e),nw.cleanTokenField(),nw.loadingRemove({container:s}),!nw.evalueData(a))return!1;var t=nw.userPolicies.getUserData();nw.loading({container:s}),e=setTimeout(function(){if(void 0===c.getRecord)var e=c.getFiltersData(!0);else e=c.getRecord(!0);e.token=a,nw.evalueData(u.sendData)&&(e.sendData=u.sendData),nw.evalueData(u.fields_search)&&(e.fields_search=u.fields_search),nw.evalueData(u.fields_get)&&(e.fields_get=u.fields_get),nw.evalueData(u.table)&&(e.table=u.table),e.terminal=t.terminal,e.usuario=t.usuario,e.empresa=t.empresa,e.perfil=t.perfil;var n=new nw.rpc(nw.getRpcUrl(),u.service);n.setAsync(!0),n.setLoading(!1);n.exec(u.method,e,function(e){nw.loadingRemove({container:s}),nw.cleanTokenField(),$("."+c.id_form+" .containTokenResult_"+$(l).attr("id")).remove();var n=!0;if(void 0!==u.showsinresult&&!1===u.showsinresult&&(n=!1),!1===e)return n&&((a=document.createElement("div")).className="containTokenResult containTokenResult_"+$(l).attr("id"),$(l).after(a),(o=document.createElement("div")).className="optionToken optionToken_"+$(l).attr("id"),o.data=!1,o.innerHTML="Sin resultados",$("."+c.id_form+" .containTokenResult_"+$(l).attr("id")).append(o)),!1;if(!1!==e.length){var a;(a=document.createElement("div")).className="containTokenResult containTokenResult_"+$(l).attr("id"),a.innerHTML=nw.lists.listStructureTable(),$(l).after(a);for(var t=0;t<e.length;t++){var o,i=e[t],r={row:i,input:l,parent:c};(o=document.createElement("li")).className="ui-btn ui-btn-icon-right ui-icon-carat-r optionToken optionToken_"+$(l).attr("id"),o.data=r,o.innerHTML=i.nombre,$("."+c.id_form+" .containTokenResult_"+$(l).attr("id")+" .uiListRows").append(o)}}})},1e3)})},d.ui[p].changeValue=function(e){var n=d.ui[p].attr("type"),a=d.ui[p].attr("data-type");"radio"===n||"radio"===a?d.ui[p].find(".radios_button").change(function(){nw.cleanTokenField(),$(".errorNwForm").remove(),e(this,d)}):d.ui[p].change(function(){nw.cleanTokenField(),$(".errorNwForm").remove(),e(this,d)})},d.ui[p].getValue=function(){if("selectBox"!==d.ui[p].attr("type"))return d.ui[p].val();var e={};return e.data=d.ui[p].data,nw.evalueData(d.ui[p].data_array)&&(e.data_array=d.ui[p].data_array[d.ui[p].val()]),e.val=d.ui[p].val(),e.text=d.ui[p].find("option:selected").text(),e},d.ui[p].data("type",n),d.ui[p].setEnabled=function(e){var n=d.ui[p].attr("type");e?(d.ui[p].removeClass("disabled_nw"),d.ui[p].removeAttr("disabled"),d.ui[p].removeAttr("readonly"),"selectBox"===n&&d.ui[p].parents(".ui-btn").removeClass("ui-state-disabled")):(d.ui[p].attr("readonly","readonly"),d.ui[p].attr("disabled","disabled"),d.ui[p].addClass("disabled_nw"),"selectBox"===n&&d.ui[p].parents(".ui-btn").addClass("ui-state-disabled"))},d.ui[p].setValue=function(a){$(".errorNwForm").remove();var t=d.ui[p].attr("type"),e=d.ui[p].attr("data-type"),n=d.ui[p].attr("data-mode"),o=d.ui[p].attr("name");if("checkBox"===t||"checkBox"===e)!0===a||"t"===a||"on"===a?d.ui[p].attr("checked","checked"):!1!==a&&"f"!==a&&"off"!==a||d.ui[p].removeAttr("checked");else if("radio"===t||"radio"===e)for(var i=d.ui[p].find(".radios_button"),r=0;r<i.length;r++){var l=i[r];if(d.ui[p].find(".label_radio_nw").removeClass("ui-radio-on"),d.ui[p].find(".label_radio_nw").removeClass("ui-radio-off"),d.ui[p].find(".label_radio_nw").addClass("ui-radio-off"),l.value===a){var s=l.id;d.ui[p].find(".label_radio_"+s).removeClass("ui-radio-off"),d.ui[p].find(".label_radio_"+s).addClass("ui-radio-on"),$(l).attr("checked","checked");break}}else if("html"===t)d.ui[p].html(a);else if("camera_files"===n)nw.utils.getDebug()&&console.log(a),document.querySelector(".fileUpShow_"+o)&&(document.querySelector(".fileUpShow_"+o).style.display="block",document.querySelector(".fileUpShow_"+o).style.backgroundImage="url("+mainNW.domain_rpc+a+")"),document.querySelector(".nw_textField_"+o)&&(document.querySelector(".nw_textField_"+o).value=a),$(d.ui[p]).trigger("change");else if("button"===t)document.querySelector(".material-icons").innerHTML(a);else if("label"===t||"label"===e)d.ui[p].val(a);else if("file"===t){if(d.ui[p].attr("data-file",a),$(d.canvas+" .img_preview_uploader_"+o).remove(),nw.evalueData(a)){var c=a;c=1<c.split("://").length?a:config.domain_rpc+nw.getFileByType(a,60),d.ui[p].after("<div class='img_preview_uploader img_preview_uploader_"+o+" open_img_popup' data-file='"+c+"' style='background-image: url("+c+")'></div>")}}else d.ui[p].val(a);if("selectBox"===t&&nw.setValSpanSel(d.ui[p]),d.ui[p].data=a,"file"!==t&&d.ui[p].trigger("change"),void 0===navigator.camera){var u=nw.getElement(d.canvas+" .iframe_uploader_"+o);u&&(u.onload=function(){nw.utils.getDebug()&&(console.log("name type",o,t),console.log("value",a));var e=u.contentWindow,n={tipo:"addDataForm"};n.data=a,e.postMessage(n,"*")})}},d.ui[p].disabled=function(e){e?(d.ui[p].attr("readonly","readonly"),d.ui[p].attr("disabled","disabled"),d.ui[p].addClass("disabled_nw")):(d.ui[p].removeClass("disabled_nw"),d.ui[p].removeAttr("disabled"),d.ui[p].removeAttr("readonly"))},d.ui[p].addListener=function(e,t){var o=this;"keyup"===e||"onKeyUp"===e?document.querySelector("."+d.id_form+" ."+p).addEventListener("keyup",function(e){t(e,this)},{passive:!0}):"onKeyPress"===e||"keypress"===e?document.querySelector("."+d.id_form+" ."+p).addEventListener("keypress",function(e){t(e,this)},{passive:!0}):"execute"===e||"click"===e?nw.nclick(this,t):"change"===e||"changeValue"===e?this.changeValue(function(e,n){var a=o.getValue();t(a)}):"clickToken"===e?($("."+d.id_form).delegate(".containTokenResult_"+d.ui[p].attr("id")+" .optionToken","click",function(e){d.execnclick(this,function(e){t(e)})}),$("."+d.id_form).delegate(".containTokenResult_visible_"+d.ui[p].attr("id")+" .optionTokenVisible","click",function(e){d.execnclick(this,function(e){t(e)})}),nw.nclick(this,function(){$("."+d.id_form+" .containTokenResult_"+p).fadeIn()})):"enter"===e||"enterKey"===e?document.querySelector("."+d.id_form+" ."+p).addEventListener("keyup",function(e){13===e.keyCode&&(nw.utils.getDebug()&&console.log("ENTER"),t())},{passive:!0}):nw.console.log("Action "+e+" no reconocido")},d.ui[p].maxValue=function(e){this.attr("max",e)},d.ui[p].minValue=function(e){this.attr("min",e)},d.ui[p].populateSelectFromArray=function(e){nw.populateSelectFromArray(d,e,p)},d.ui[p].cleanInput=function(){nw.cleanInput(d,p)},d.ui[p].populateSelectAsync=function(e,n,a,t,o){nw.populateSelect(p,d,e,n,a,t,!0,o)},d.ui[p].populateSelect=function(e,n,a,t,o,i){nw.populateSelect(p,d,e,n,a,t,o,i)},d.ui[p].actionSearchList=function(e){nw.forms.actionSearchList(p,d,e)},$(e).attr("data-parent","#"+d.id_form)},execnclick:function(e,n){return nw.buttons.execnclick(e,n)},getRpcUrl:function(){return nw.getRpcUrl()},disabledAll:function(n){var a=this;$("#"+a.id_form).find("button, label, input, .radio_fieldset_nwform, input:password, input:file, select, textarea, button, .nw_html, .nw_form_start_group").each(function(){var e=$(this).attr("id");nw.evalueData(e)&&(!1===n?a.ui[e].disabled(!1):a.ui[e].disabled(!0))})},append:function(){},createContainer:function(e){var n=document.createElement("div");return n.id=e,n.className="nwform "+e,n},createFormContainer:function(){var e=this;return null===e.formContainer&&(e.formContainer=document.createElement("div"),e.formContainer.id=e.id_form,e.formContainer.className="nwform "+e.id_form,0<$(e.canvas+" > .contentCenter").length?$(e.canvas+" > .contentCenter").append(e.formContainer):(document.querySelector(e.canvas+" .contentCenter")||$(e.canvas).append("<div class='contentCenter'></div>"),$(e.canvas+" .contentCenter").append(e.formContainer)),!0)},addFieldsByContainer:function(e,n){var a=this,t=nw.createFieldsForms.createFields("#"+a.id_form,e);n.innerHTML=t,$(n).find("button, label, input, .radio_fieldset_nwform, input:password, input:file, select, textarea, button, .nw_html, .nw_form_start_group").each(function(){a.setFielsUI(this)})},tr:function(e){return nw.utils.tr(e)},setFields:function(e){var n=this;n.fields=e,n.columnsHTML=nw.createFieldsForms.createFields("#"+n.id_form,e,"","",n.columnsForm,n),n.createFormContainer(),n.formContainer.innerHTML=n.columnsHTML,$("#"+n.id_form).find("button, label, input, .radio_fieldset_nwform, input:password, input:file, select, textarea, button, .nw_html, .nw_form_start_group").each(function(){n.setFielsUI(this)})},getRecords:function(e){return void 0===e&&(e=!1),nw.getRecords("#"+id_form,e)},getRecord:function(e){void 0===(e=!0)&&(e=!1);var n=nw.getFiltersRecords.getRecords("#"+this.id_form,e,this);return!0===config.getDataOldForms&&(n.z_data_old=this.data_old),n},setRecord:function(t){if(!1===nw.evalueData(t))return!1;return $.each(this.ui,function(e,n){var a="";nw.evalueData(t[e])&&(a=t[e]),n.setValue(a)}),!0===config.getDataOldForms&&(this.data_old=t),!0},showInHome:function(){this.show()},show:function(){var e=this;e.createFormContainer(),$(e.canvas).css("visibility","visible");var n=$.parseHTML($.trim(" <div class='ui-field-contain containBtnFooter'></div>"));e.formContainer.append(n[0]),nw.utils.getDebug()&&(console.log("%c<<<<DEBUG: starting :::show:::>>>>","background: blue; color: #fff"),console.log(":::show:::self.canvas",e.canvas),console.log(":::show:::$(self.canvas +  .contentCenter)",$(e.canvas+" .contentCenter")),console.log(":::show:::$(self.canvas +  > .contentCenter)",$(e.canvas+" > .contentCenter")),console.log("%c<<<<DEBUG: end :::show:::>>>>","background: blue; color: #fff")),0<$(e.canvas+" > .contentCenter").length?$(e.canvas+" > .contentCenter").append(e.formContainer):(document.querySelector(e.canvas+" .contentCenter")||$(e.canvas).append("<div class='contentCenter'></div>"),$(e.canvas+" .contentCenter").append(e.formContainer)),nw.utils.remove(".containMenuFloat");var a=e.transition;if(!0===config.nativeTransitions&&(a="none"),nw.changePage("#"+e.id,{transition:a,reverse:!1,changeHash:e.changeHash,reloadPage:!1,showLoadMsg:!0,role:e.role,allowSamePageTransition:!1}),nw.addButtonsPage(e),nw.newPage.lastTransition=a,nw.utils.getDebug()&&(console.log("%c<<<<DEBUG: nw.newPage.lastTransition>>>>","background: #c655c1; color: #fff"),console.log("nw.newPage.lastTransition",nw.newPage.lastTransition)),$("#"+e.id).on("pageshow",function(e,n){nw.utils.getDebug()&&console.log("%c<<<<DEBUG: OKThis page was just hidden: "+n.prevPage+">>>>","background: #c655c1; color: #fff")}),nw.loadFastClick(),e.drag&&!nw.isMobile()){var t=document.querySelector("."+e.id+" .ui-header");t&&(t.onmousedown=function(){nw.utils.drag("."+e.id)})}$(e.canvas+" .selectSwitch").slider(),$(e.canvas+" .sliderRange").slider(),e.setmargin(),!0===config.getDataOldForms&&(e.data_old=e.getRecord()),$(e.canvas).find("select").each(function(){"switch"!==$(this).attr("data-type")&&$(this).selectmenu()})},setmargin:function(){var e=document.querySelector(this.canvas+" .header");if(e){var n=e.clientHeight+"px";nw.evalueData(n.replace("px",""))||(n=config.enc_height),document.querySelector(this.canvas+" .contentCenter").style.marginTop=n}},onAppear:function(e){return nw.forms.onAppear(this,e)},addCss:function(e){var n=$(this.ui[e]).attr("data-type");console.log("type",n)}},statics:{onAppear:function(a,t){return nw.utils.isMobile()?!0!==config.nativeTransitions?!1===a.isCreateInPageShow?(t(),!0):void $(a.canvas).on("pageshow",function(e,n){!0!==a.exist&&(nw.utils.getDebug()&&console.log("Aparece pageshow!!!: "+n.prevPage),t()),a.exist=!0}):void setTimeout(function(){t()},150):(t(),!0)},populateSelectFromArray:function(o,e,i,n){var r=$(o.ui[i]).attr("data-type");!0===n&&("radio"===r?o.ui[i].html(""):o.ui[i].find("option").remove().end()),o.ui[i].data_array=e;var l=0;"radio"===r&&(l=o.ui[i].find(".radios_button").length),$.each(e,function(e,n){var a=n;"object"==typeof n&&(e=n.id,a=n.nombre);JSON.stringify(n);if(a=nw.utils.tr(a),"radio"===r){var t='<input type="radio" name="'+i+'" class="radios_button" id="'+i+"-"+l+'" value="'+e+'" />';t+='<label class="label_radio_nw label_radio_'+i+"-"+l+'" for="'+i+"-"+l+'">'+a+"</label>",o.ui[i].append(t)}else o.ui[i].append($("<option />").val(e).text(a));l++}),nw.normalizeRadioButton()},actionSearchList:function(r,l,s){var e=new nw.rpc(nw.getRpcUrl(),s.service);e.setAsync(!0),e.setLoading(!1),console.log("actionSearchList:::id",r),console.log("actionSearchList:::data",s),console.log("actionSearchList:::sendData:::data",s.data);e.exec(s.method,s.data,function(e){console.log("actionSearchList:::responseServer:::r",e);for(var n="<datalist id='"+s.list+"' class='list_search_datalist_"+s.list+"' > ",a={},t=[],o=0;o<e.length;o++){var i=e[o];console.log("ra",i),a[o]=i,t[(l.ui[r].data=i).id]=e[o],n+="<option class='userLister'  value='"+i.nombre+"'  >"}n+="</datalist>",l.ui[r].data_array=t,nw.remove(l.canvas+" .list_search_datalist_"+s.list),$(l.canvas+" .list_search_"+s.list).append(n),void 0!==s.callback&&!0===nw.evalueData(s.callback)&&s.callback(e)})},populateSelect:function(i,r,e,n,a,l,t,o){if(!0===o){r.ui[i].find("option").remove().end();var s={"":"Seleccione"};r.ui[i].populateSelectFromArray(s)}var c=new nw.rpc(nw.getRpcUrl(),e);c.setAsync(t),c.setLoading(!1),nw.loading({container:".nw_widget_div_"+i});c.exec(n,a,function(e){nw.loadingRemove({container:".nw_widget_div_"+i});for(var n={},a=[],t=0;t<e.length;t++){var o=e[t];n[t]=o,a[(r.ui[i].data=o).id]=e[t]}r.ui[i].data_array=a,r.ui[i].populateSelectFromArray(n),void 0!==l&&!0===nw.evalueData(l)&&l(e)})},cleanInput:function(e,n){e.ui[n].html(""),e.ui[n].find("option").remove().end(),$(e.canvas+" .spanTextShow_"+n).text("Seleccione")},validateForm:function(e,n){nw.removeErrorField();for(var a=$(e).not(":input[type!=span]").find(".required"),t=a.length,o=0;o<t;o++){var i=$(a[o]);if(!1===nw.forms.evalInput(a[o],n))return i.removeClass("errorNwFormDiv"),!1;var r=i.val();i.text;var l=null==r?0:r.length,s=i.attr("minlength"),c=i.attr("maxlength");if(null!=s){if(l<s)return i.addClass("errorNwFormDiv"),i.focus().after("<span class='errorNwForm'>"+nw.utils.tr("Faltan caracteres, mínimo")+" "+s+" </span>"),i.keyup(function(){if(""!=$(this).val())return $(".errorNwForm").remove(),i.removeClass("errorNwFormDiv"),!1}),i.change(function(){if(""!=$(this).val())return $(".errorNwForm").remove(),i.removeClass("errorNwFormDiv"),!1}),!1;if(c<l)return i.addClass("errorNwFormDiv"),i.focus().after("<span class='errorNwForm'>Máximo de caracteres "+c+" </span>"),i.keyup(function(){if(""!=$(this).val())return $(".errorNwForm").remove(),i.removeClass("errorNwFormDiv"),!1}),i.change(function(){if(""!=$(this).val())return $(".errorNwForm").remove(),i.removeClass("errorNwFormDiv"),!1}),!1}}return!0},addRequiredMessage:function(e,n,a,t){void 0===t&&(t=!0);nw.utils.tr("Requerido");nw.evalueData(n),nw.evalueData(a)||(a=50),$(".errorNwForm").remove();$(e).parent().addClass("errorInputRequiredInt"),t&&nw.scrollPage(e,300,a),e.keyup(function(){""!=$(this).val()&&($(".errorNwForm").remove(),$(this).removeClass("errorNwFormDiv"),$(this).parent().removeClass("errorInputRequiredInt"),console.log("addRequiredMessage:::REMOVE:::keyup"))}),e.change(function(){""!=$(this).val()&&($(".errorNwForm").remove(),$(this).removeClass("errorNwFormDiv"),$(this).parent().removeClass("errorInputRequiredInt"),console.log("addRequiredMessage:::REMOVE:::change"))})},evalInput:function(e,n){var a=$(e),t=a.attr("id"),o=a.val(),i=a.attr("type");a.attr("type");if(void 0===i)return!0;var r=!1,l=!1,s=a.attr("data-values-approved");if(a.is(":checked"),"file"==i||"uploader"==i?o=a.attr("data-file"):"checkbox"==i?o=a.prop("checked"):null==o||""==o?r=!0:"multiple"==a.attr("multiple")&&(r=0==$("#"+t+" option").length),"email"!=i&&"correo"!=i||!1===(o=nw.validateEmail(o))&&(l="Requiere un correo válido"),void 0!==o&&""!==o&&!1!==o||(r=!0),void 0!==s&&-1!==o.indexOf(s)&&(r=!1),!0!==r)return!0;$(a).addClass("errorNwFormDiv"),$(a).keydown(function(){$(".errorNwForm").remove(),$(a).removeClass("errorNwFormDiv")}),$(a).change(function(){$(".errorNwForm").remove(),$(a).removeClass("errorNwFormDiv")});var c=document.createElement("input");return c.className="inputfocustemporal",c.style="width: 0; height: 0;",$(a).after(c),c.focus(),c.remove(),nw.addRequiredMessage(a,l,0,n),!1}}}),nw.Class.define("nw.createFieldsForms",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{createFields:function(e,n,a,t,o,i){var r="";void 0!==a&&""!=a&&(r+=a);var l=e.replace("#","");void 0===o&&(o=1);r+="<div id='form_"+(l=l.replace(".",""))+"' class='nw_main_form_div' >",1<o&&Math.round(n.length/o);var s=[];if(r+=nw.createFieldsForms.getInfoFields(n,"one"),r+="</div>",void 0!==t&&""!=t&&(r+=t),0<s.length)for(var c=0;c<s.length;c++)try{CKEDITOR.replace(s[c])}catch(e){nw.utils.errorReport("CKEDITOR error",e)}return r},getInfoFields:function(e,n){nw.evalueData(n)||(n="normal");for(var a=nw.utils.getMobileOperatingSystem(),t="",o=0;o<e.length;o++){var i="",r=e[o];r.labelClean=r.label,r.label=nw.utils.tr(r.label);var l=void 0===r.required?"":r.required;1==l?(l=" required ",r.label=r.label+"<span class='form-required'> * </span>"):l="";var s=!0;void 0!==r.enabled&&(s=r.enabled),0==s?s="disabled readonly":1==s&&(s="");var c="style='",u="style='";void 0!==r.style&&(u+=" "+r.style+" "),void 0!==r.styleContainer&&(c+=" "+r.styleContainer+" ");var d="";void 0!==r.mask&&nw.evalueData(r.mask)&&(d=" data-mask='"+r.mask+"'");var p="";void 0!==r.valuesApproved&&(p=" data-values-approved='"+r.valuesApproved+"'");var g="";void 0!==r.car_min&&(g=" minlength='"+r.car_min+"'"),void 0!==r.minlength&&(g=" minlength='"+r.minlength+"'");var m="",f="";void 0!==r.car_max&&(f=" maxlength='"+r.car_max+"'",m="maxlengthClass"),void 0!==r.maxlength&&(f=" maxlength='"+r.maxlength+"'",m="maxlengthClass");var w="",v="";void 0!==r.visible&&0==r.visible&&(u+="display: none;",c+="display: none;",w=" style='display: none;' "),void 0!==r.visible_label&&0==r.visible_label&&(w=" style='display: none!important;' ",v="label_hidden"),u+="'",c+="'";var h="";void 0!==r.addClassContainer&&nw.evalueData(r.addClassContainer)&&(h=r.addClassContainer);var b=" classWidcomplet_"+r.type+" ";"startGroup"!=r.type&&"endGroup"!=r.type&&(i+="<div "+c+" data-i='"+o+"' class='nw_widget_div "+b+" "+h+" nw_widget_div_"+n+o+" nw_widget_div_"+n+" nw_widget_div_"+r.name+"'>");var _="";void 0!==r.className&&(_=r.className);var y="";void 0!==r.placeholder&&(y=" placeholder='"+nw.utils.tr(r.placeholder)+"' ");var k="",C="";nw.evalueData(r.icon)&&(k=" modeiconField",C="<div class='elinicon' style='background-image: url("+r.icon+");'></div>",!1!==nw.validateBtnMaterialIcons(r.icon)&&(C=nw.getBtnMaterialIcons(r.icon+" false elinicon"))),"camera"!==r.mode&&"files"!==r.mode&&"camera_files"!==r.mode||(navigator.camera,"IOS"===a&&(r.type="uploader_frame"));var D=' data-type="'+r.type+'" ',S=' data-mode="'+r.mode+'" ',x=' autocomplete="off" ';switch(void 0!==r.autocomplete&&1==r.autocomplete&&(x=' autocomplete="on" '),r.type){case"startGroup":void 0!==r.modeForm?i+="<"+r.modeForm+" "+u+" class='nw_form_start_group "+r.name+"' id='"+r.name+"'>":"div"===r.mode?i+="<div "+u+" class='nw_form_start_group "+r.name+"' id='"+r.name+"'>":i+="<fieldset "+u+" class='nw_form_start_group "+r.name+"' id='"+r.name+"'>",i+="<div><span class='titleStartGroup titleStartGroup_"+r.name+"'>"+r.label+"</span></div><div class='containIntStartGroup containIntStartGroup_"+r.name+"'>";break;case"endGroup":void 0!==r.modeForm?(i+="</div>",i+="</"+r.modeForm+">"):"div"===r.mode?(i+="</div>",i+="</div>"):(i+="</div>",i+="</fieldset>");break;case"uploader":var N="";"takePhoto"==r.mode?N=' accept="image/*" capture="camera" ':"images"==r.mode&&(N=' accept="image/*" ');var E="";1==r.offline&&(E=' data-offline="true" '),i+=C,i+='<label class="nw_label nw_widgets '+k+" "+v+'" type="label" id="label_'+r.name+'" '+w+' for="'+r.name+'">'+r.label+"</label>",i+='<div class="nw_uploader_div_cover '+k+'" >',i+='<label class="nw_uploader_label" style="display: none" >+ Seleccionar archivo</label>',"disabled readonly"===s&&(u="style='display:none;'"),i+="<input "+E+" "+D+" "+u+' type="file" id="'+r.name+'" '+s+' name="'+r.name+'" '+N,i+='class="nw_uploader text nw_widgets ',i+=r.name,i+=" ",i+=_,i+=" ",i+=' "',i+=l,i+=" ",i+=y,i+="/ >",i+="</div>";break;case"uploader_frame":var I="";nw.evalueData(r.data)&&(I="&data="+r.data),nw.evalueData(r.accept_ext)&&(I="&accept_ext="+r.accept_ext),i+=C,i+='<label class="nw_label nw_widgets '+k+" "+v+'" type="label" id="label_'+r.name+'" '+w+' for="'+r.name+'">'+r.label+"</label>",i+='<div class="ui-input-text ui-body-inherit ui-corner-all ui-shadow-inset '+k+' ">',i+="<input "+D+" "+u+' type="hidden" id="'+r.name+'" name="'+r.name+'" '+s+' data-clear-btn="true" ',i+='class="text nw_textField nw_widgets ',i+=r.name,i+=" ",i+=" ",i+=_,i+=" ",i+=' "',i+=l,i+=" ",i+=y,i+="/ >",i+='<iframe id="iframe_uploader_'+r.name+'" class="iframe_uploader iframe_uploader_'+r.name+'" src="'+config.domain_rpc+"/nwlib6/nwproject/modules/uploader/index.php?nameInput="+r.name+I+'"></iframe></div>';break;case"html":i+=C,i+='<div class="ui-input-text ui-body-inherit ui-corner-all containerLabel '+k+'">',i+='<label class="nw_label nw_widgets '+v+'" type="label" id="label_'+r.name+'" '+w+' for="'+r.name+'">'+r.label+"</label>",i+="<div "+D+" "+u+' type="html" id="'+r.name+'" name="'+r.name+'" '+s+' data-clear-btn="true" ',i+='class="text nwlabel_input nw_html nw_widgets ',i+=r.name,i+=" ",i+=A,i+=" ",i+=_,i+=" ",i+=T,i+=' "',i+=" ",i+=l,i+=" ",i+=y,i+=' " value="'+r.labelClean+'" ',i+="></div>",i+="</div>";break;case"label":i+=C,i+='<div class="ui-input-text ui-body-inherit ui-corner-all containerLabel '+k+'">',i+='<label class="nw_label nw_widgets '+v+'" type="label" id="label_'+r.name+'" '+w+' for="'+r.name+'">'+r.label+"</label>",i+='<input readonly="readonly" '+D+" "+u+' type="textField" id="'+r.name+'" name="'+r.name+'" '+s+' data-clear-btn="true" ',i+='class="text nwlabel_input nw_textField nw_widgets ',i+=r.name,i+=" ",i+=_,i+='" ',i+=l,i+=" ",i+=y,i+=' value="'+r.labelClean+'" ',i+="/ >",i+="</div>";break;case"switch":i+=C,i+='<div class="ui-input-text ui-body-inherit ui-corner-all containerLabel '+k+'">',i+='<label class="nw_label nw_widgets '+v+'" type="label" id="label_'+r.name+'" '+w+' for="'+r.name+'">'+r.label+"</label>",i+="<select "+l+" "+y+" "+D+" "+u+" id='"+r.name+"' name='"+r.name+"' "+s+" class='selectSwitch "+r.name+" "+A+" "+T+" "+_+"' data-role='slider'>"+r.options+"</select>",i+="</div>";break;case"search":var A=" ",T="";void 0!==r.alterClass&&(T=r.alterClass);var R='data-clear-btn="true"',P=" ",B="nw_textField_search",F="",M="";void 0!==r.list&&(M=" list='"+M+"'",F=" widgetListSearch list_search_"+r.list+" ",R=""),void 0!==r.visible&&(P=" data-type='search' ",F=" widgetListSearchVisible list_search_"+r.list+" ",R="",B="nw_textField_search_visible");var L=r.name+"_"+nw.utils.createRandomId();i+=C,i+='<label class="nw_label nw_widgets '+k+" "+v+'" type="label" id="label_'+r.name+'" '+w+' for="'+r.name+'">'+r.label+"</label>",i+='<div class="ui-input-text ui-body-inherit ui-corner-all ui-shadow-inset '+k+'">',i+="<input "+P+" "+M+" "+d+" "+p+" "+x+" "+D+" "+u+' type="text" id="'+r.name+'" name="'+r.name+'" '+s+" "+R+" ",i+='class="text nw_textField '+B+" nw_widgets "+L+" "+F+" ",i+=r.name,i+=" ",i+=A,i+=" ",i+=_,i+=" ",i+=T,i+=' "',i+=" ",i+=l,i+=" ",i+=y,i+=" ",i+=">",void 0===r.list&&(i+='<button type="reset" class="resetBtnSearch" data-ui="'+r.name+'" data="'+L+'" style="display: inline-block; position: absolute; right: 8px; width: 26px; height: 25px; border: none; top: 6px; padding: 0; box-sizing: border-box; cursor: pointer; background-color: transparent; border: 0; box-shadow: none;" >',i+='<i class="material-icons" style="color: gray; font-weight: bold; font-size: 22px; position: relative; top: auto; left: auto; right: auto; bottom: auto; margin: auto; padding: 0; line-height: normal;">clear</i>',i+="</button>"),i+="</div>";break;case"textField":A=" ";var O="textField";void 0!==r.mode&&("line"==r.mode?A=" line ":"password"==r.mode?O="password":"money"==r.mode&&(A=" setMoney"),"email"!=r.mode&&"correo"!=r.mode||(A=" setEmail",O="email"));T="";void 0!==r.alterClass&&(T=r.alterClass);var $="";void 0!==r.upperOrLowerText&&nw.evalueData(r.upperOrLowerText)&&($="text_"+r.upperOrLowerText),i+=C,i+='<label class="nw_label nw_widgets '+k+" "+v+'" type="label" id="label_'+r.name+'" '+w+' for="'+r.name+'">',i+=r.label,i+="</label>",i+='<div class="ui-input-text ui-body-inherit ui-corner-all ui-shadow-inset '+k+' ">',i+="<input "+d+" "+p+" "+x+" "+g+" "+f+" "+D+" "+u+' type="'+O+'" id="'+r.name+'" name="'+r.name+'" '+s+' data-clear-btn="true" ',i+='class="text nw_textField nw_widgets ',i+=r.name,i+=" ",i+=A,i+=" ",i+=_,i+=" ",i+=T,i+=" ",i+=$,i+=' "',i+=l,i+=" ",i+=y,i+="/ >",i+="</div>";break;case"integer":case"numeric":A=" ";void 0!==r.mode&&"line"==r.mode&&(A=" line "),i+=C,i+='<label class="nw_label nw_widgets '+k+" "+v+'" type="label" id="label_'+r.name+'" '+w+' for="'+r.name+'">'+r.label+"</label>",i+='<div class="ui-input-text ui-body-inherit ui-corner-all ui-shadow-inset '+k+'">',i+="<input "+d+" "+p+" "+x+" "+g+" "+f+" "+D+" min=0 "+s+" "+u+' type="number" id="'+r.name+'" name="'+r.name+'" ',i+='class="text nw_textField nw_widgets ',i+=r.name,i+=" ",i+=m,i+=" ",i+=A,i+=" ",i+=_,i+=' "',i+=y,i+=" ",i+=l,i+="/ >",i+="</div>";break;case"dateField":var U="text";nw.isMobile()||(U="date"),i+=C,i+='<label class="nw_label nw_widgets '+k+" "+v+'" type="label" id="label_'+r.name+'"  '+w+' for="'+r.name+'">'+r.label+"</label>",i+='<div class="ui-input-text ui-body-inherit ui-corner-all ui-shadow-insetV '+k+'">',i+="<input "+d+" "+p+" "+x+" "+D+" "+u+' type="'+U+'" '+s+' id="'+r.name+'" name="'+r.name+'" ',i+='class="nw_dateField nw_widgets dateField_input ',i+=r.name,i+=" ",i+=_,i+=' "',i+=y,i+=" ",i+=l,i+="/ ></div>";break;case"time":var z="ui-input-text-normal";void 0!==r.format&&(z="ui-input-text-normal-"+r.format),i+=C,i+='<label class="nw_label nw_widgets '+k+" "+v+'" type="label" id="label_'+r.name+'"  '+w+' for="'+r.name+'">'+r.label+"</label>",i+='<div class="'+z+" ui-input-text-time-nw ui-input-text ui-body-inherit ui-corner-all ui-shadow-inset "+k+'">',i+="<input "+d+" "+p+" "+x+" "+D+" "+u+' type="time" '+s+' id="'+r.name+'" name="'+r.name+'" ',i+='class="nw_dateField nw_widgets time_input ',i+=r.name,i+=" ",i+=_,i+=' "',i+=y,i+=" ",i+=l,i+="/ ></div>";break;case"dateTime":i+=C,i+='<label class="nw_label nw_widgets '+k+" "+v+'" type="label" id="label_'+r.name+'"  '+w+' for="'+r.name+'">'+r.label+"</label>",i+='<div class="ui-input-text ui-body-inherit ui-corner-all ui-shadow-inset '+k+'">',i+="<input "+d+" "+p+" "+x+" "+D+'  type="text" '+s+' id="'+r.name+'" name="'+r.name+'" '+u+" ",i+='class="nw_dateField nw_widgets dateTimeLocal ',i+=r.name,i+=" ",i+=_,i+=' "',i+=y,i+=" ",i+=l,i+="/ ></div>";break;case"colorField":i+=C,i+='<label class="nw_label nw_widgets '+k+" "+v+'" type="label" id="label_'+r.name+'"  '+w+' for="'+r.name+'">'+r.label+"</label>",i+='<div class="ui-input-text ui-body-inherit ui-corner-all ui-shadow-inset '+k+'">',i+="<input "+d+" "+p+" "+x+" "+D+'  type="color" '+s+' id="'+r.name+'" name="'+r.name+'" '+u+" ",i+='class="nw_colorField nw_widgets ',i+=r.name,i+=" ",i+=_,i+=' "',i+=y,i+=" ",i+=l,i+="/ ></div>";break;case"selectBox":var q="",H="";void 0!==r.mode&&("multi"!=r.mode&&"multiple"!=r.mode||(q="multiple ",H=' data-nwmultiple="true" ')),!1===s?s=" disabled ":!0===s&&(s=""),i+=C,i+='<label class="select nw_label nw_label_selectbox nw_widgets '+k+" "+v+'" type="label" id="label_'+r.name+'" '+w+'  for="'+r.name+'">'+r.label+"</label>",i+='<div class="ui-select '+k+'">',i+='<div id="'+r.name+'-button" class="ui-btn ui-icon-carat-d ui-btn-icon-right ui-corner-all ui-shadow" '+u+" >",i+="<select "+p+" "+D+" "+H+"  "+q+" "+s+' type="'+r.type+'" id="'+r.name+'" name="'+r.name+'" '+u+" ",i+='class="nw_selectBox nw_widgets ',i+=r.name,i+=" ",i+=_,i+=' "',i+=y,i+=" ",i+=l,i+=" >",i+="</select>",i+="</div>",i+="</div>",void 0!==r.buttonQuit&&1==r.buttonQuit&&(i+="<button type='button' id='button_"+r.name+"' name='button_"+r.name+"' style='float: right'>Quitar</button>");break;case"radio":i+=C,i+='<div class="ui-input-text-radio '+k+'">',i+='<label class="select nw_label nw_label_selectbox nw_widgets '+k+" "+v+'" type="label" id="label_'+r.name+'" '+w+'  for="'+r.name+'">'+r.label+"</label>",i+='<div class="ui-controlgroup-controls  '+k+'">',"div"===r.mode_div?i+='<div data-type="radio" id="'+r.name+'" class="radio_fieldset_nwform radio_for_'+r.name+'" data-role="controlgroup" data-iconpos="right"></div>':i+='<fieldset data-type="radio" id="'+r.name+'" class="radio_fieldset_nwform radio_for_'+r.name+'" data-role="controlgroup" data-iconpos="right"></fieldset>',i+="</div>",void 0!==r.buttonQuit&&1==r.buttonQuit&&(i+="<button type='button' id='button_"+r.name+"' name='button_"+r.name+"' style='float: right'>Quitar</button>"),i+="</div>";break;case"signature":i+='<div class="ui-input-text ">',(W={}).className="nw_signature_widget btnForm ui-shadow ui-btn ui-corner-all ui-btn-inline "+_+" "+r.name,W.id=r.name,W.name=r.name,W.text="<i class='material-icons'>rate_review</i> "+r.label,W.type="button",!(W.position="center")!==nw.validateBtnMaterialIcons(r.icon)?W.icon=r.icon+" false elinicon_form":W.icon=r.icon,W.style=u,W.colorBtnBackIOS=r.colorBtnBackIOS,W.getHTML=!0,W.addAttributes=[],i+=nw.createButton(W),i+="<div class='fileUpShow fileUpShow_"+r.name+"'></div>",i+="<input "+D+" "+S+" "+u+' type="hidden" id="'+r.name+'" name="'+r.name+'" '+s+' data-clear-btn="true" ',i+='class="text nw_textField nw_widgets nw_textField_'+r.name+" ",i+=r.name,i+=" ",i+=" ",i+=_,i+=" ",i+=' "',i+=l,i+=" ",i+=y,i+="/ >",i+="</div>";break;case"location":i+='<div class="ui-input-text ">',(W={}).className="nw_location_widget btnForm ui-shadow ui-btn ui-corner-all ui-btn-inline "+_+" "+r.name,W.id=r.name,W.name=r.name,W.text="<i class='material-icons'>add_location</i> "+r.label,W.type="button",!(W.position="center")!==nw.validateBtnMaterialIcons(r.icon)?W.icon=r.icon+" false elinicon_form":W.icon=r.icon,W.style=u,W.colorBtnBackIOS=r.colorBtnBackIOS,W.getHTML=!0,W.addAttributes=[],i+=nw.createButton(W),i+="<input "+D+" "+S+' style="display:none;" type="location" id="'+r.name+'" name="'+r.name+'" '+s+' data-clear-btn="true" ',i+='class="text nw_textField nw_widgets nw_textField_'+r.name+" ",i+=r.name,i+=" ",i+=" ",i+=_,i+=" ",i+=' "',i+=l,i+=" ",i+=y,i+="/ >",i+="</div>";break;case"button":i+='<div class="ui-input-text ">',"undefined"!=r.width&&"center"==r.width&&(i+="<center>");var V="",j="",G=r.label;void 0!==r.mode&&("camera_files"===r.mode?j="nwButtonCameraAndFiles":"camera"===r.mode?j="nwButtonCamera":"files"===r.mode&&(j="nwButtonCameraFiles"),"camera"!==r.mode&&"files"!==r.mode&&"camera_files"!==r.mode||(V="<div class='fileUpShow fileUpShow_"+r.name+"'></div>",G="<i class='material-icons'>camera_alt</i> "+r.label));var W;E="";1==r.offline&&(E=' data-offline="true" '),(W={}).className="nw_button "+j+" btnForm ui-shadow ui-btn ui-corner-all ui-btn-inline "+_+" "+r.name,W.id=r.name,W.name=r.name,W.text=G,W.type="button",!(W.position="center")!==nw.validateBtnMaterialIcons(r.icon)?W.icon=r.icon+" false elinicon_form":W.icon=r.icon,W.style=u,W.colorBtnBackIOS=r.colorBtnBackIOS,W.getHTML=!0,W.addAttributes=[];var J=0;nw.evalueData(r.quality)&&(W.addAttributes[J]={name:"quality",value:r.quality},J++),nw.evalueData(r.cameraWidth)&&(W.addAttributes[J]={name:"cameraWidth",value:r.cameraWidth},J++),nw.evalueData(r.cameraHeight)&&(W.addAttributes[J]={name:"cameraHeight",value:r.cameraHeight},J++),nw.evalueData(r.allowEdit)&&(W.addAttributes[J]={name:"allowEdit",value:r.allowEdit},J++),nw.evalueData(r.offline)&&(W.addAttributes[J]={name:"offline",value:r.offline},J++),i+=nw.createButton(W),"undefined"!=r.width&&"center"==r.width&&(i+="</center>"),i+=V,"camera"!==r.mode&&"files"!==r.mode&&"camera_files"!==r.mode||(i+="<input "+D+" "+S+" "+u+' type="hidden" id="'+r.name+'" name="'+r.name+'" '+s+' data-clear-btn="true" ',i+='class="text nw_textField nw_widgets nw_textField_'+r.name+" ",i+=r.name,i+=" ",i+=" ",i+=_,i+=" ",i+=' "',i+=l,i+=" ",i+=y,i+="/ >"),i+="</div>";break;case"textArea":i+=C,i+='<label class="nw_label nw_widgets '+k+" "+v+'" type="label" id="label_'+r.name+'" '+w+' for="'+r.name+'">'+r.label+"</label>",i+='<div class="ui-input-text ui-body-inherit ui-corner-all ui-shadow-inset '+k+'">',i+="<textarea "+p+" "+x+" "+g+" "+f+" "+D+" "+u+"  "+s+' type="'+r.type+'" id="'+r.name+'" name="'+r.name+'" ',i+='class="nw_textArea nw_widgets ',i+=r.name,i+=" ",i+=_,i+=' "',i+=y,i+=l,i+="  >",i+="</textarea></div>";break;case"range":var K="100";void 0!==r.rangeMax&&(K=r.rangeMax);var Y="0";void 0!==r.rangeMin&&(Y=r.rangeMin);var Z="";void 0!==r.data&&(Z=" value='"+r.data+"' "),i+=C,i+='<div class="ui-input-text-range ui-input-text ui-body-inherit ui-corner-all ui-shadow-inset '+k+'">',i+='<label class="nw_label nw_label_range nw_widgets '+v+'" type="label" id="label_'+r.name+'" '+w+' for="'+r.name+'">'+r.label+"</label>",i+="<input "+Z+" "+p+' min="'+Y+'" max="'+K+'" '+D+" "+s+' type="number" id="'+r.name+'" name="'+r.name+'" '+u+" ",i+='class="nw_checkBox sliderRange nw_widgets '+k+" ",i+=r.name,i+=" ",i+=_,i+=' "',i+=l,i+="  >",i+="</input>",i+="</div>";break;case"checkBox":i+=C,i+="<input "+p+" "+D+" "+s+' type="'+r.type+'" id="'+r.name+'" name="'+r.name+'" '+u+" ",i+='class="nw_checkBox nw_widgets '+k+" ",i+=r.name,i+=" ",i+=_,i+=' "',i+=l,i+="  >",i+="</input>",i+='<label class="nw_label nw_label_checkbox nw_widgets '+v+'" type="label" id="label_'+r.name+'" '+w+' for="'+r.name+'">'+r.label+"</label>";break;case"ckeditor":haveCkeditor.push(r.name),i+=C,i+='<label class="nw_label nw_widgets '+v+'" type="label" id="label_'+r.name+'" '+w+' for="'+r.name+'">'+r.label+"</label>",i+="<textarea "+p+" "+D+' style="display: inline;" '+s+' type="'+r.type+'" id="'+r.name+'" name="'+r.name+'" '+u+' cols="40" ',i+='class="nw_textArea nw_ckeditor ckeditor nw_widgets ',i+=r.name,i+=" ",i+=_,i+=' "',i+=y,i+=l,i+="  >",i+="</textarea>";break;default:console.log("No existe el tipo seleccionado "+r.type),nw.console.log("No existe el tipo seleccionado "+r.type)}void 0!==r.fields&&(i+=nw.createFieldsForms.getInfoFields(r.fields)),"startGroup"!=r.type&&"endGroup"!=r.type&&(i+="</div>"),t+=i}return t}}}),nw.Class.define("nw.lists",{extend:nw.object,construct:function(){var e=this;e.id_form="nw_list_"+nw.createRandomId(),e.canvas="#"+mainNW.id,e.columns="",e.columnsHTML="",e.showContextMenu=!1,e.isPopulate=!1,e.allDataInitial=!1,e.usePagination=!1,e.usePaginationTextFoot="Mostrando registros del {inicio} al {fin} de un total de {total} registros",e.usePaginationTextNext="Siguiente",e.usePaginationTextPrevious="Anterior",e.usePaginationData={pageSize:10,textNext:e.usePaginationTextNext,textPrevious:e.usePaginationTextPrevious,textFoot:e.usePaginationTextFoot},e.transition=config.defaultPageTransition,e.columnsInTable=!1,e.clicRow=function(){},e.__showZeroRows=null,e.up=nw.userPolicies.getUserData(),e.filterable=!1,e.formContainer=null},destruct:function(){},members:{up:null,searchInList:function(e,n,a,t,o){var i=this;if(!i.usePagination)return i.searchInListExec(e,n,a,t,o);var r=e.value;nw.evalueData(r)?(i.isPopulate=!1,nw.remove(i.canvas+" .containPaginationNwmaker"),i.setModelData(i.allDataInitial,!0),i.searchInListExec(e,n,a,t,o)):(i.isPopulate||(i.createPagination(),i.setModelData(i.allDataInitial)),i.isPopulate=!0)},searchInListClean:function(){nw.utils.removeClass(this.canvas+" .rowlist","ocultar_fila_busqueda")},searchInListExec:function(e,n,a,t,o){var i=null;nw.evalueData(t)&&(i=t.key);var r=e.value;if(!nw.evalueData(r))return this.searchInListClean(),!1;"Backspace"==i&&this.searchInListClean(),r=r.toLowerCase();for(var l=a.length,s=0;s<n.length;s++){var c=n[s];if(nw.evalueData(c)){var u=this.canvas+" .row_id_"+c.id;nw.utils.addClass(nw.getElement(u),"ocultar_fila_busqueda");for(var d=!1,p=0;p<l;p++){var g=c[a[p]];if(nw.evalueData(g)&&!d)-1!==g.toLowerCase().indexOf(r)?(nw.utils.removeClass(u,"ocultar_fila_busqueda"),d=!0):nw.utils.addClass(nw.getElement(u),"ocultar_fila_busqueda")}}}if("Backspace"==i){var m=new KeyboardEvent("keyup",{which:17,key:"Control",code:"ControlLeft",keyCode:17,charCode:0});document.querySelector("#buscar_chat").dispatchEvent(m)}nw.evalueData(o)&&o()},actionCol:function(e,n){$(this.canvas).on("click",".rowName_"+e,function(){$(this.parentElement).trigger({type:"click"}),n(this)})},getRecordsAlter:function(e){for(var n=document.querySelector("#"+this.id+" .tableInListDesktop").rows,a=[],t=0;t<n.length;t++){for(var o=n[t],i={},r=!1,l=0;l<o.cells.length;l++){var s=o.cells[l];if("TH"!=s.nodeName&&"TD"==s.nodeName){var c=s.querySelector("div");if(null==c)continue;i[this.columns[l].label]=c.innerHTML,r=!0}}0!=r&&a.push(i)}return a},exportExcel:function(e,n){var a=[],t={},o=this.columns;nw.evalueData(n)&&(o=n);for(var i=0;i<o.length;i++){var r=o[i],l={};l[0]=r.name,l[1]=r.label,l[2]=void 0!==r.type?r.type:"",a.push(l),t[r.name]=r.label}var s=this.getAllData();void 0!==e&&nw.evalueData(e)&&(s=e);var c=new nw.rpc(nw.getRpcUrl(),"exportExcel");c.setAsync(!0),c.setLoading(!0);var u={};u.records=[s],u.exportCols=a,u.encBoolean="false",u.img_plot=!1,u.cols=[],u.cols[0]="separado_por",u.cols[1]="encabezado_boolean",u.labels=t,u.maxEncRows=10,c.exec("exportPHPExcelSimple",u,function(e){try{if(void 0!==e.id&&""!=e.id&&null!=e.id&&void 0!==e.id&&""!=typeof e.id&&null!=typeof e.id)return void(window.location.href="/nwlib6/downloader.php?id="+e.id+"&key="+e.key)}catch(e){console.log(e),nw.errorLogger.process(e)}})},exportCsv:function(e,n){var a=[],t={},o=[],i=this.columns;nw.evalueData(n)&&(i=n);for(var r=0;r<i.length;r++){var l=i[r],s={};s[0]=l.name,s[1]=l.label,s[2]=void 0!==l.type?l.type:"",a.push(s),t[l.name]=l.label,o[r]=l.name}var c=this.getAllData();void 0!==e&&nw.evalueData(e)&&(c=e);var u=new nw.rpc(nw.getRpcUrl(),"exportExcel");u.setAsync(!0),u.setLoading(!0);var d={};d.records=[c],d.exportCols=a,d.encBoolean="false",d.img_plot=!1,d.cols=o,d.labels=t,d.maxEncRows=10,d.separado_por=";",d.noExportColumns=[],u.exec("exportSimple",d,function(e){try{if(void 0!==e.id&&""!=e.id&&null!=e.id&&void 0!==e.id&&""!=typeof e.id&&null!=typeof e.id)return void(window.location.href="/nwlib6/downloader.php?id="+e.id+"&key="+e.key)}catch(e){console.log(e),nw.errorLogger.process(e)}})},reject:function(){return nw.reject(this)},getAppName:function(){return this.canvas},evalueData:function(e){return nw.evalueData(e)},contextMenu:function(){return!1},selectedRow:!1,selectedRowWidget:!1,applyFilters:function(){return!1},ui:[],clean:function(){$(this.getContainer()+" .rowlist_"+this.id).remove()},getAllDataInitial:function(){return nw.evalueData(this.allDataInitial)?this.allDataInitial:this.getAllData()},getAllData:function(){for(var e=$(this.canvas+" .rowlist_"+this.id),n=[],a=0,t=0;t<e.length;t++){var o=e[t];if(!o.classList.contains("ocultar_fila_busqueda")){var i=o.data;n[a]=i,a++}}return n},getContainer:function(){var e=this,n=e.canvas;return document.querySelector(e.canvas+" > .contentCenter")?n=e.canvas+" > .contentCenter":document.querySelector(e.canvas+" > .ui-dialog-contain")&&(n=e.canvas+" > .ui-dialog-contain"),n},clicRowExec:function(){var a=this;nw.nclick($(a.canvas+" .rowlist_"+a.id+" .containerListRow"),function(e){var n=$(e).parent()[0];$(a.canvas+" .rowlist_"+a.id).removeClass("activeRow"),$(n).addClass("activeRow"),nw.contextmenuClear(a),a.activeRow=n,a.selectedRow=n.data,a.selectedRowWidget=n,a.clicRow()}),nw.nclick($(a.canvas+" .rowlist_"+a.id+" .menuList"),function(e){var n=$(e).parent()[0];$(a.canvas+" .rowlist_"+a.id).removeClass("activeRow"),$(n).addClass("activeRow"),nw.contextmenuClear(a),a.activeRow=n,a.selectedRow=n.data,a.selectedRowWidget=n,a.contextMenu()})},showZeroRows:function(e){null===this.__showZeroRows&&(nw.utils.showZeroRows(this,e),this.__showZeroRows=!0)},selectedRowsActive:!1,selectedRowsChecked:[],selectedRowsiconEmpty:"",selectedRowsiconChecked:"",selectedRows:function(n){var a=this;if(a.selectedRowsChecked=[],a.selectedRowsActive)return!1;var e=!0;!1===n.showButtons&&(e=!1);var t="check_box";void 0!==n.icon&&(t=n.icon);var o="check_box_outline_blank";if(void 0!==n.iconEmpty&&(o=n.iconEmpty),e){var i=document.createElement("div");i.className="containBtnsCheckSelectRows",document.querySelector(a.canvas).appendChild(i);var r=document.createElement("div");r.className="btnCheckSelectRows cancelCheckSelectRows",r.innerHTML="<i class='material-icons'>close</i>Cancelar",r.onclick=function(){i.remove(),$(a.canvas).find(".rowlist_"+a.id).find(".checkSelectRows").remove(),a.selectedRowsActive=!1,a.selectedRowsChecked=[]},i.appendChild(r);var l=document.createElement("div");l.className="btnCheckSelectRows acceptCheckSelectRows",l.innerHTML="<i class='material-icons'>check</i>Aceptar",l.onclick=function(){i.remove(),$(a.canvas).find(".rowlist_"+a.id).find(".checkSelectRows").remove(),a.selectedRowsActive=!1;var e=a.getAllChecksRows();n.callback(e),a.selectedRowsChecked=[]},i.appendChild(l)}var s=document.querySelectorAll(a.canvas+" .rowlist_"+a.id+" .containerListRow");a.columnsInTable&&(s=document.querySelectorAll(a.canvas+" .rowlist_"+a.id));for(var c=0;c<s.length;c++){var u=s[c],d=document.createElement("div");d.className="checkSelectRows",d.innerHTML="<i class='material-icons'>"+o+"</i>",d.data={ops:n,icon:t,iconEmpty:o,row:u,id:c},d.onclick=function(){a.selectedChecksRows(this)},u.prepend(d)}a.selectedRowsActive=!0,a.selectedRowsiconEmpty=o,a.selectedRowsiconChecked=t},checkBeforeRows:function(e){var n=this,a=document.querySelectorAll(n.canvas+" .rowlist_"+n.id),t=document.querySelectorAll(n.canvas+" .rowlist_"+n.id+" .containerListRow");n.columnsInTable&&(t=document.querySelectorAll(n.canvas+" .rowlist_"+n.id));for(var o=0;o<t.length;o++){if(-1!==e.indexOf(o)){var i=a[o];if(i){var r=i.data,l=t[o].querySelector(".checkSelectRows");n.selectedChecksRows(l,r)}}}},selectedChecksRows:function(e,n){var a=this,t=e.data,o=t.ops,i=t.icon,r=t.iconEmpty,l=e.getAttribute("checked");if("checked"===l?(e.innerHTML="<i class='material-icons'>"+r+"</i>",e.setAttribute("checked",""),a.selectedRowsChecked[t.id]=!1,nw.removeClass(e,"checkSelectRows_checked",!0)):(e.innerHTML="<i class='material-icons'>"+i+"</i>",e.setAttribute("checked","checked"),setTimeout(function(){var e=a.selectedRecord();void 0!==n&&nw.evalueData(n)&&(e=n),a.selectedRowsChecked[t.id]=e},200),nw.addClass(e,"checkSelectRows_checked")),void 0!==o.callbackOnCheck){var s={};s.element=e,s.data=t,o.callbackOnCheck(l,s)}},unselectedChecksRows:function(e){console.log("exception",e);var n=this.selectedRowsiconEmpty,a=document.querySelectorAll(this.canvas+" .checkSelectRows");if(a&&0<a.length)for(var t=0;t<a.length;t++){var o=a[t],i=o.data;i.id!==e&&(o.innerHTML="<i class='material-icons'>"+n+"</i>",o.setAttribute("checked",""),this.selectedRowsChecked[i.id]=!1,nw.removeClass(o,"checkSelectRows_checked",!0))}},getAllChecksRows:function(){for(var e=0,n=[],a=0;a<this.selectedRowsChecked.length;a++){var t=this.selectedRowsChecked[a];!1!==t&&void 0!==t&&(n[e]=t,e++)}return n},selectedRecord:function(){return this.selectedRow},setColumns:function(e){var n=this;n.columns=e;var a=document.createElement("div");a.id=n.id_form,a.className="nwlist "+n.id_form,a.innerHTML="<div class='containTable'>"+n.listStructureTable()+"</div>",$(n.getContainer()).append(a)},createPagination:function(){nw.remove(this.canvas+" .containPaginationNwmaker");var e=this.usePaginationData.textFoot,n='<div class="pagin-foot">';n+=e=(e=(e=e.replace("{inicio}","<span class='pagin-numberinit'>1</span>")).replace("{fin}","<span class='pagin-numberend'>1</span>")).replace("{total}","<span class='pagin-numbertotal'>0</span>"),n+="</div>",n+='<ul class="pagination"></ul>';var a=document.createElement("div");a.className="containPaginationNwmaker",a.innerHTML=n,$(this.canvas+" .containTable").append(a)},numberRow:0,addNumberRow:function(){return this.numberRow++},find:function(e){return nw.utils.getElement(this.canvas+" "+e)},removeSelectedRecord:function(){var e=this.selectedRow,n=this.selectedRowWidget;console.log("row",e),console.log("widget",n),this.removeRow(n)},removeRow:function(e,n){nw.evalueData(e)?$(e).remove():void 0!==n&&$(".task_file_row_"+n).remove()},setPaginationData:null,setPaginationStateLimit:0,setPaginationActual:1,setPaginationTotalRecords:0,setPaginationTotalPages:0,setPaginationPagesParts:0,setPaginationStateprevious:1,setPagination:function(e){var n=this;n.setPaginationData=null,n.setPaginationStateLimit=0,n.setPaginationActual=1,n.setPaginationTotalRecords=0,n.setPaginationTotalPages=0,n.setPaginationPagesParts=0,n.setPaginationStateprevious=1,n.usePagination&&(nw.evalueData(n.usePaginationData.textNext)||(n.usePaginationData.textNext=n.usePaginationTextNext),nw.evalueData(n.usePaginationData.textPrevious)||(n.usePaginationData.textPrevious=n.usePaginationTextPrevious),nw.evalueData(n.usePaginationData.textFoot)||(n.usePaginationData.textFoot=n.usePaginationTextFoot),n.createPagination()),n.setPaginationData=e,n.setPaginationTotalRecords=n.setPaginationData.length,n.setPaginationTotalPages=n.setPaginationTotalRecords/n.usePaginationData.pageSize,n.setPaginationStateLimit=n.usePaginationData.pageSize,document.querySelector(n.canvas+" .pagin-numbertotal").innerHTML=n.setPaginationTotalRecords,(t=document.createElement("li")).className="page-item page-item-previous",t.innerHTML="<span class='page-link'>"+n.usePaginationData.textPrevious+"</span>",t.onclick=function(){n.paginationChange(n.setPaginationActual-1)},document.querySelector(n.canvas+" .pagination").appendChild(t);for(var a=0;a<n.setPaginationTotalPages;a++){var t,o=a+1;(t=document.createElement("li")).className="page-item-pag page-item-pag-"+o,t.innerHTML="<span class='page-link'>"+o+"</span>",t.data=o,t.onclick=function(){n.paginationChange(this.data)},document.querySelector(n.canvas+" .pagination").appendChild(t),n.setPaginationPagesParts=o}(t=document.createElement("li")).className="page-item page-item-next",t.innerHTML="<span class='page-link'>"+n.usePaginationData.textNext+"</span>",t.onclick=function(){n.paginationChange(n.setPaginationActual+1)},document.querySelector(n.canvas+" .pagination").appendChild(t),n.paginationChange(1)},paginationChange:function(e){var n=this;n.setPaginationActual=e,n.setPaginationActual>n.setPaginationPagesParts&&(n.setPaginationActual=n.setPaginationPagesParts),n.setPaginationStateLimit>n.setPaginationTotalRecords&&(n.setPaginationStateLimit=n.setPaginationTotalRecords),n.setPaginationStateLimit=n.usePaginationData.pageSize*n.setPaginationActual,n.setPaginationStateprevious=n.setPaginationStateLimit-n.usePaginationData.pageSize,n.setPaginationStateprevious<0&&(n.setPaginationStateLimit=n.usePaginationData.pageSize,n.setPaginationStateprevious=0,n.setPaginationActual=1),nw.removeClass(n.canvas+" .page-item-pag","page-item-pag-active"),nw.addClass(n.canvas+" .page-item-pag-"+n.setPaginationActual,"page-item-pag-active"),n.setModelDataPagination()},setModelDataPagination:function(){var e=this;e.clean(),e.setPaginationStateLimit>e.setPaginationTotalRecords&&(e.setPaginationStateLimit=e.setPaginationTotalRecords),document.querySelector(e.canvas+" .pagin-numberinit").innerHTML=e.setPaginationStateprevious,e.setPaginationStateprevious<=0&&(document.querySelector(e.canvas+" .pagin-numberinit").innerHTML=1),document.querySelector(e.canvas+" .pagin-numberend").innerHTML=e.setPaginationStateLimit;for(var n=e.setPaginationStateprevious;n<e.setPaginationStateLimit;n++){var a=e.setPaginationData[n];nw.evalueData(a)&&e.addRow(a)}},setModelData:function(e,n,a,t,o){var i=this;if(!1!==t&&i.clean(),0!==(i.allDataInitial=e).length||!1===t)if(i.usePagination&&!0!==n)i.setPagination(e);else for(var r=0;r<e.length;r++){var l=e[r];i.addRow(l,null,null,a,!1,o)}else i.showZeroRows("No se encontraron registros")},addRow:function(s,e,n,a,t,o){var c=this,i=c.addNumberRow(),r=c.columns,l="rowlist_"+i;!0===o&&nw.utils.evalueData(s.id)&&(l=s.id),a&&(l=c.id+"_rowlist_"+i);var u=document.createElement("li");if(!0===c.columnsInTable)u=document.createElement("tr");u.href="#",u.id=l,u.data=s,nw.evalueData(t)||(t="");var d=s.className?"nw_row_"+s.className:"",p=t+" rowlist rowlist_"+c.id+" "+c.id+"_rowlist_"+i+" rowlist_"+i+" ui-btn ui-btn-icon-right ui-icon-carat-r "+d;!0===c.columnsInTable&&(p=t+" rowlist rowlist_"+c.id+" rowlistTabled "+c.id+"_rowlist_"+i+" rowlist_"+i+" ui-btn-icon-right ui-icon-carat-r "+d),nw.evalueData(s.addClassNameRow)&&(p+=" "+s.addClassNameRow+" ");for(var g="",m=0;m<r.length;m++){var f=r[m],w=f.name,v=f.label;v=nw.utils.tr(v);var h="",b=" rowName_"+f.name+" ",_="",y="",k="",C="",D=f.mode,S=f.type;$.each(s,function(e,n){!1===f.visible&&(h=" rowNoVisible"),f.className&&(b=" nw_contain_"+f.className+" "),nw.evalueData(f.addClassName)&&(_=" "+f.addClassName+" "),f.style&&(f.style.contenedor&&(y="style='"+f.style.contenedor+"'"),f.style.label&&(k="style='"+f.style.label+"'"),f.style.data&&(C="style='"+f.style.data+"'"));var a=s[e];nw.evalueData(a)||(a="");var t="";if("date_format"===D||"date_format_abrev"===D){var o=!1;if("date_format_abrev"===D&&(o=!0),nw.evalueData(a))t=" data-date='"+a+"' ",a=nw.calcularTiempoDosFechas(a,!1,o).dateInFormat}if("money"===D&&nw.evalueData(a)&&(a="$"+nw.addNumber(a)),"html"===D&&nw.evalueData(a),"numeric"===D&&nw.evalueData(a)&&(a=nw.addNumber(a)),"button"===S&&nw.evalueData(a)&&(a="<button class='buttonInList'>"+a+"</button>"),"image"===S){var i="<i class='material-icons'>image</i>",r="";if(nw.evalueData(a))if(i="","phpthumb"===D){void 0!==D.split(".")[1]&&D.split(".")[1],r="style='background-image: url("+config.domain_rpc+nw.getFileByType(a,100)+");'"}else r="style='background-image: url("+a+");'";a="<span class='imgListType' "+r+" >"+i+"</span>"}if("addClass"===e&&nw.utils.evalueData(n)&&(p+=" "+n+" "),w==e){"id"===e&&(p+=" row_id_"+n);var l="";nw.evalueData(a)||(l="row_empty"),"startGroup"===S?g+="<div class='startGroupList'>":"endGroup"===S?g+="</div>":!1===c.columnsInTable?g+="<div class='colRow "+l+" "+h+b+" "+_+" ' "+y+" "+t+"><strong class='divcol labelcol' "+k+">"+v+"</strong> <div class='divcol datacol' "+C+">"+a+"</div></div>":g+="<td class='colRow colRowInTabled "+l+" "+h+b+" "+_+" ' "+y+" "+t+"><div class='divcol datacol' "+C+">"+a+"</div></td>"}})}u.className=p;var x="";c.showContextMenu&&!1===c.columnsInTable&&(x+="<div class='menuList menuList_"+c.id+"'>"+nw.getBtnMaterialIcons("material-icons more_vert")+"</div>"),!0===c.columnsInTable?(x+=g,c.showContextMenu&&(x+="<td class='menuList menuListInTabled menuList_"+c.id+"'>"+nw.getBtnMaterialIcons("material-icons more_vert")+"</td>")):x+="<div class='containerListRow'>"+g+"</div>",u.innerHTML=x;var N=(c.ui[i]=u).querySelector(".containerListRow");!0===c.columnsInTable&&(N=u),N&&nw.nclick(N,function(e){var n=e;nw.utils.getDebug()&&(console.log("%c<<<<DEBUG: starting :::CLICK IN ROW:::>>>>","background: orange; color: #000"),console.log("element",n));var a=$(n).parent()[0];!0===c.columnsInTable&&(a=$(n)[0]),$(c.canvas+" .rowlist_"+c.id).removeClass("activeRow"),$(a).addClass("activeRow"),nw.contextmenuClear(c),c.activeRow=a,c.selectedRow=a.data,c.selectedRowWidget=a,c.clicRow()}),c.ui[i].addListener=function(e,n){"execute"!==e&&"click"!==e||nw.nclick(this,n)},c.ui[i].populateSelectAsync=function(e,n,a,t){nw.populateSelect(i,c,e,n,a,t,!0)},c.ui[i].populateSelect=function(e,n,a,t,o){nw.populateSelect(i,c,e,n,a,t,o)},c.ui[i].populateSelectFromArray=function(e){nw.populateSelectFromArray(c,e,i)};var E=u.querySelector(".menuList");E&&nw.nclick(E,function(e){var n=e;nw.utils.getDebug()&&(console.log("%c<<<<DEBUG: starting :::CLICK IN ROW MENULIST:::>>>>","background: orange; color: #000"),console.log("element",n));var a=$(n).parent()[0];$(c.canvas+" .rowlist_"+c.id).removeClass("activeRow"),$(a).addClass("activeRow"),nw.contextmenuClear(c),c.activeRow=a,c.selectedRow=a.data,c.selectedRowWidget=a,c.contextMenu()});var I=$(c.getContainer()+" > .nwlist > .containTable > .uiListRows");return nw.evalueData(n)?"object"==typeof n?(I=n.row,"before"==n.mode?I.before(u):"after"==n.mode?I.after(u):"append"==n.mode?I.append(u):"prepend"==n.mode&&I.prepend(u)):"prepend"==n?I.prepend(u):I.append(u):I.append(u),l},createFilters:function(e){var n=this;n.fieldsFilters=e,n.columnsFilters=nw.createFields("#"+n.id_form,e,"","",n.columnsForm,n),n.createFormContainer(),n.formContainer.innerHTML=n.columnsFilters,$("#"+n.id_form).find("button, label, input, .radio_fieldset_nwform, input:password, input:file, select, textarea, button, .nw_html, .nw_form_start_group").each(function(){n.setFielsUI(this)}),$(n.canvas+" .selectSwitch").slider()},createFormContainer:function(){var e=this;return null===e.formContainer&&(e.formContainer=document.createElement("div"),e.formContainer.id=e.id_form,e.formContainer.className="containFilters",$(e.canvas).find(".containTable").before(e.formContainer),$(e.canvas).find(".containTable").css({"padding-top":"60px"}),!0)},createFiltersFooter:function(e){var n=this;n.columnsFiltersFooter=nw.createFields("#"+n.id_form,e,"","",n.columnsForm,n);var a=document.createElement("div");a.className="columnsFiltersFooter",a.innerHTML=n.columnsFiltersFooter,$(n.canvas).find(".containTable").after(a),$(n.canvas).find(".containTable").css({"padding-top":"60px"}),$("#"+n.id_form).find("button, label, input, .radio_fieldset_nwform, input:password, input:file, select, textarea, button, .nw_html, .nw_form_start_group").each(function(){n.setFielsUI(this)}),$(n.canvas+" .selectSwitch").slider()},setFielsUI:function(e){nw.setFields(this,e)},getFiltersData:function(e){return void 0===(e=!0)&&(e=!1),nw.getRecords("#"+this.id_form,e,this)},hideColumn:function(e){return!0},getRpcUrl:function(){return nw.getRpcUrl()},show:function(){var e=this,n=e.transition;if(!0===config.nativeTransitions&&(n="none"),nw.changePage("#"+e.id,{transition:n,reverse:!1,changeHash:e.changeHash,reloadPage:!1,showLoadMsg:!0,role:e.role,allowSamePageTransition:!1}),nw.addButtonsPage(this),void 0!==e.fieldsFilters){for(var a="",t=0;t<e.fieldsFilters.length;t++){var o=e.fieldsFilters[t];"search"==o.type&&(a+="."+o.name)}""!=a&&$(e.canvas+" .uiListRows").filterable({input:a})}},addHeaderNote:function(e){nw.addHeaderNote("."+this.id_form,e)},setmargin:function(){var e=document.querySelector(this.canvas+" .header").clientHeight;document.querySelector(this.getContainer()).style.marginTop=e+"px"},onAppear:function(e){return nw.forms.onAppear(this,e)},listStructureTable:function(){var e=this;return nw.lists.listStructureTable(e.columnsInTable,e.columns,e.showContextMenu,e,e.filterable)}},statics:{addValueInModel:function(e,n,a){for(var t=0;t<e.length;t++)e[t][n]=a;return e},listStructureTable:function(e,n,a,t,o,i,r){var l="";void 0===e&&(e=!1);var s="";1==o&&(s=" data-filter='true' data-filter-placeholder='Buscar...' ");var c="__";if(nw.evalueData(t)&&(c=t.id),void 0===i&&(i=""),void 0===r&&(r=""),!1===e)l="<ul "+r+" data-role='listview' data-dom-cache='true' data-inset='true' data-autodividers='true' "+s+" class='"+i+" uiListRows_"+c+" uiListRows ui-listview ui-listview-inset ui-corner-all ui-shadow'></ul>";else{for(var u="",d=0;d<n.length;d++){var p=n[d],g=!0;if(!1===p.visible&&(g=!1),g){var m=p.label;nw.evalueData(p.label)||(m=p.name),u+="<th class='tableColumnsTitleEnc'>"+m+"</th>"}}a&&(u+="<th class='tableColumnsTitleEnc tableColOptionsEncTitle'><i class='material-icons'>format_list_bulleted</i></th>"),l="<table "+r+" data-role='listview' data-dom-cache='true' data-inset='true' data-autodividers='true' "+s+" class='"+i+" tableInListDesktop uiListRows ui-listview ui-listview-inset ui-corner-all ui-shadow'><thead><tr class='tableColumnsRowEnc'>"+u+"</tr></thead></table>"}return l}}}),nw.Class.define("nw.dialogs",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{dialog2:function(e,n,a,t){void 0!==t&&nw.evalueData(t)||(t={});var o=!0;void 0!==t.changeHash&&(o=t.changeHash);var i=!1;void 0!==t.showMinimize&&nw.evalueData(t.showMinimize)&&"object"==typeof t.showMinimize&&(i=t.showMinimize);var r=!1;void 0!==t.removeCloseEnc&&(r=t.removeCloseEnc);var l="dialog2";nw.utils.evalueData(t.id)&&(l=t.id);var s="dialog";nw.utils.evalueData(t.role)&&(s=t.role);var c=!0;nw.utils.evalueData(t.drag)&&(c=t.drag);var u=!1;nw.utils.evalueData(t.showBack)&&(u=t.showBack);var d=!1;nw.utils.evalueData(t.showClose)&&(d=t.showClose);var p=!1;nw.utils.evalueData(t.closeBack)&&(p=t.closeBack);var g="";nw.utils.evalueData(t.setTitle)&&(g=t.setTitle);var m="";nw.utils.evalueData(t.html)&&(m=t.html);var f="pop";nw.utils.evalueData(t.transition)&&(f=t.transition);var w=!1;nw.utils.evalueData(t.createInHome)&&(w=t.createInHome);var v=new nw.forms;v.role=s,v.drag=c,v.closeBack=p,v.changeHash=o,v.showMinimize=i,v.id=l,v.setTitle=g,v.html=m,v.showBack=u,v.showClose=d,v.transition=f,w?(v.canvas=t.canvas,v.id=t.id,v.id_form=t.id_form):v.createBase();var h=!0,b=!0,_="Aceptar",y="Cancelar";void 0!==t.destroyAutomaticOnAccept&&(h=t.destroyAutomaticOnAccept),void 0!==t.destroyAutomaticOnClose&&(b=t.destroyAutomaticOnClose),nw.utils.evalueData(t.textAccept)&&(_=t.textAccept),nw.utils.evalueData(t.textCancel)&&(y=t.textCancel);var k=[];nw.evalueData(e)&&k.push({name:"label",label:"",placeholder:"",type:"html"}),nw.utils.evalueData(t.fields)&&t.fields.forEach(function(e){k.push(e)}),v.setFields(k),v.buttons=[];var C="bottom";return nw.utils.evalueData(t.positionButtons)&&(C=t.positionButtons),!1!==t.showButtons&&(!1!==t.showCancel&&nw.evalueData(a)&&v.buttons.push({position:C,name:"cancelar",label:nw.tr(y),callback:function(){nw.evalueData(a)&&a(),!0===b&&"dialog"===s&&("dialog"===s?(console.log("p.canvas",v.canvas),$(v.canvas).dialog("close")):nw.back())}}),v.buttons.push({position:C,name:"aceptar",label:nw.tr(_),callback:function(){if(!v.validate())return!1;var e=v.getRecord(!0);nw.evalueData(n)&&n(e),!0===h&&"dialog"===s&&("dialog"===s?$(v.canvas).dialog("close"):nw.back())}})),v.show(),nw.evalueData(e)&&v.ui.label.setValue(e),!0===r&&$(v.canvas+" .ui-header").remove(),nw.addClass(nw.getElement(v.canvas),"nw_dialog2"),v},createNotificacionBarInter:function(e){var n,a=4e3;(!1!==nw.evalueData(e.timeToRemove)&&(a=e.timeToRemove),n=document.querySelector(".notifyBarEnc"))||((n=document.createElement("div")).className="notifyBarEnc",document.body.append(n));var t="";if(!1!==nw.evalueData(e.addClass)&&(t=e.addClass,document.querySelector("."+t)))return!0;var o="";nw.evalueData(e.icon)&&(o="<div class='barPhoto' style='background-image: url("+e.icon+")'></div>");var i=document.createElement("div");i.className="liBarEncNotify "+t,i.innerHTML=o,n.appendChild(i),setTimeout(function(){nw.addClass(i,"liBarEncNotifyShow")},100);var r=document.createElement("div");r.className="barTexts",r.innerHTML="<span class='barTitle'>"+e.title+"</span><span class='barBody'>"+e.body+"</span>",r.onclick=function(){if(!nw.evalueData(e.createbtn))if(nw.evalueData(e.callback))try{e.callback(),nw.removeClass(i,"liBarEncNotifyShow",!0),setTimeout(function(){i.remove()},1e3)}catch(e){nw.utils.errorReport("callback failed",e)}else nw.removeClass(i,"liBarEncNotifyShow",!0),setTimeout(function(){i.remove()},1e3)},i.appendChild(r);var l=document.createElement("div");return l.className="barClose",l.innerHTML="<i class='material-icons'>close</i>",e.htmlClose&&(l.innerHTML=e.htmlClose),l.onclick=function(){!1!==nw.evalueData(e.callbackClose)&&e.callbackClose(),nw.removeClass(i,"liBarEncNotifyShow",!0),setTimeout(function(){i.remove()},1e3)},i.appendChild(l),setTimeout(function(){nw.removeClass(i,"liBarEncNotifyShow",!0),!1!==nw.evalueData(e.callbackEndTime)&&e.callbackEndTime(),setTimeout(function(){i.remove()},1e3)},a),!1!==nw.evalueData(e.callbackEnd)&&e.callbackEnd(),i},dialogRemove:function(){$(".popup_pil").remove()},dialog:function(e,n,a,t){return nw.createPopUp(e,n,a,t)},information:function(e,n,a,t){return nw.createPopUp(e,n,a,t)},popupSimple:function(e,n,a,t){return nw.createPopUp(e,n,a,t)},createPopUp:function(e,t,o,n){nw.removeSplash(),"object"==typeof e&&(e=e.html),e=nw.utils.tr(e);var a="Aceptar",i="Cancelar",r="",l="",s="",c="text",u="",d=!1,p=nw.utils.tr(nw.strip_tags(e)),g=!0,m=!0,f=!0;if(nw.evalueData(n)&&(void 0!==n.destroyAutomaticOnAccept&&(m=n.destroyAutomaticOnAccept),void 0!==n.destroyAutomaticOnClose&&(f=n.destroyAutomaticOnClose),"undefined"!==n.useDialogNative&&!1===n.useDialogNative&&(g=!1),"undefined"!==n.cleanHtml&&!1===n.cleanHtml&&(p=e),"undefined"!==n.original&&!0===n.original&&(p=e,g=!1),nw.evalueData(n.textAccept)&&(a=n.textAccept),nw.evalueData(n.autoCierre)&&(d=n.autoCierre),nw.evalueData(n.textCancel)&&(i=n.textCancel),nw.evalueData(n.iconAccept)&&(r=n.iconAccept),nw.evalueData(n.iconCancel)&&(l=n.iconCancel),nw.evalueData(n.prompt_inputTyp)&&(c=n.prompt_inputTyp),nw.evalueData(n.prompt_inputValueDefect)&&(u=n.prompt_inputValueDefect),(!0===n.isprompt&&void 0===navigator.notification||!0===n.isprompt&&!1===g)&&(p+="<div class='contain_prompt_input'><input class='prompt_input' type='"+c+"' value='"+u+"' /></div>")),void 0!==navigator.notification&&!0===g){var w=nw.strip_tags(p),v=a,h=0;function b(e){var n=e;void 0!==e.buttonIndex&&(n=e.buttonIndex);var a="";void 0!==e.input1&&(a=e.input1),n.toString()===h.toString()?nw.evalueData(t)&&t(a):nw.evalueData(o)&&o(a)}return nw.evalueData(o)&&(h=1),nw.evalueData(o)?nw.evalueData(n)&&nw.evalueData(n.isprompt)?navigator.notification.prompt(w,b,nw.utils.tr(""),[nw.utils.tr(a),nw.utils.tr(i)]):navigator.notification.confirm(w,b,nw.utils.tr(""),[nw.utils.tr(a),nw.utils.tr(i)]):navigator.notification.alert(w,b,nw.tr(""),nw.tr(v)),!0}var _="popupil_"+nw.createRandomId(),y="";void 0!==n&&nw.evalueData(n.addClass)&&(y+=n.addClass);var k=document.createElement("div");k.className="popup_pil "+_+" "+y,k.innerHTML="<div class='popup_pil_int'><div class='closeEncPil'></div><div class='popup_pil_text'>"+nw.utils.tr(p)+"</div><div class='popup_pil_btns'></div></div>",document.body.appendChild(k);var C=!0;if(void 0!==n&&(!1===n.showBtnAccept&&(C=!1),void 0!==n.closeEnc&&nw.evalueData(n.closeEnc))){var D=document.createElement("div");D.className="barCloseEnc",D.innerHTML="<i class='material-icons'>close</i>",D.onclick=function(){nw.remove("."+_)},k.querySelector(".closeEncPil").appendChild(D)}if(nw.evalueData(o)){s=" width_midd",(x={colorBtnBackIOS:"#7f7f7f",style:"box-shadow: none;border: 0;background-color: transparent;color:#7f7f7f;"}).text=nw.utils.tr(i),x.className="btnpil_cancel "+s,x.type="button",x.icon=l,x.position="center",x.callback=function(){o(),!0===f&&nw.remove("."+_)};var S=nw.createButton(x);k.querySelector(".popup_pil_btns").appendChild(S)}if(C){var x={colorBtnBackIOS:"#fff",style:""};"undefined"!=typeof config&&(x.colorBtnBackIOS=config.colorBtnBackIOS,x.style=config.styleCloseIOS),x.text=nw.utils.tr(a),x.type="button",x.className="btnpil_acept "+s,x.icon=r,x.position="center",x.callback=function(){var e="";if(nw.evalueData(n)&&nw.evalueData(n.isprompt)&&(e=$(".prompt_input").val(),!nw.evalueData(e)))return $(".prompt_input").focus(),!1;nw.evalueData(t)&&t(e),d||!0===m&&nw.remove("."+_)};S=nw.createButton(x);return k.querySelector(".popup_pil_btns").appendChild(S),k}}}}),nw.Class.define("nw.cube",{extend:nw.object,construct:function(){},statics:{cleanHtml:function(e){return"string"==typeof e?e.replace(/<(?:.|\n)*?>/gm,""):e},orderListByMonths:function(e){for(var n=[],a=["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"],t=!0,o=0;o<a.length;o++)for(var i=a[o],r=0;r<e.length;r++){if(void 0===(d=e[r]).label)return!1;if(-1==a.indexOf(d.label.toUpperCase())){t=!1;break}var l={},s=Object.keys(d);if(i==d.label.toUpperCase()){for(var c=0;c<s.length;c++)l[s[c]]=d[s[c]];l.level=0,n.push(l)}}if(0!=t)return n;n=[],a=["JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"];var u=!0;for(o=0;o<a.length;o++)for(i=a[o],r=0;r<e.length;r++){var d;if(void 0===(d=e[r]).label)return!1;if(-1==a.indexOf(d.label.toUpperCase())){u=!1;break}l={},s=Object.keys(d);if(i==d.label.toUpperCase()){for(c=0;c<s.length;c++)l[s[c]]=d[s[c]];l.level=0,n.push(l)}}return 0!=u&&n},sortByColumn:function(e,n,a){var t=function(e,n){try{var a=e[arguments.callee.columnIndex],t=n[arguments.callee.columnIndex];if("string"==typeof a&&(a=a.toLowerCase()),"string"==typeof t&&(t=t.toLowerCase()),isNaN(a)||isNaN(t))return t<a?1:-1}catch(e){console.log(e)}return a-t};t.columnIndex=n,e.sort(t)},getCols:function(e,n){var a=this,t=[],o=null,i=[];if(null!=n&&(null===n||void 0!==n[0])){for(var r=0;r<n.length;r++){var l=n[r],s=l.columnId,c=l.id;0==r&&a.sortByColumn(a.tableRecords,parseInt(c),!0);for(var u=0;u<a.tableRecords.length;u++){if(o=a.tableRecords[u],0==r){if(-1==t.indexOf(a.tableRecords[u][s]))t.push(a.tableRecords[u][s]),(b=[]).fila=a.tableRecords[u][s],b.label=a.tableRecords[u][s],b.model=a.tableRecords[u][s],b.row=a.tableRecords[u],b.level=r,b.key=s,b.caption=a.tableRecords[u][s],b.columnId=a.tableRecords[u][s],b.typeColumn="COUNT",b.id=1,b.metaColumn="column",e.push(b)}else for(var d=null,p="",g=0;g<i.length;g++){var m=i[g],f=0;p="";var w=!1;if(m.level==r-1)for(var v=r;0<v;v--){var h=g-f;h<0&&(h=0);for(d=i[h];d.level==m.level&&v!=r;)d=i[h-f],f++;if(!(d.level<r))break;if(o[d.key]!=d.fila||d.fila==o[s]){w=!1;break}p=p+d.fila+o[s],w=!0,f++}if(w){var b=[];-1==t.indexOf(p)&&(t.push(p),b.fila=o[s],b.label=new Array(r+1).join("&nbsp;&nbsp;&nbsp;&nbsp;")+o[s],b.model=new Array(r+1).join("&nbsp;&nbsp;&nbsp;&nbsp;")+o[s],b.row=o,b.level=r,b.key=s,b.caption=s,b.columnId=s,b.oldkey=p,b.typeColumn="SUM",e.push(b),i.insertAfter(m,b))}}}}return e}},generateDynamicTable:function(e,n,a,t){var r=this;r.tableRecords=t;var o=[{name:"label",caption:"label",label:"Rótulos de fila",type:"html",sortable:!1}];if(o.push(),r.getCols(o,a),r.__colsSubList=o,void 0!==e&&void 0!==e[0]){for(var i="COUNT",l="",s="",c=0;c<e.length;c++){var u=e[c],d=[];d.name=u.columnId,d.caption=u.columnId,d.columnId=u.columnId,d.model=u.label,d.id=c,1<o.length&&(d.noEnter=!0),"money"!==u.typeColumn&&"dateField"!==u.typeColumn||(d.type=u.typeColumn),"SUM"===u.type?(d.label="Suma de "+u.model,d.typeColumn="SUM"):"COUNT"===u.type?(d.label="Cuenta de "+u.model,d.typeColumn="COUNT",d.type=""):"ABSO"===u.type?(d.label="Valor absoluto de "+u.model,d.typeColumn="ABSO"):"PROM"===u.type?(d.label="Promedio de "+u.model,d.typeColumn="PROM",d.type="prom"):"PERCEN"===u.type&&(d.label="Porcentaje de "+u.model,d.typeColumn="PERCEN",d.type="",d.typeAlter="percent"),o.push(d),i=d.typeColumn,l=d.columnId,s=void 0!==d.typeAlter?d.typeAlter:d.type,""!=typeof d.typeAlter&&delete d.typeAlter}for(c=0;c<o.length;c++)void 0!==o[c].metaColumn&&(o[c].typeColumn=i,o[c].valCaption=l,o[c].type=s);var p=[o];if(void 0!==n&&void 0!==n[0]){var g=[],m=[],f=[],w=[],v=[],h=null,b=null;o.shift();for(var _=0;_<n.length;_++){m=[];var y=n[_],k=y.columnId;y.id;if(0==_){function C(e,n){var a=r.cleanHtml(e[k]),t=r.cleanHtml(n[k]),o=!1,i=!1;return+(a=a.replace("%",""))==+a&&(o=!0),+(t=t.replace("%",""))==+t&&(i=!0),!0===o&&!0===i?a-t:"number"==typeof a&&"string"==typeof t?-1:"string"==typeof a&&"number"==typeof t?1:"string"==typeof a&&"string"==typeof t?a<t?-1:1:0}r.tableRecords.sort(C)}for(var D=0,S=0,x=0;x<r.tableRecords.length;x++)if(h=r.tableRecords[x],0==_){if(-1==f.indexOf(r.tableRecords[x][k]))f.push(r.tableRecords[x][k]),(L=[]).fila=r.tableRecords[x][k],L.label=r.tableRecords[x][k],L.row=r.tableRecords[x],L.level=_,L.key=k,g.push(L),m.push(L),v.push(L);for(c=0;c<o.length;c++){var N=o[c],E=o[c].typeColumn;void 0===L[N.columnId]&&(L[N.columnId]=0),void 0!==o[c].metaColumn?"COUNT"==E?r.tableRecords[x][N.key]==N.label&&(L[N.columnId]=L[N.columnId]+1):"SUM"==E?((isNaN(L[N.columnId])||""==L[N.columnId])&&(L[N.columnId]=0),(isNaN(r.tableRecords[x][N.valCaption])||""==r.tableRecords[x][N.valCaption])&&(r.tableRecords[x][N.valCaption]=0),r.tableRecords[x][N.key]==N.label&&(L[N.columnId]=parseFloat(L[N.columnId])+parseFloat(r.tableRecords[x][N.valCaption]))):"PERCEN"==E?((isNaN(L[N.columnId])||""==L[N.columnId])&&(L[N.columnId]=0),(isNaN(r.tableRecords[x][N.valCaption])||""==r.tableRecords[x][N.valCaption])&&(r.tableRecords[x][N.valCaption]=0),r.tableRecords[x][N.key]==N.label&&(L[N.columnId]=parseFloat(L[N.columnId])+parseFloat(r.tableRecords[x][N.valCaption]))):"ABSO"==E?r.tableRecords[x][N.key]==N.label&&(L[N.columnId]=r.tableRecords[x][N.valCaption].toString()):"PROM"==E&&(null==b&&(b=r.tableRecords[x][k]),b!=r.tableRecords[x][k]?D=1:D++,L[N.columnId+"_counter"]=D,(isNaN(L[N.columnId])||""==L[N.columnId])&&(L[N.columnId]=0),(isNaN(r.tableRecords[x][N.valCaption])||""==r.tableRecords[x][N.columnId])&&(r.tableRecords[x][N.valCaption]=0),L[N.columnId]=parseFloat(L[N.columnId])+parseFloat(r.tableRecords[x][N.valCaption]),b=r.tableRecords[x][k]):"COUNT"==E?L[N.columnId]=L[N.columnId]+1:"SUM"==E?((isNaN(L[N.columnId])||""==L[N.columnId])&&(L[N.columnId]=0),(isNaN(r.tableRecords[x][N.columnId])||""==r.tableRecords[x][N.columnId])&&(r.tableRecords[x][N.columnId]=0),L[N.columnId]=parseFloat(L[N.columnId])+parseFloat(r.tableRecords[x][N.columnId])):"PERCEN"==E?((isNaN(L[N.columnId])||""==L[N.columnId])&&(L[N.columnId]=0),(isNaN(r.tableRecords[x][N.columnId])||""==r.tableRecords[x][N.columnId])&&(r.tableRecords[x][N.columnId]=0),L[N.columnId]=parseFloat(L[N.columnId])+parseFloat(r.tableRecords[x][N.columnId])):"ABSO"==E?L[N.columnId]=r.tableRecords[x][N.columnId].toString():"PROM"==E&&(null==b&&(b=r.tableRecords[x][k]),b!=r.tableRecords[x][k]?D=1:D++,L[N.columnId+"_counter"]=D,(isNaN(L[N.columnId])||""==L[N.columnId])&&(L[N.columnId]=0),(isNaN(r.tableRecords[x][N.columnId])||""==r.tableRecords[x][N.columnId])&&(r.tableRecords[x][N.columnId]=0),L[N.columnId]=parseFloat(L[N.columnId])+parseFloat(r.tableRecords[x][N.columnId]),b=r.tableRecords[x][k])}}else for(var I=null,A="",T=0;T<v.length;T++){var R=v[T],P=0;A="";var B=!1;if(R.level==_-1)for(var F=_;0<F;F--){var M=T-P;M<0&&(M=0);for(I=v[M];I.level==R.level&&F!=_;)I=v[M-P],P++;if(!(I.level<_))break;if(h[I.key]!=I.fila||I.fila==h[k]){B=!1;break}A=A+I.fila+h[k],B=!0,P++}if(B){var L=[];-1==f.indexOf(A)&&(f.push(A),L.fila=h[k],L.label=new Array(_+1).join("&nbsp;&nbsp;&nbsp;&nbsp;")+h[k],L.row=h,L.level=_,L.parent=null,L.key=k,L.oldkey=A,g.push(L),m.push(L),v.splice(T,0,L));for(c=0;c<o.length;c++){N=o[c],E=o[c].typeColumn;void 0===w[A]&&(w[A]=[]),void 0===w[A][N.columnId]&&(w[A][N.columnId]=0),void 0===w[A][h[k]]&&(w[A][k]=h[k]),void 0!==o[c].metaColumn?"COUNT"==E?h[N.key]==N.label&&(w[A][N.columnId]=parseFloat(w[A][N.columnId])+1):"SUM"==E?h[N.key]==N.label&&(w[A][N.columnId]=parseFloat(w[A][N.columnId])+parseFloat(h[N.valCaption])):"ABSO"==E?w[A][N.columnId]="":"PROM"==E&&(null==b&&(b=r.tableRecords[x][k]),b!=r.tableRecords[x][k]?S=1:S++,h[N.key]==N.label&&(L[N.columnId+"_counter"]=S,w[A][N.columnId]=parseFloat(w[A][N.columnId])+parseFloat(h[N.valCaption])/D,b=r.tableRecords[x][k])):"COUNT"==E?w[A][N.columnId]=parseFloat(w[A][N.columnId])+1:"SUM"==E?w[A][N.columnId]=parseFloat(w[A][N.columnId])+parseFloat(h[N.columnId]):"ABSO"==E?w[A][N.columnId]="":"PROM"==E&&(null==b&&(b=r.tableRecords[x][k]),b!=r.tableRecords[x][k]?S=1:S++,L[N.columnId+"_counter"]=S,w[A][N.columnId]=parseFloat(w[A][N.columnId])+parseFloat(h[N.columnId])/D,b=r.tableRecords[x][k])}}}}g=v;var O={};for(c=0;c<o.length;c++)for(N=o[c],E=o[c].typeColumn,x=0;x<g.length;x++)if(0==g[x].level)if(void 0===O[N.columnId]&&(O[N.columnId]=0),"PROM"==E)O[N.columnId]=O[N.columnId]+g[x][N.columnId],g[x][N.columnId]=parseFloat(g[x][N.columnId])/g[x][N.columnId+"_counter"];else if("PERCEN"==E){if(0<g[x][N.columnId]){if(O[N.columnId]=O[N.columnId]+g[x][N.columnId],void 0===N.model)continue;g[x][N.columnId]=g[x][N.columnId]/g[x][N.valCaption]*100}}else O[N.columnId]="ABSO"==E?"":O[N.columnId]+g[x][N.columnId];else for(var $ in w)$==g[x].oldkey&&(g[x][N.columnId]="PROM"==E?w[$][N.columnId+"_counter"]:"PERCEN"==E?w[$][N.columnId+"_counter"]:w[$][N.columnId]);var U=[];U.fila="<b>Total general</b>",U.label="<b>Total general</b>";for(c=0;c<o.length;c++){if(N=o[c],"PROM"==(E=o[c].typeColumn))U[N.columnId]=O[N.columnId]/r.tableRecords.length;else if("PERCEN"==E){if(U[N.columnId]=O[N.columnId],void 0===N.model)continue;U[N.columnId]=U[N.columnId]/O[N.valCaption]*100,U.value=U[N.columnId]/O[N.valCaption]*100}else U[N.columnId]=O[N.columnId],U.value=O[N.columnId]}var z={orderedByMonth:!1},q=r.orderListByMonths(g);return!1!==q&&(g=q,z.orderedByMonth=!0),z.finalArray=g,z.cols=o,z.normalCols=p,z.total=U,z}}}}}),nw.Class.define("nw.localStorage",{extend:nw.object,construct:function(){},statics:{getData:function(e){return nw.localStorage.getItem(e)},setData:function(e,n){nw.localStorage.setItem(e,n)},getItem:function(e){return window.localStorage.getItem(e)},setItem:function(e,n){window.localStorage.setItem(e,n)}}}),nw.Class.define("nw.geolocationBackground",{extend:nw.object,construct:function(){var e=this;e.optionsDefault={},e.optionsDefault.url=!1,e.optionsDefault.syncUrl=!1,e.optionsDefault.notificationTitle="Background tracking",e.optionsDefault.notificationText="enabled",e.optionsDefault.locationProvider=BackgroundGeolocation.ACTIVITY_PROVIDER,e.optionsDefault.desiredAccuracy=BackgroundGeolocation.HIGH_ACCURACY,e.optionsDefault.stationaryRadius=50,e.optionsDefault.distanceFilter=50,e.optionsDefault.debug=!1,e.optionsDefault.stopOnTerminate=!1,e.optionsDefault.startOnBoot=!1,e.optionsDefault.startForeground=!0,e.optionsDefault.notificationsEnabled=!0,e.optionsDefault.stopOnStillActivity=!1,e.optionsDefault.interval=1e4,e.optionsDefault.fastestInterval=5e3,e.optionsDefault.activitiesInterval=1e4,e.optionsDefault.postTemplate={lat:"@latitude",lon:"@longitude",foo:"bar"},e.optionsDefault.httpHeaders={"X-FOO":"bar"}},destruct:function(){},members:{configure:function(e,n){console.log("%cBackgroundGeolocation.configure (V1)","background: #ff3366; color: #fff"),console.log("self.optionsDefault",this.optionsDefault),BackgroundGeolocation.configure(this.optionsDefault)},onLocation:function(e,a){BackgroundGeolocation.on("location",function(n){navigator.onLine&&(console.log("%cBackgroundGeolocation.onLocation","background: #ff3366; color: #fff"),nw.evalueData(e)&&e(n),BackgroundGeolocation.startTask(function(e){console.log("%cBackgroundGeolocation.onLocation:::startTask","background: #ff3366; color: #fff"),console.log("startTask",e),nw.evalueData(a)&&a(n),BackgroundGeolocation.endTask(e)}))})},onStationary:function(){BackgroundGeolocation.on("stationary",function(e){console.log("%cBackgroundGeolocation.stationary","background: #ff3366; color: #fff"),console.log("stationaryLocation",e)})},onError:function(n){BackgroundGeolocation.on("error",function(e){console.log("%cBackgroundGeolocation.error","background: #ff3366; color: #fff"),console.log("[ERROR] BackgroundGeolocation error:",e.code,e.message),nw.dialog("[ERROR] BackgroundGeolocation error: "+e.code+" -- "+e.message),n(e)})},onStart:function(){BackgroundGeolocation.on("start",function(){console.log("%cBackgroundGeolocation.start","background: #ff3366; color: #fff"),console.log("[INFO] BackgroundGeolocation service has been started")})},onStop:function(){BackgroundGeolocation.on("stop",function(){console.log("%cBackgroundGeolocation.onStop","background: #ff3366; color: #fff"),console.log("[INFO] BackgroundGeolocation service has been stopped")})},onAuthorization:function(){BackgroundGeolocation.on("authorization",function(e){console.log("%cBackgroundGeolocation.onAuthorization","background: #ff3366; color: #fff"),console.log("[INFO] BackgroundGeolocation authorization status: "+e),e!==BackgroundGeolocation.AUTHORIZED&&setTimeout(function(){confirm("App requires location tracking permission. Would you like to open app settings?");if(showSetting)return BackgroundGeolocation.showAppSettings()},1e3)})},onBackground:function(e){BackgroundGeolocation.on("background",function(){console.log("%cBackgroundGeolocation.onBackground","background: #ff3366; color: #fff"),console.log("BackgroundGeolocation.background::: [INFO] App is in background"),e()})},onForeground:function(e){BackgroundGeolocation.on("foreground",function(){console.log("%cBackgroundGeolocation.onForeground","background: #ff3366; color: #fff"),console.log("BackgroundGeolocation.foreground::: [INFO] App is in foreground"),e()})},abort_requested:function(){BackgroundGeolocation.on("abort_requested",function(){console.log("%cBackgroundGeolocation.abort_requested","background: #ff3366; color: #fff"),console.log("BackgroundGeolocation.abort_requested::: [INFO] Server responded with 285 Updates Not Required")})},http_authorization:function(){BackgroundGeolocation.on("http_authorization",function(){console.log("%cBackgroundGeolocation.http_authorization","background: #ff3366; color: #fff"),console.log("BackgroundGeolocation.http_authorization::: [INFO] App needs to authorize the http requests")})},checkStatus:function(){BackgroundGeolocation.checkStatus(function(e){console.log("%cBackgroundGeolocation.checkStatus","background: #ff3366; color: #fff"),console.log("BackgroundGeolocation.checkStatus::: [INFO] BackgroundGeolocation service is running",e.isRunning),console.log("BackgroundGeolocation.checkStatus::: [INFO] BackgroundGeolocation services enabled",e.locationServicesEnabled),console.log("BackgroundGeolocation.checkStatus::: [INFO] BackgroundGeolocation auth status: "+e.authorization),e.isRunning||(BackgroundGeolocation.start(),console.log("BackgroundGeolocation.start",e))})}},statics:{}}),nw.Class.define("nw.firebase",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{loaded:!1,load:function(e,n,a,t){nw.firebase.persistence=t;var o=nw.firebase.loaded;void 0===n&&(n=function(){});var i=nw.isOnline();if(!0===o||!i)return n();if(nw.debug&&console.log("firebase version 9.6.11 -compat ::: local=",a),a)nw.require("nwmaker/firebase-compress-9.6.11.js",function(){l()},!0);else{var r="10.6.0";nw.debug&&console.log("firebase V: ",r),nw.require("https://www.gstatic.com/firebasejs/10.6.0/firebase-app-compat.js",function(){nw.require("https://www.gstatic.com/firebasejs/10.6.0/firebase-storage-compat.js",function(){nw.require("https://www.gstatic.com/firebasejs/10.6.0/firebase-messaging-compat.js",function(){nw.require("https://www.gstatic.com/firebasejs/10.6.0/firebase-firestore-compat.js",function(){l()})})})})}function l(){nw.debug&&console.log("load firebase!"),nw.firebase.app=firebase.initializeApp(e),nw.firebase.firestore=firebase.firestore(),!0!==nw.firebase.persistence&&"true_double"!==nw.firebase.persistence&&"false_double"!==nw.firebase.persistence||("false_double"===nw.firebase.persistence?(nw.firebase.app_two=firebase.initializeApp(e,"secondary"),nw.firebase.firestore_two=nw.firebase.app_two.firestore()):"true_double"===nw.firebase.persistence&&(nw.firebase.app_two=firebase.initializeApp(e,"secondary"),nw.firebase.firestore_two=nw.firebase.app_two.firestore(),nw.firebase.firestore_two.enablePersistence()),nw.firebase.firestore.enablePersistence({synchronizeTabs:!0}).then(function(e){}).catch(function(e){console.log("ERROR IN enablePersistence FIREBASE:::err:::",e),"failed-precondition"==e.code?console.log("Múltiples pestañas abiertas, la persistencia solo se puede habilitar en una pestaña a la vez."):"unimplemented"==e.code&&console.log("El navegador actual no es compatible con todas las características requeridas para habilitar la persistencia")})),n(),nw.firebase.loaded=!0}},initFirebaseAuth:function(){firebase.auth().onAuthStateChanged(nw.firebase.authStateObserver)},authStateObserver:function(e){nw.debug&&console.log("user",e),nw.saveMessagingDeviceToken()},execFirebase:function(e){return"undefined"==typeof firebase?(setTimeout(function(){nw.firebase.execFirebase(e)},100),!1):void 0===firebase.firestore?(setTimeout(function(){nw.firebase.execFirebase(e)},100),!1):e()},getDeviceToken:function(n){firebase.messaging().getToken().then(function(e){e?n(e):requestNotificationsPermissions()}).catch(function(e){console.error("Unable to get messaging token.",e)})},saveMessagingDeviceToken:function(e,n){firebase.firestore().collection("fcmTokens").doc(n).set({uid:e,token:n})},sendNotificacion:function(e,n){var a=e.to,t={title:e.title,body:e.body,icon:e.icon,sound:e.sound,click_action:e.callback,others:e.others};fetch("https://fcm.googleapis.com/fcm/send",{method:"POST",headers:{Authorization:"key=AAAAGdlePaM:APA91bHRnSqVwY6_DJaJ7jIyAXI8k8eoMx2j59qDbtsll4sw4G0vR-FpfB3uUe0GRQ-_pYmzYfu1BDbHHVI4n85D5JZBcbfAd19YOjCuwfJ8LN0Giy06V1QOVb8lK-InpbEztUyWK2im","Content-Type":"application/json"},body:JSON.stringify({notification:t,to:a})}).then(function(e){n(e)}).catch(function(e){console.error(e)})},select:function(u){nw.debug&&(console.log("firebase select",u),console.log("firebase select table",u.table)),nw.firebase.execFirebase(function(){var e=100;nw.evalueData(u.limit)&&(e=u.limit);var n=!1,a=!1,t=!1;nw.evalueData(u.order)&&(n=u.order,a=u.orderField,t=u.orderAscDesc);var o=!1;!0===u.getModelData&&(o=!0);var i=!1;!0===u.destroyQuery&&(i=!0);var r=!1;void 0!==u.includeMetadataChanges&&(r=u.includeMetadataChanges);var l=nw.firebase.firestore;if(void 0!==u.enablePersistence&&(u.enablePersistence||(l="false_double"===nw.firebase.persistence?nw.firebase.firestore_two:firebase.firestore())),l=l.collection(u.table),nw.evalueData(u.where)&&(l=l.where(u.where[0],u.where[1],u.where[2])),nw.evalueData(u.where2)&&(l=l.where(u.where2[0],u.where2[1],u.where2[2])),nw.evalueData(u.where3)&&(l=l.where(u.where3[0],u.where3[1],u.where3[2])),nw.evalueData(u.where_array))for(var s=0;s<u.where_array.length;s++){var c=u.where_array[s];l=l.where(c.variable,c.operator,c.equal)}1==n&&nw.evalueData(a)&&nw.evalueData(t)&&(l=l.orderBy(a,t)),nw.evalueData(u.orderField2)&&(l=l.orderBy(u.orderField2[0],u.orderField2[1])),nw.evalueData(u.startAt)&&(l=l.startAt(u.startAt).endAt(u.startAt+"")),nw.evalueData(u.lastVisible)&&(l=l.startAfter(u.lastVisible)),nw.evalueData(u.free)&&(l=l.free),l=(l=l.limit(e)).onSnapshot({includeMetadataChanges:r},function(e){var n,a,t=e;return!0===o&&(n=e,(a=[]).query=l,n.forEach(function(e){var n=e.data();nw.evalueData(n.datos)?a.push(n.datos):a.push(n)}),t=a),i&&l(),u.callback(t,e,l,u)})})},add:function(){},serverTimestamp:function(){return nw.firebase.execFirebase(function(){return firebase.firestore.FieldValue.serverTimestamp()})},arrayUnion:function(e){return nw.firebase.execFirebase(function(){return firebase.firestore.FieldValue.arrayUnion(e)})},set:function(n,a){nw.firebase.execFirebase(function(){nw.firebase.firestore.collection(n.collection).doc(n.document).set(n).then(function(){nw.debug&&console.log("FIREBASE::SET:: collection: "+n.collection+" document: "+n.document),nw.evalueData(a)&&"function"==typeof a&&a(n)}).catch(function(e){console.error("Error writing document: ",e,n),nw.evalueData(a)&&a(!1,n,e)})})},update:function(n,e){nw.firebase.execFirebase(function(){nw.firebase.firestore.collection(n.collection).doc(n.document).update(n.fields).then(function(){nw.debug&&console.log("FIREBASE::UPDATE:: collection: "+n.collection+" document: "+n.document),nw.evalueData(n.callback)&&"function"==typeof n.callback&&n.callback(n,e)}).catch(function(e){console.error("Error writing document: ",e,n),nw.evalueData(n.callback)&&n.callback(!1,n,e)})})},insert:function(n){nw.firebase.execFirebase(function(){nw.firebase.firestore.collection(n.collection).add(n).then(function(){nw.debug&&console.log("FIREBASE::INSERT::Document successfully insert!",n),nw.evalueData(n.callback)&&"function"==typeof n.callback&&n.callback(!0,n)}).catch(function(e){console.error("Error removing document: ",e),nw.evalueData(n.callback)&&"function"==typeof n.callback&&n.callback(!1,n)})})},remove:function(n){nw.firebase.execFirebase(function(){nw.firebase.firestore.collection(n.collection).doc(n.document).delete().then(function(){nw.debug&&console.log("FIREBASE::REMOVE::Document successfully deleted!",n),nw.evalueData(n.callback)&&"function"==typeof n.callback&&n.callback(!0,n)}).catch(function(e){console.error("Error removing document: ",e),nw.evalueData(n.callback)&&"function"==typeof n.callback&&n.callback(!1,n)})})}}}),nw.Class.define("nw.menuPanel",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{createPanel:function(e){var n="<div data-role='panel' id='"+e.id+"' data-position='"+e.position+"' data-display='"+e.display+"' class='panelHomeLeft' ><div class='ui-panel-inner'>"+e.html+"</div></div>";if(nw.evalueData(e.parent)?$(e.parent).append(n):$.mobile.pageContainer.append(n),$("[data-role=panel]").panel().enhanceWithin(),$("#"+e.id).trigger("updatelayout"),$("#"+e.id).trigger("create"),nw.evalueData(e.backgroundColor)&&$("#"+e.id).css({"background-color":e.backgroundColor}),nw.evalueData(e.open)&&!nw.isMobile()&&($("#"+e.id).panel(e.open),"open"===e.open)){var a=$("#"+e.id).width(),t=$("body").width()-a;a+="px",t+="px",$("body").append("<style> .ui-panel-dismiss, .btnMenuHeader{display: none!important;}.ui-page, .ui-panel-page-content-position-left.ui-panel-page-content-display-push, .headerEnc_relative{max-width: "+t+";transform: none;}.ui-page{left: "+a+"!important;}.ui-panel-closed {width: initial;visibility: visible;clip: auto;left: 0!important;transform: none!important;}</style>")}$(".panelHomeLeft").panel({position:"left",dismissible:!1,positionFixed:!0,open:function(e,n){nw.utils.addClass(document.body,"bodyPanelHomeLeftOpen")},close:function(e,n){nw.utils.removeClass(document.body,"bodyPanelHomeLeftOpen",!0),nw.utils.getDebug()&&console.log("Closer")}}),nw.buttons.nclick($(".btnMenuHeader"),function(e){$(".panelHomeLeft").panel("open")})},appendLinkMenu:function(e,n){nw.evalueData(n)?$(n+" .containerCenterHomeUl").append(e):$(".containerCenterHomeUl").append(e)},containerLinksMenu:function(){return"<div class='containerCenterHome' data-role='navbar' data-iconpos='right'>","<ul data-role='listview' class='containerCenterHomeUl ui-listview ui-listview-inset ui-corner-all ui-shadow'>","</ul>","</div>","<div class='containerCenterHome' data-role='navbar' data-iconpos='right'><ul data-role='listview' class='containerCenterHomeUl ui-listview ui-listview-inset ui-corner-all ui-shadow'></ul></div>"},generateLink:function(e,n,a,t,o,i,r,l){var s="nav_center_left ui-li-has-thumb";"left"===a&&(s="nav_left"),"lists_simple"===r&&(s+=" nav_simple "),"bloq"===r&&(s+=" nav_bloq "),nw.evalueData(n)||(s+=" nav_off_callback"),nw.evalueData(l)&&(s+=" "+l);var c="";if("center"===a){if(c='<a href="#" class="alinknavcenter ui-btn ui-btn-icon-right ui-icon-carat-r">',nw.evalueData(i)){var u='<div class="alinknavcenter_img" style="background-image: url('+i+');" ></div>';i+=" alinknavcenter_img",!1!==(d=nw.getBtnMaterialIcons(i))&&(u=d),c+=u}c+="<h2>"+nw.utils.tr(e)+"</h2>",nw.evalueData(o)&&(c+="<p>"+o+"</p>"),c+="</a>"}else{var d;u="<span class='iconlinksNavLeft' style='background-image: url("+i+");'></span>";i+=" iconlinksNavLeft",!1!==(d=nw.getBtnMaterialIcons(i))&&(u=d),c="<div class='liNavInt'>"+u+"<span class='textlinksNavLeft'>"+nw.utils.tr(e)+"</span></div>"}var p=document.createElement("li");return p.className="btnExec linksNavLeft linksNavLeft_"+t+" "+s,p.innerHTML=c,p.callback=n,p},menuFloat:function(e,n){nw.utils.remove(".containMenuFloat");var a=document.createElement("div");a.className="containMenuFloat",e.appendChild(a);var t=document.createElement("div");t.className="containMenuFloatDin",a.appendChild(t),nw.utils.removeClass(e,"elementContainerMenuFloat",!0),nw.utils.addClass(e,"elementContainerMenuFloat");for(var o=0;o<n.length;o++){var i=n[o],r=document.createElement("li");r.className="containMenuFloatLink",nw.evalueData(i.className)&&(r.className="containMenuFloatLink "+i.className),r.data=i,r.onclick=function(){var e=this.data;e.callback(e),nw.utils.remove(".containMenuFloat")},r.innerHTML="<span>"+nw.utils.tr(i.text)+"</span>",t.appendChild(r)}setTimeout(function(){nw.utils.addClass(a,"containMenuFloatShow")},3)},createMenuHomeCenter:function(){for(var e=0;e<config.menuLeft.length;e++){var n=config.menuLeft[e],a=!1;nw.evalueData(n.addClass)&&(a=n.addClass);var t=config.modeMenu;if(void 0!==n.mode&&(t=n.mode),"left"===n.position||"center_left"===n.position){var o=nw.generateLink(n.name,n.callback,"left",e,n.description,n.icon,!1,a);$(".containLinksMenuLeft").append(o)}if("center_left"===n.position||"center"===n.position){o=nw.generateLink(n.name,n.callback,"center",e,n.description,n.icon,t,a);nw.appendLinkMenu(o)}}}}}),nw.Class.define("nw.errorLogger",{extend:nw.object,construct:function(){},destruct:function(){},members:{status:null},statics:{process:function(e,n,a,t){var o="";console.log("ERROR_CONSOLE",e);var i="";try{if("string"==typeof e)o+=e;else if("object"==typeof e){$.each(e,function(e,n){o+=e+": "+n+". "});var r=!1;void 0!==e.message&&(i=i+" :: "+e.message,r=!0),void 0!==e.stack&&(i=i+" :: "+e.stack,r=!0),void 0!==e.trace&&(i=i+" :: "+e.trace,r=!0),r&&(o=o+" :: "+i)}nw.loadingRemove(),nw.login.removeLoadingInit();var l="dialogGenerateError_"+nw.utils.createRandomId();if(!0===n)return void nw.errorLogger.sendToNwCentral(o,l,a,t);if(!nw.evalueData(o)||""==o||null==o||0==o)return console.log("Novedad sin texto:::h:::",o),!0;var s="Se ha presentado una novedad en el sistema. ";if(!1===nw.isOnline()&&(s+="<br />Sin internet, compruebe su conexión.<br />"),nw.utils.isDeveloper()&&(s+="<br />",s+="<br />",s+="<strong>* Detalle para desarrolladores:</strong> <br />",s+=o),console.log("nw.errorLogger:::str",s),-1!=s.indexOf("User not autorized. Have to"))return!1;var c={cleanHtml:!1,useDialogNative:!1,textAccept:"Generar ticket",iconAccept:"<i class='material-icons' style='top: 5px;position: relative;color:green;'>check_circle</i> ",textCancel:"Cerrar"};c.addClass=l,nw.dialog(s,function(){nw.errorLogger.sendToNwCentral(o,l)},function(){return!0},c),console.error("nw.errorLogger.ERROR_LOG:str:::",s)}catch(e){console.error("nw.errorLogger.process catch error",e)}},sendToNwCentral:function(e,a,n,t){var o=nw.userPolicies.getUserData(),i=nw.errorLogger.cleanErrorString(e);i.error_text+="<br /><strong>NWMAKER LIB MOBILE</strong>","undefined"!=typeof cordova&&(i.error_text+="<br />cordova.platformId: "+cordova.platformId),void 0!==app&&(i.error_text+="<br />Nwmaker version: "+app.version),i.error_text+="<br />User: "+o.usuario,i.error_text+="<br />Profile: "+o.perfil,i.error_text+="<br />Company: "+o.empresa,i.error_text+="<br />Terminal: "+o.terminal,"undefined"!=typeof config&&(i.error_text+="<br />AppName: "+config.name,i.error_text+="<br />AppVersion: "+config.version,i.error_text+="<br />AppRpcDomain: "+config.domain_rpc),i.error_text+="<br />Location Host: "+window.location.host,i.error_text+="<br />Location href: "+window.location.href,i.error_text+="<br />Location pathname: "+window.location.pathname,nw.utils.getDebug()&&console.log("DDDDDDDDDDDDDDDD",i);var r=new nw.rpc(nw.getRpcUrl(),"master");r.setAsync(!0),!1===n?r.setLoading(!1):r.setLoading(!0);r.exec("sendReport",i,function(e){if(nw.evalueData(a)&&nw.remove("."+a),!1!==t){var n={cleanHtml:!1,useDialogNative:!1};nw.dialog(e,!1,!1,n)}nw.utils.getDebug()&&console.log("ERRRRRRRRRRRRRR",e)})},cleanErrorString:function(e){var n={};return n.error_text=e.replace(/'/g,"$"),n.error_text=n.error_text.replace(/#/g," "),n.error_text=n.error_text.replace(/:/g,"___"),n.error_text=n.error_text.replace(/\?/g," "),n.error_text=n.error_text.replace(/,/g,"+"),n.error_text=n.error_text.replace(/!/g," "),n.error_text=n.error_text.replace(/\"/g," "),n.error_text=n.error_text.replace(/"/g," "),n.error_text=String(n.error_text),n}}}),nw.Class.define("nw.rpc",{extend:nw.object,construct:function(e,n){var a=this;a.permanent=!1,a.url=e,a.className=n,a.async=!0,a.loading=!0,a.saveLogError=!0,a.method="POST",a.sendOnlyParams=!1,a.sendCompany=!0,a.headers=null,a.beforeSend=null,1==nw.mainPolicies.getShowRpcLog()&&(console.log("%c<<<<DEBUG: starting call RPC server>>>>","background: #33A51F; color: #2B0902"),console.log("URL: ",e),console.log("Method: "+n),console.log("Async (true/false): "+a.async))},destruct:function(){},members:{setBeforeSend:function(e){this.beforeSend=e},setHeaders:function(e){this.headers=e},setMethod:function(e){this.method=e},setUrl:function(e){this.url=e},setAsync:function(e){return this.async=e},setLoading:function(e){return this.loading=e},setShowLoading:function(e){return this.loading=e},setSaveLogError:function(e){return this.saveLogError=e},exec:function(e,n,a){var t=this,o={};o.service=t.className,o.method=e,o.data=n;1==nw.mainPolicies.getShowRpcLog()&&(console.log("Function: ",e),console.log("Data real: ",n)),t.rpcNw(t.url,o,function(e){a(e)},t.async,t.permanent,t.loading)},rpcNw:function(e,n,a,t,o,i){var r=nw.userPolicies.getUserData();app.debug;var l=!0;!1===t&&(l=!1),n.data.dataPaginationInit=0,n.data.dataPaginationEnd=1e3,n.data.z_fromlib_fecha_hora_actual_navigator_cliente=nw.utilsDate.getActualFullDate(),n.data.z_fromlib_fecha_actual_navigator_cliente=nw.utilsDate.getActualDate(),n.data.z_fromlib_hora_actual_navigator_cliente=nw.utilsDate.getActualHour(),n.data.z_fromlib_dispositivo_navigator_cliente=config.device,nw.evalueData(r.empresa)&&this.sendCompany&&(n.data.empresa=r.empresa),n.server_data={},n.server_data.key="bndjYWYyMzIz",n.id=Math.floor(1e4*Math.random()),n.params=[JSON.stringify(n.data)],"rpcNw"===e&&(e=1==nw.mainPolicies.getUseRpcQxnw()?mainNW.domain_rpc+"/rpcsrv/server.php?s="+n.id:mainNW.domain_rpc+"/nwlib6/nwproject/testRPC.php?s="+n.id),this.nw_ajax(e,n,a,l,o,i)},checkConnection:function(n,a){var t=this;if(nw.utils.getDebug()&&console.log("init checkConnection"),!nw.rpc.openConnection())return!1;var o=config.domain_rpc;if(void 0!==a&&(o=a),o=config.domain_rpc+"/nwlib6/nwproject/cleardot.gif",!1!==config.usePingServer){var e=new Image;e.onload=function(){$(".msgConnecStatus").remove(),n()},e.onerror=function(){var e="Error (501). Sin conexión con el servidor "+o;return t.errorMsgConnection(a,o,n,!1,e)},e.src=o}else{if(!1===nw.isOnline());else $(".msgConnecStatus").remove();n()}},errorMsgConnection:function(e,n,a,t,o){var i=this;nw.utils.removeSplash(),nw.loadingRemove(),nw.evalueData(o)||(o="");var r=" Internet estable";!1===nw.isOnline()&&(r="<br />Sin internet, compruebe su conexión. ");var l="";nw.evalueData(t)&&nw.evalueData(t.message)&&(l=t.message);var s="ERROR:::nw.rpc:::checkConnection::: Problema al realizar la solicitud: "+l;console.error("Fetch Error :-S",t),console.error(s),nw.console.log(s),$(".msgConnecStatus").remove();var c="<strong>Novedad de conexión.</strong><br />"+o+"<br />"+r+" <br /> Intentando recuperar, por favor espere...";$("body").append("<div class='msgConnecStatus'>"+c+"</div>"),setTimeout(function(){i.checkConnection(a,e)},5e3)},nw_ajax:function(n,a,t,o,e,i){var r=this;nw.rpc.openConnection(!0),!0===i&&nw.loading(),!0===config.usePingServer?r.checkConnection(function(e){r.exec_nw_ajax(n,a,t,o,i)},n,e):r.exec_nw_ajax(n,a,t,o,i)},exec_nw_ajax:function(e,n,a,t,o){var i=this,r=nw.userPolicies.getUserData();try{var l=!0;if($.each(n.data,function(e,n){if("function"==typeof n)return nw.loadingRemove(),nw.dialog("ERROR: Está enviando un dato incorrecto al servidor. Field: "+e+", tipo: "+typeof n+". Ver consola para más info."),console.log("field",e),console.log("model",n),l=!1}),!l)return!1;if(n.z_fromlib_fecha_hora_actual_navigator_cliente=nw.utilsDate.getActualFullDate(),n.z_fromlib_fecha_actual_navigator_cliente=nw.utilsDate.getActualDate(),n.z_fromlib_hora_actual_navigator_cliente=nw.utilsDate.getActualHour(),n.data.z_fromlib_fecha_hora_actual_navigator_cliente=nw.utilsDate.getActualFullDate(),n.data.z_fromlib_fecha_actual_navigator_cliente=nw.utilsDate.getActualDate(),n.data.z_fromlib_hora_actual_navigator_cliente=nw.utilsDate.getActualHour(),nw.evalueData(r.empresa)&&i.sendCompany&&(n.empresa=r.empresa,n.data.empresa=r.empresa),1==nw.mainPolicies.getShowRpcLog()&&(console.log("Data enviada: ",n),console.log("%c<<<</DEBUG>>>>","background: #33A51F; color: #2B0902")),1==nw.mainPolicies.getUseRpcQxnw()){n.data,i.sendOnlyParams&&(n=n.data),"POST"===i.method&&(n=JSON.stringify(n)),1==nw.mainPolicies.getShowRpcLog()&&(console.log("Data enviada stringify: ",n),console.log("%c<<<</DEBUG>>>>","background: #33A51F; color: #2B0902"));var s={async:t,type:i.method,url:e,crossDomain:!0,cache:!1,data:n,dataType:"json",contentType:"application/json",traditional:!0,success:function(e){return i.onSucess(e,a)},error:function(e){return i.onError(e)}};null!==i.headers&&(s.headers=i.headers),null!==i.beforeSend&&(s.beforeSend=i.beforeSend),$.ajax(s)}else nw.utils.getDebug()&&console.log("%c<<<</DEBUG_RPC_EXEC_DATA_SEND>>>>","background: #33A51F; color: #2B0902",n),$.ajax({async:t,type:i.method,url:e,crossDomain:!0,cache:!1,data:n,success:function(e){i.onSucess(e,a)},error:function(e){i.onError(e)}})}catch(e){nw.errorLogger.process(e)}},onSucess:function(e,n){1==nw.mainPolicies.getShowRpcLog()&&(console.log("%c<<<<DEBUG RPC ASYNC RESPONSE>>>>","background: #6DCD5C;"),console.log("IS QXNW MODE"),console.log(e),console.log("%c<<<</DEBUG>>>>","background: #6DCD5C;"));try{!0===this.loading&&nw.loadingRemove();var a=null;if("object"!=typeof e&&(a=JSON.parse(e)),nw.evalueData(a)&&nw.evalueData(a.error)&&nw.evalueData(a.error.message)&&102!=a.error.code)return console.log("%c<<<<DEBUG RPC ASYNC RESPONSE>>>>","background: #6DCD5C;"),console.log("resultjson error in nw.rpc",a),console.log("%c<<<</DEBUG>>>>","background: #6DCD5C;"),nw.loadingRemove(),nw.errorLogger.process(a.error.message),!1;if(!0===showconsolerpcresult&&console.log(e),"object"!=typeof e&&(e=JSON.parse(e)),void 0===e.error||null===e.error)return"string"!=typeof e||-1===e.indexOf("Parse error")&&-1===e.indexOf("syntax error")?1==nw.mainPolicies.getUseRpcQxnw()&&void 0!==e.result?n(e.result):n(e):(nw.loadingRemove(),nw.errorLogger.process(e),console.log("result",e)),!1;if(console.log("result",e),void 0!==e.error.code){if(102==e.error.code)return nw.loadingRemove(),void nw.dialog2(e.error.message);if(103==e.error.code)return nw.loadingRemove(),void console.log(e.error.message)}return nw.errorLogger.process(e.error),!1}catch(e){return nw.errorLogger.process(e),!1}},onError:function(e){nw.loadingRemove(),console.log("ERROR CONECTION SERVER: ",e),nw.console.log("ERROR CONECTION SERVER: ",e);var a="",n=nw.isOnline();if($(".msgConnecStatus").remove(),!1===n){return $("body").append("<div class='msgConnecStatus'><strong>Novedad de conexión.</strong><br />Sin internet, compruebe su conexión. <br /></div>"),!1}$.each(e.error,function(e,n){console.log("Key",e),console.log("value",n),a+=e+": "+n+". "}),console.log("nw.rpc:::onError:::error:::h",a),nw.evalueData(a)&&nw.errorLogger.process(a)}},statics:{process:function(e){var n=e.error.message;return nw.evalueData(e.error.message_developer)&&nw.utils.isDeveloper()&&(n+="<br /><strong>Error for developers: </strong><br />",n+=e.error.message_developer),n},openConnection:function(e){return void 0!==e&&(nw.initConnectionRPC=e),nw.initConnectionRPC},closeConnection:function(){nw.rpc.openConnection(!1),$(".msgConnecStatus").remove()}}}),nw.Class.define("nw.notificationPush",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{suscribedUserNotificacionPush:function(){var r=nw.userPolicies.getUserData();if(console.log("suscribedUserNotificacionPush.js:::up.usuario",r.usuario),void 0!==r.usuario){var e=!0;if(nw.evalueData(window.localStorage.getItem("token"))&&(console.log("1. token a registrar ya existe",window.localStorage.getItem("token")),e=!1),nw.evalueData(window.localStorage.getItem("token_ultima_fecha_registro"))||(console.log("token_ultima_fecha_registro a registrar ya existe",window.localStorage.getItem("token_ultima_fecha_registro")),e=!0),console.log("suscribedUserNotificacionPush.js:::sigue",e),console.log("suscribedUserNotificacionPush.js"),"undefined"!=typeof FCM){console.log("suscribedUserNotificacionPush.js::USING LAST VERSION FCM:::",FCM);var n=FCM.getToken();console.log("fcmToken",n),n.then(function(e){console.log(e),a(e)}).catch(function(e){console.log(e)})}else FCMPlugin.getToken(function(e){console.log("suscribedUserNotificacionPush.js::USING NORMAL VERSION FCMPlugin:::",FCMPlugin),a(e)},function(e){console.log(e),nw.console.log(e),nw.dialog(e)});function a(e){if(!1===config.saveTokenPush)return!1;console.log("suscribedUserNotificacionPush.js:::token",e);var n=!0;window.localStorage.getItem("token")===e&&(n=!1),nw.evalueData(window.localStorage.getItem("token_ultima_fecha_registro"))||(n=!0),console.log("suscribedUserNotificacionPush.js:::sigue2",n),n||console.log("2. token a registrar ya existe, pero continua",e);var a=nw.utilsDate.getActualFullDate();window.localStorage.setItem("token",e),window.localStorage.setItem("token_ultima_fecha_registro",a),console.log("getToken",e),nw.console.log("getToken",e);var t=new nw.rpc(nw.getRpcUrl(),"nwMaker"),o={};o.usuario=r.usuario,o.perfil=r.perfil,o.empresa=r.empresa,o.token=e,o.device=config.device,o.sigue2=n;var i=Intl.DateTimeFormat().resolvedOptions();o.zonaHorariaActual=i.timeZone,console.log("suscribedUserNotificacionPush:::sendDataServer:::data",o),t.setAsync(!0),t.setLoading(!1);t.exec("saveTokenPush",o,function(e){console.log("suscribedUserNotificacionPush:::responseServer:::r",e),nw.console.log("Token register",e)}),FCMPlugin.subscribeToTopic(config.name),console.log("subscribeToTopic",config.name),!0===config.useFirebase&&nw.notificationPush.addTokenFirebase(e,a)}}},addTokenFirebase:function(e,n){if(!0===nw.firebase.loaded){nw.evalueData(n)||(n=nw.utilsDate.getActualFullDate()),console.log("fecha",n);var a=nw.userPolicies.getUserData(),t={collection:"FCM_tokens",usuario:a.usuario,perfil:a.perfil,empresa:a.empresa,token:e,fecha:n,device:config.device};nw.firebase.insert(t)}else setTimeout(function(){nw.notificationPush.addTokenFirebase(e,n)},500)},unSuscribedUserNotificacionPush:function(e){FCMPlugin.unsubscribeFromTopic("topicExample",function(e){nw.console.log(e)},function(e){nw.console.log(e),nw.dialog(e)})},sendNotificacion:function(n,a){var e="AIzaSyCOoH2AZXucFRnHljZOQxQC8PPwtuIqIss";nw.utils.evalueData(config.keyGoogleNotificacionPush)&&!nw.utils.evalueData(n.key)&&setTimeout(function(){var e=n;e.key=config.keyGoogleNotificacionPush,nw.notificationPush.sendNotificacion(e,a)},1e3),nw.utils.evalueData(n.key)&&(e=n.key);var t=n.to,o={title:nw.utils.tr(n.title),body:nw.utils.tr(n.body),icon:nw.utils.tr(n.icon),click_action:n.callback,priority:"high",content_available:!0,show_in_foreground:!0,sound:n.sound,vibrate:!0};fetch("https://fcm.googleapis.com/fcm/send",{method:"POST",content_available:!0,headers:{Authorization:"key="+e,"Content-Type":"application/json"},body:JSON.stringify({to:t,notification:o,show_in_foreground:!0,priority:"high",data:{data:n.data,callback:n.callback.toString(),title:n.title,body:n.body}})}).then(function(e){nw.evalueData(a)&&a(e)}).catch(function(e){console.error(e),console.log("sendNotificacion:::error",e),nw.console.error(e)})}}}),nw.Class.define("nw.payWompi",{extend:nw.object,construct:function(){},destruct:function(){},members:{start:function(n,e,a){var t=nw.userPolicies.getUserData();if(nw.utils.evalueData(n.price)){n.perfil=t.perfil,n.terminal=t.terminal,n.usuario=t.usuario,n.id_usuario=t.id_usuario,n.empresa=t.empresa,console.log("data",n);var o=new nw.rpc(nw.getRpcUrl(),"nwMaker");o.setAsync(!0),o.setLoading(!0);o.exec("getKeysWompi",n,function(e){console.log("payWompi :::: result",e),!1!==e?nw.require("https://checkout.wompi.co/widget.js",function(){checkout=new WidgetCheckout({currency:"COP",amountInCents:n.price,reference:n.reference,publicKey:e.llavePublica,redirectUrl:e.redirectUrl,taxInCents:{vat:0,consumption:0},customerData:{email:n.email,fullName:n.fullName,phoneNumber:n.phoneNumber,phoneNumberPrefix:n.phoneNumberPrefix}}),checkout.open(function(e){var n=e.transaction;console.log("Transaction ID: ",n.id),console.log("Transaction object: ",n)})},!0):nw.dialog("No hay configuración de claves activas payWompi")})}else nw.dialog("El monto debe ser un número entero mayor a 0")}},statics:{}}),nw.Class.define("nw.preloader",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{loadingRemove:function(e){nw.evalueData(e)||(e={}),void 0!==window.plugins&&void 0!==window.plugins.spinnerDialog&&window.plugins.spinnerDialog.hide(),void 0===e.container&&(e.container="body"),"string"==typeof e.container?$(e.container).find(".loadingNwChat").remove():e.container.find(".loadingNwChat").remove(),$(".loadingNwChat").remove()},loading:function(e){if(nw.evalueData(e)||(e={}),void 0===e.text&&(e.text=null),void 0===e.textVisible&&(e.textVisible=!0),void 0===e.theme&&(e.theme=mainNW.theme),void 0===e.html&&(e.html=""),void 0!==window.plugins&&void 0===e.container&&!0===e.native&&void 0!==window.plugins.spinnerDialog){var n=null,a=null;nw.evalueData(e.html)&&(n=e.html),nw.evalueData(e.text)&&(n=e.text),nw.evalueData(e.title)&&(a=e.title),a=nw.utils.tr(a);var t=nw.utils.tr(n);return window.plugins.spinnerDialog.show(a,t,!0),!0}void 0===e.container&&(e.container="body");var o="loadingNwChat_onlyicon",i="";(nw.evalueData(e.text)||nw.evalueData(e.title))&&(o=""),nw.evalueData(e.text)&&(i="cEftVf_wtext");var r="";nw.evalueData(e.addClass)&&(r=e.addClass);var l='<div id="loadingNwChat" class="loadingNwChat '+r+' ">';l+='<div class="loadingCenter '+o+'">',nw.evalueData(e.title)&&(l+='<div class="titleLoading">'+nw.utils.tr(e.title)+"</div>"),l+='<div class="loadingCenterTextIcon">',l+='<div class="cEftVf '+i+'"></div>',nw.evalueData(e.text)&&(l+='<div class="textLoading">'+nw.utils.tr(e.text)+"</div>"),l+="</div>",l+="</div>",l+="</div>",void 0!==e.append?"after"===e.append?$(e.container).after(l):"before"===e.append?$(e.container).after(l):"prepend"===e.append?$(e.container).after(l):$(e.container).append(l):$(e.container).append(l)},loading2:function(e){return $.mobile.loading("show",{})}}}),nw.Class.define("nw.payConekta",{extend:nw.object,construct:function(){},destruct:function(){},members:{status:null},statics:{start:function(e){var o=function(){};nw.evalueData(e.callBackEnd)&&(o=e.callBackEnd);var i=function(){};nw.evalueData(e.callBackClose)&&(i=e.callBackClose);var n=nw.userPolicies.getUserData(),a={};a.name=e.name,a.email=e.email,a.itemName=e.itemName,a.itemDescription=e.itemDescription,a.item_unit_price=e.item_unit_price,a.itemQuantity=e.itemQuantity,a.street1=e.street1,a.postal_code=e.postal_code,a.country=e.country,a.ruta=e.ruta,a.perfil=n.perfil,a.terminal=n.terminal,a.usuario=n.usuario,a.id_usuario=n.id_usuario,a.empresa=n.empresa,nw.evalueData(e.extra)&&(a.extra=e.extra),console.log("data",a);var t=new nw.rpc(nw.getRpcUrl(),"nwMaker");t.setAsync(!0),t.setLoading(!0);t.exec("payConekta",a,function(a){if(console.log("payConekta :::: result",a),!1!==a){var t=a.checkout.id,e=a.llavePublica,n={html:"<div id='conektaIframeContainer'></div>",id:"payConekta",className:"payConekta",canvas:".payConekta",showBack:!1,closeBack:!0,closeBackCallBack:function(){i()}};nw.createDialog(n),nw.loading(),nw.require("https://pay.conekta.com/v1.0/js/conekta-checkout.min.js",function(){nw.loadingRemove(),window.ConektaCheckoutComponents.Integration({targetIFrame:"#conektaIframeContainer",checkoutRequestId:t,publicKey:e,onCreateTokenSucceeded:function(e){console.log("onCreateTokenSucceeded",e);var n={type:"onCreateTokenSucceeded"};n.data=e,n.resultRegister=a,n.checkoutRequestId=t,o(n)},onCreateTokenError:function(e){console.log("onCreateTokenError",e);var n={type:"onCreateTokenError"};n.data=e,n.resultRegister=a,n.checkoutRequestId=t,o(n)},onFinalizePayment:function(e){console.log("onFinalizePayment",e);var n={type:"onFinalizePayment"};n.data=e,n.resultRegister=a,n.checkoutRequestId=t,o(n)},onErrorPayment:function(e){console.log("onErrorPayment",e);var n={type:"onErrorPayment"};n.data=e,n.resultRegister=a,n.checkoutRequestId=t,o(n)}})},!0)}else nw.dialog("No hay configuración de claves activas")})}}}),nw.Class.define("nw.notificationDesktop",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{send:function(e,n,a,t,o,i,r){if(!1===config.notificacionDesktop)return!1;if(nw.isMobile())return!1;a=nw.utils.strip_tags(a),e=nw.utils.strip_tags(e);var l=!1,s=1e4;nw.utils.evalueData(r)&&(s=r);var c=e;nw.utils.evalueData(i)&&(c=i);var u={body:e,icon:n,requireInteraction:!0,silent:!1,vibrate:!0,tag:c,dir:"ltr"};return"Notification"in window?("granted"===Notification.permission?l=new Notification(a,u):"denied"!==Notification.permission?Notification.requestPermission(function(e){"permission"in Notification||(Notification.permission=e),"granted"===e&&(l=new Notification(a,u))}):Notification.requestPermission(function(e){"permission"in Notification||(Notification.permission=e),"granted"===e&&(l=new Notification(a,u))}),!1!==l?(setTimeout(l.close.bind(l),s),l.onclick=function(e){this.close(),void 0===t||!1===t||t()},nw.utils.evalueData(o)&&!0===config.soundNotificacionDesktop&&nw.playSound(o,{className:"sound_NotificationDesktop"}),l):void 0):(console.log("Este navegador no soporta notificaciones de escritorio"),!1)}}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(D){var t,e=navigator.userAgent,S=/iphone/i.test(e),o=/chrome/i.test(e),x=/android/i.test(e);D.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},D.fn.extend({caret:function(e,n){var a;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(n="number"==typeof n?n:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,n):this.createTextRange&&((a=this.createTextRange()).collapse(!0),a.moveEnd("character",n),a.moveStart("character",e),a.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,n=this[0].selectionEnd):document.selection&&document.selection.createRange&&(a=document.selection.createRange(),e=0-a.duplicate().moveStart("character",-1e5),n=e+a.text.length),{begin:e,end:n})},unmask:function(){return this.trigger("unmask")},mask:function(n,v){var a,h,b,_,y,k,C;if(!n&&0<this.length){var e=D(this[0]).data(D.mask.dataName);return e?e():void 0}return v=D.extend({autoclear:D.mask.autoclear,placeholder:D.mask.placeholder,completed:null},v),a=D.mask.definitions,h=[],b=k=n.length,_=null,D.each(n.split(""),function(e,n){"?"==n?(k--,b=e):a[n]?(h.push(new RegExp(a[n])),null===_&&(_=h.length-1),e<b&&(y=h.length-1)):h.push(null)}),this.trigger("unmask").each(function(){function r(){if(v.completed){for(var e=_;e<=y;e++)if(h[e]&&m[e]===l(e))return;v.completed.call(g)}}function l(e){return v.placeholder.charAt(e<v.placeholder.length?e:0)}function s(e){for(;++e<k&&!h[e];);return e}function c(e,n){var a,t;if(!(e<0)){for(a=e,t=s(n);a<k;a++)if(h[a]){if(!(t<k&&h[a].test(m[t])))break;m[a]=m[t],m[t]=l(t),t=s(t)}d(),g.caret(Math.max(_,e))}}function i(){p(),g.val()!=w&&g.change()}function u(e,n){var a;for(a=e;a<n&&a<k;a++)h[a]&&(m[a]=l(a))}function d(){g.val(m.join(""))}function p(e){var n,a,t,o=g.val(),i=-1;for(t=n=0;n<k;n++)if(h[n]){for(m[n]=l(n);t++<o.length;)if(a=o.charAt(t-1),h[n].test(a)){m[n]=a,i=n;break}if(t>o.length){u(n+1,k);break}}else m[n]===o.charAt(t)&&t++,n<b&&(i=n);return e?d():i+1<b?v.autoclear||m.join("")===f?(g.val()&&g.val(""),u(0,k)):d():(d(),g.val(g.val().substring(0,i+1))),b?n:_}var g=D(this),m=D.map(n.split(""),function(e,n){return"?"!=e?a[e]?l(n):e:void 0}),f=m.join(""),w=g.val();g.data(D.mask.dataName,function(){return D.map(m,function(e,n){return h[n]&&e!=l(n)?e:null}).join("")}),g.one("unmask",function(){g.off(".mask").removeData(D.mask.dataName)}).on("focus.mask",function(){var e;g.prop("readonly")||(clearTimeout(t),w=g.val(),e=p(),t=setTimeout(function(){g.get(0)===document.activeElement&&(d(),e==n.replace("?","").length?g.caret(0,e):g.caret(e))},10))}).on("blur.mask",i).on("keydown.mask",function(e){if(!g.prop("readonly")){var n,a,t,o=e.which||e.keyCode;C=g.val(),8===o||46===o||S&&127===o?(a=(n=g.caret()).begin,(t=n.end)-a==0&&(a=46!==o?function(e){for(;0<=--e&&!h[e];);return e}(a):t=s(a-1),t=46===o?s(t):t),u(a,t),c(a,t-1),e.preventDefault()):13===o?i.call(this,e):27===o&&(g.val(w),g.caret(0,p()),e.preventDefault())}}).on("keypress.mask",function(e){if(!g.prop("readonly")){var n,a,t,o=e.which||e.keyCode,i=g.caret();e.ctrlKey||e.altKey||e.metaKey||o<32||!o||13===o||(i.end-i.begin!=0&&(u(i.begin,i.end),c(i.begin,i.end-1)),(n=s(i.begin-1))<k&&(a=String.fromCharCode(o),h[n].test(a))&&(function(e){var n,a,t,o;for(a=l(n=e);n<k;n++)if(h[n]){if(t=s(n),o=m[n],m[n]=a,!(t<k&&h[t].test(o)))break;a=o}}(n),m[n]=a,d(),t=s(n),x?setTimeout(function(){D.proxy(D.fn.caret,g,t)()},0):g.caret(t),i.begin<=y&&r()),e.preventDefault())}}).on("input.mask paste.mask",function(){g.prop("readonly")||setTimeout(function(){var e=p(!0);g.caret(e),r()},0)}),o&&x&&g.off("input.mask").on("input.mask",function(){var e=g.val(),n=g.caret();if(C&&C.length&&C.length>e.length){for(p(!0);0<n.begin&&!h[n.begin-1];)n.begin--;if(0===n.begin)for(;n.begin<_&&!h[n.begin];)n.begin++;g.caret(n.begin,n.begin)}else{for(p(!0);n.begin<k&&!h[n.begin];)n.begin++;g.caret(n.begin,n.begin)}r()}),p()})}})}),nw.Class.define("nw.setUiFields",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{setFields:function(d,e){0==$(e).data("nwenabled")&&$(e).prop("disabled","disabled"),"disabled"==$(e).attr("disabled")&&$(e).addClass("disabled_nw"),"required"==$(e).attr("required")&&$(e).addClass("required");var p=$(e).attr("id"),n=$(e).attr("data-type");$("#"+d.id_form+" .nw_widget_div_"+p+" .nw_label").addClass("nw_label_"+p),(e.parent=d).ui[p]=$(e),"selectBox"===n&&(d.ui[p].parents(".ui-btn").removeClass("ui-btn"),d.ui[p].parents(".ui-icon-carat-d").removeClass("ui-btn-icon-right")),e.ui=d.ui[p],d.ui[p].setRequired=function(e){!1===e?$(d.ui[p]).removeClass("required"):$(d.ui[p]).addClass("required")},d.ui[p].setVisibility=function(e){!1===e?($("."+d.id_form+" .nw_widget_div_"+p+" .nw_label_"+p).css({display:"none"}),$("."+d.id_form+" .nw_widget_div_"+p+" ."+p).css({display:"none"}),$("."+d.id_form+" #"+p).css({display:"none"}),$("."+d.id_form+" .nw_widget_div_"+p+" #"+p).css({display:"none"}),$("."+d.id_form+" .nw_widget_div_"+p+" .nw_widget_div_"+p).css({display:"none"}),$("."+d.id_form+" .nw_widget_div_"+p).css({display:"none"}),$("."+d.id_form+" #"+p+"-button").css({display:"none"})):($("."+d.id_form+" .nw_widget_div_"+p+" .nw_label_"+p).css({display:""}),$("."+d.id_form+" .nw_widget_div_"+p+" ."+p).css({display:""}),$("."+d.id_form+" #"+p).css({display:""}),$("."+d.id_form+" .nw_widget_div_"+p+" #"+p).css({display:""}),$("."+d.id_form+" .nw_widget_div_"+p+" .nw_widget_div_"+p).css({display:""}),$("."+d.id_form+" .nw_widget_div_"+p).css({display:""}),$("."+d.id_form+" #"+p+"-button").css({display:""}))},d.ui[p].actionSearch=function(u){var e;d.ui[p].on("input propertychange",function(){$(".errorNwForm").remove();var l=this,s=".nw_widget_div_"+$(l).attr("name"),c=d,a=l.value;if(clearTimeout(e),nw.cleanTokenField(),nw.loadingRemove({container:s}),!nw.evalueData(a))return!1;var t=nw.userPolicies.getUserData();nw.loading({container:s}),e=setTimeout(function(){if(void 0===c.getRecord)var e=c.getFiltersData(!0);else e=c.getRecord(!0);e.token=a,nw.evalueData(u.sendData)&&(e.sendData=u.sendData),nw.evalueData(u.fields_search)&&(e.fields_search=u.fields_search),nw.evalueData(u.fields_get)&&(e.fields_get=u.fields_get),nw.evalueData(u.table)&&(e.table=u.table),e.terminal=t.terminal,e.usuario=t.usuario,e.empresa=t.empresa,e.perfil=t.perfil;var n=new nw.rpc(nw.getRpcUrl(),u.service);n.setAsync(!0),n.setLoading(!1);n.exec(u.method,e,function(e){nw.loadingRemove({container:s}),nw.cleanTokenField(),$("."+c.id_form+" .containTokenResult_"+$(l).attr("id")).remove();var n=!0;if(void 0!==u.showsinresult&&!1===u.showsinresult&&(n=!1),!1===e)return n&&((a=document.createElement("div")).className="containTokenResult containTokenResult_"+$(l).attr("id"),$(l).after(a),(o=document.createElement("div")).className="optionToken optionToken_"+$(l).attr("id"),o.data=!1,o.innerHTML="Sin resultados",$("."+c.id_form+" .containTokenResult_"+$(l).attr("id")).append(o)),!1;if(!1!==e.length){var a;(a=document.createElement("div")).className="containTokenResult containTokenResult_"+$(l).attr("id"),a.innerHTML=nw.lists.listStructureTable(),$(l).after(a);for(var t=0;t<e.length;t++){var o,i=e[t],r={row:i,input:l,parent:c};(o=document.createElement("li")).className="ui-btn ui-btn-icon-right ui-icon-carat-r optionToken optionToken_"+$(l).attr("id"),o.data=r,o.innerHTML=i.nombre,$("."+c.id_form+" .containTokenResult_"+$(l).attr("id")+" .uiListRows").append(o)}}})},1e3)})},d.ui[p].changeValue=function(e){var n=d.ui[p].attr("type"),a=d.ui[p].attr("data-type");"radio"===n||"radio"===a?d.ui[p].find(".radios_button").change(function(){nw.cleanTokenField(),$(".errorNwForm").remove(),e(this,d)}):d.ui[p].on("input propertychange",function(){nw.cleanTokenField(),$(".errorNwForm").remove(),e(this,d)})},d.ui[p].getValue=function(){if("selectBox"!==d.ui[p].attr("type"))return d.ui[p].val();var e={};return e.data=d.ui[p].data,nw.evalueData(d.ui[p].data_array)&&(e.data_array=d.ui[p].data_array[d.ui[p].val()]),e.val=d.ui[p].val(),e.text=d.ui[p].find("option:selected").text(),e},d.ui[p].setValue=function(e){$(".errorNwForm").remove();var n=d.ui[p].attr("type"),a=d.ui[p].attr("data-type"),t=d.ui[p].attr("data-mode"),o=d.ui[p].attr("name");if("radio"===n||"radio"===a)for(var i=d.ui[p].find(".radios_button"),r=0;r<i.length;r++){var l=i[r];if(d.ui[p].find(".label_radio_nw").removeClass("ui-radio-on"),d.ui[p].find(".label_radio_nw").removeClass("ui-radio-off"),d.ui[p].find(".label_radio_nw").addClass("ui-radio-off"),l.value===e){var s=l.id;d.ui[p].find(".label_radio_"+s).removeClass("ui-radio-off"),d.ui[p].find(".label_radio_"+s).addClass("ui-radio-on"),$(l).attr("checked","checked");break}}else if("html"===n)d.ui[p].html(e);else if("camera_files"===t)console.log(e),document.querySelector(".fileUpShow_"+o)&&(document.querySelector(".fileUpShow_"+o).style.display="block",document.querySelector(".fileUpShow_"+o).style.backgroundImage="url("+mainNW.domain_rpc+e+")"),document.querySelector(".nw_textField_"+o)&&(document.querySelector(".nw_textField_"+o).value=e),$(d.ui[p]).trigger("change");else if("button"===n)document.querySelector(".material-icons").innerHTML(e);else if("file"===n){if(d.ui[p].attr("data-file",e),$(d.canvas+" .img_preview_uploader_"+o).remove(),nw.evalueData(e)){var c=e;c=1<c.split("://").length?e:config.domain_rpc+nw.getFileByType(e,60),d.ui[p].after("<div class='img_preview_uploader img_preview_uploader_"+o+" open_img_popup' data-file='"+c+"' style='background-image: url("+c+")'></div>")}}else d.ui[p].val(e);"selectBox"===n&&nw.setValSpanSel(d.ui[p]),d.ui[p].data=e,"file"!==n&&d.ui[p].trigger("change")},d.ui[p].disabled=function(e){e?(d.ui[p].attr("disabled","disabled"),d.ui[p].addClass("disabled_nw")):(d.ui[p].removeClass("disabled_nw"),d.ui[p].removeAttr("disabled"))},d.ui[p].setEnable=function(e){e?(d.ui[p].removeClass("disabled_nw"),d.ui[p].removeAttr("disabled")):(d.ui[p].attr("disabled","disabled"),d.ui[p].addClass("disabled_nw"))},d.ui[p].addListener=function(e,a){"keyup"===e||"onKeyUp"===e?document.querySelector("."+d.id_form+" ."+p).addEventListener("keyup",function(e){a(e,this)},{passive:!0}):"onKeyPress"===e||"keypress"===e?document.querySelector("."+d.id_form+" ."+p).addEventListener("keypress",function(e){a(e,this)},{passive:!0}):"execute"===e||"click"===e?nw.nclick(this,a):"change"===e||"changeValue"===e?this.changeValue(function(e,n){a()}):"clickToken"===e?($("."+d.id_form).delegate(".containTokenResult_"+d.ui[p].attr("id")+" .optionToken","click",function(e){nw.execnclick(this,function(e){a(e)})}),nw.nclick(this,function(){$("."+d.id_form+" .containTokenResult_"+p).fadeIn()})):"enter"===e||"enterKey"===e?document.querySelector("."+d.id_form+" ."+p).addEventListener("keyup",function(e){13===e.keyCode&&(console.log("ENTER"),a())},{passive:!0}):"clean"===e||"cleanInput"===e?nw.cleanInput(d,p):(console.log("Action "+e+" no reconocido"),nw.console.log("Action "+e+" no reconocido"))},d.ui[p].maxValue=function(e){this.attr("max",e)},d.ui[p].minValue=function(e){this.attr("min",e)},d.ui[p].populateSelectFromArray=function(e){nw.populateSelectFromArray(d,e,p)},d.ui[p].cleanInput=function(){nw.cleanInput(d,p)},d.ui[p].clean=function(){nw.cleanInput(d,p)},d.ui[p].clear=function(){nw.cleanInput(d,p)},d.ui[p].populateSelectAsync=function(e,n,a,t,o){nw.populateSelect(p,d,e,n,a,t,!0,o)},d.ui[p].populateSelect=function(e,n,a,t,o,i){nw.populateSelect(p,d,e,n,a,t,o,i)},$(e).attr("data-parent","#"+d.id_form)}}}),nw.Class.define("nw.videocall",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{start:function(a,e,n,t,o){void 0!==o&&nw.evalueData(o)||(o="https://meet3.gruponw.com/");nw.utils.getMobileOperatingSystem();if(nw.evalueData(t)||(t=""),"browser"===cordova.platformId){var i="height="+screen.height+",width="+screen.width+",resizable=yes,scrollbars=yes,toolbar=yes,menubar=yes,location=yes";return nw.utils.openLink("/nwlib6/nwproject/modules/webrtc/v4/initVideo.php?room="+a+t,"popup",i),!1}console.log("jitsiplugin",typeof jitsiplugin),console.log("JitsiMeetPlugin",typeof JitsiMeetPlugin),nw.videocall.getToken(a,function(e){if("undefined"!=typeof JitsiMeet){var n={};n.token=e,n.room=a,n.domain=o,nw.videocall.startJitsiMeet(n)}})},startJitsiMeet:function(e){var n=nw.userPolicies.getUserData();JitsiMeet.startConference({serverURL:e.domain,room:e.room,displayName:n.nombre,email:n.email,audioMuted:!1,videoMuted:!1,welcomePageEnabled:!0,subject:"Videollamada",audioOnly:!1,token:e.token,flags:{"chat.enabled":!0,"invite.enabled":!0,"kick-out.enabled":!0,"live-streaming.enabled":!0,"pip.enabled":!0,"raise-hand.enabled":!0,"recording.enabled":!0,"video-share.enabled":!0,"add-people.enabled":!0,"calendar.enabled":!0,"meeting-name.enabled":!0,"video-share.enabled":!0,"meeting-password.enabled":!0,"toolbox.alwaysVisible":!0}},function(e){console.log(e)})},version_015_ios:function(e,n,a,t){var o="";null!=n&&(o="?jwt="+n),console.log("callback",a),jitsiplugin.join(t+e+o,e,!1,function(e){console.log("data",e),"CONFERENCE_TERMINATED"===e&&(jitsiplugin.destroy(function(e){console.log("data",e)},function(e){console.log(e)}),console.log("EXEC callback",a),void 0!==a&&a(e))},function(e){console.log(e)})},getToken:function(a,t){var e=nw.userPolicies.getUserData(),n={};n.room=a,n.terminal=e.terminal,n.id_user=e.id_usuario,n.email=e.email,n.name=e.nombre,n.foto=e.foto,n.fileRecordingsEnabled=!0,console.log("UP",e),console.log("DATA",n),console.log("nw.getRpcUrl()",nw.getRpcUrl()),console.log("mainNW.domain_rpc",mainNW.domain_rpc);var o=new nw.rpc(nw.getRpcUrl(),"tokenGenerator");o.setAsync(!0),o.setLoading(!1);o.exec("getToken",n,function(e){if(console.log("TOKEN response: ",e),void 0!==e.response){var n=e.response;console.log("token",n),console.log("roomId",a),t(n)}else console.log("Error "+e)})},version_015:function(o,i,r){var e=nw.userPolicies.getUserData(),n={};n.room=o,n.terminal=e.terminal,n.id_user=e.id_usuario,n.email=e.email,n.name=e.nombre,n.foto=e.foto,n.fileRecordingsEnabled=!0,console.log("UP",e),console.log("DATA",n),console.log("nw.getRpcUrl()",nw.getRpcUrl());var a=new nw.rpc(mainNW.domain_rpc+"/nwlib6/tokenGenerator.inc.php","master");a.setAsync(!0),a.setLoading(!1);a.exec("getJwt",n,function(e){if(console.log("TOKEN: ",e),void 0!==e.response){var n=e.response;console.log("token",n),console.log("roomId",o),console.log("¡Token creado correctamente v 0.15.0.0.2! "+n);var a=r,t=o;jitsiplugin.join(a,t,!1,n,function(e){console.log("data",e),"CONFERENCE_TERMINATED"===e&&(jitsiplugin.destroy(function(e){console.log("data",e)},function(e){console.log(e)}),console.log("EXEC callback",i),null!=i&&!1!==i&&i(e))},function(e){console.log(e),console.log(e)})}else console.log("Error "+e)})},version_042:function(e,n,a){var t=nw.userPolicies.getUserData(),o="";null!=n&&!1!==n&&(o="?jwt="+n);var i={url:a+e+o,Subject:e,roomName:e,userName:t.nombre,userImg:config.domain_rpc+t.foto_perfil,pip:!1,chat:!0,invite:!1,calendar:!1,audioOnly:!1,AudioMuted:!0,VideoMuted:!0,callIntegrationEnable:!1,closeCaptionsEnable:!1,iosRecordingEnable:!1,liveStreamingEnable:!1,meetingNameEnable:!0,meetingPasswordEnable:!1,raiseHandEnable:!0,recordingEnable:!1,tileViewEnable:!0,toolboxEnable:!1,videoShareEnable:!1,conferenceTimeEnable:!1};console.log("JitsiMeetConferenceOptions",i),JitsiMeetPlugin.join(i,function(e){var n=JSON.parse(e);console.log("EventEmitter : ",n.eventName)},function(e){console.log("Error : ",e)})}}}),nw.Class.define("nw.notificationPushFirebaseMessaging",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{getToken:function getToken(){var up=nw.userPolicies.getUserData();if(console.log("suscribedUserNotificacionPush.js:::up.usuario",up.usuario),void 0!==up.usuario){cordova.plugins.firebase.messaging.requestPermission({forceShow:!1}).then(function(){console.log("Push messaging is allowed")});var sigue=!0;function resolve(e){if(!1===config.saveTokenPush)return!1;console.log("suscribedUserNotificacionPush.js:::token",e);var n=!0;window.localStorage.getItem("token")===e&&(n=!1),nw.evalueData(window.localStorage.getItem("token_ultima_fecha_registro"))||(n=!0),console.log("suscribedUserNotificacionPush.js:::sigue2",n),n||console.log("2. token a registrar ya existe, pero continua",e);var a=nw.utilsDate.getActualFullDate();window.localStorage.setItem("token",e),window.localStorage.setItem("token_ultima_fecha_registro",a),console.log("getToken",e),nw.console.log("getToken",e);var t=new nw.rpc(nw.getRpcUrl(),"nwMaker"),o={};o.usuario=up.usuario,o.perfil=up.perfil,o.empresa=up.empresa,o.token=e,o.device=config.device,o.sigue2=n;var i=Intl.DateTimeFormat().resolvedOptions();o.zonaHorariaActual=i.timeZone,console.log("suscribedUserNotificacionPush:::sendDataServer:::data",o),t.setAsync(!0),t.setLoading(!1);t.exec("saveTokenPush",o,function(e){console.log("suscribedUserNotificacionPush:::responseServer:::r",e),nw.console.log("Token register",e)}),console.log("subscribeToTopic",config.name),!0===config.useFirebase&&nw.notificationPush.addTokenFirebase(e,a),cordova.plugins.firebase.messaging.subscribe(config.name)}nw.evalueData(window.localStorage.getItem("token"))&&(console.log("1. token a registrar ya existe",window.localStorage.getItem("token")),sigue=!1),nw.evalueData(window.localStorage.getItem("token_ultima_fecha_registro"))||(console.log("token_ultima_fecha_registro a registrar ya existe",window.localStorage.getItem("token_ultima_fecha_registro")),sigue=!0),cordova.plugins.firebase.messaging.getToken().then(function(e){console.log("Got device token: ",e),resolve(e)}),console.log("suscribedUserNotificacionPush.js:::sigue",sigue),console.log("suscribedUserNotificacionPush.js")}cordova.plugins.firebase.messaging.onMessage(function(payload){console.log("New foreground FCM message: ",payload),nw.evalueData(payload.data)&&eval(payload.data)}),cordova.plugins.firebase.messaging.onBackgroundMessage(function(payload){console.log("New background FCM message: ",payload),nw.evalueData(payload.data)&&eval(payload.data)})},addTokenFirebase:function(e,n){if(!0===nw.firebase.loaded){nw.evalueData(n)||(n=nw.utilsDate.getActualFullDate()),console.log("fecha",n);var a=nw.userPolicies.getUserData(),t={collection:"FCM_tokens",usuario:a.usuario,perfil:a.perfil,empresa:a.empresa,token:e,fecha:n,device:config.device};nw.firebase.insert(t)}else setTimeout(function(){nw.notificationPush.addTokenFirebase(e,n)},500)},unSuscribedUserNotificacionPush:function(){void 0!==cordova.plugins&&void 0!==cordova.plugins.firebase&&void 0!==cordova.plugins.firebase.messaging&&(cordova.plugins.firebase.messaging.unsubscribe(config.name),cordova.plugins.firebase.messaging.deleteToken())},clearNotifications:function(){void 0!==cordova.plugins&&void 0!==cordova.plugins.firebase&&void 0!==cordova.plugins.firebase.messaging&&cordova.plugins.firebase.messaging.clearNotifications()},sendNotificacion:function(e,n){var a=e.to,t={title:nw.utils.tr(e.title),body:nw.utils.tr(e.body),icon:e.icon,click_action:e.callback,priority:"high",content_available:!0,show_in_foreground:!0,sound:e.sound,vibrate:!0};fetch("https://fcm.googleapis.com/fcm/send",{method:"POST",content_available:!0,headers:{Authorization:"key=AIzaSyCOoH2AZXucFRnHljZOQxQC8PPwtuIqIss","Content-Type":"application/json"},body:JSON.stringify({to:a,notification:t,show_in_foreground:!0,priority:"high",data:{data:e.data,callback:e.callback.toString(),title:e.title,body:e.body}})}).then(function(e){nw.evalueData(n)&&n(e)}).catch(function(e){console.error("sendNotificacion:::error:::"+e,e)})}}}),nw.Class.define("nw.utilsDate",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{semanadelanio:function(e){var n=new Date(e),a=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0),t=new Date(n.getFullYear(),0,1,0,0),o=t.getDay();if(0==o&&(o=7),o<5){var i=parseInt((Math.round((a-t)/1e3/60/60/24)+(o-1))/7+1);53!=i&&0!=i||(i=1)}else 0==(i=parseInt((Math.round((a-t)/1e3/60/60/24)+(o-1))/7))&&(i=52),53==i&&(i=1);return i},addMinutes:function(e,n){function a(e){return(e<10?"0":"")+e}var t=e.split(":"),o=60*t[0]+ +t[1]+ +n;return a(o%1440/60|0)+":"+a(o%60)},addMinutesToDate:function(e,n,a){var t=e.replace(/([+\-]\d\d)(\d\d)$/,"$1:$2"),o=e.split(/[- :]/),i=new Date(o[0],o[1]-1,o[2],o[3],o[4],o[5]),r=new Date(i),l=r;t=r.setMinutes(l.getMinutes()+n);var s=(t=nw.toDatetimeLocal(t)).split("T");return"date"===a?s[0]:"hour"===a?s[1]:t},dataOfDate:function(e){var n;nw.evalueData(e)||(e=nw.getActualFullDate()),"object"==typeof e&&(e=nw.getActualFullDate()),1==e.split(" ").length&&(e+=" 00:00:00"),n=e.split(" ")[0];var a=new Array(nw.utils.tr("Domingo"),nw.utils.tr("Lunes"),nw.utils.tr("Martes"),nw.utils.tr("Miércoles"),nw.utils.tr("Jueves"),nw.utils.tr("Viernes"),nw.utils.tr("Sábado")),t=e;t=t.replace(/-/g,"/");var o=new Date(t),i={};i.fecha_sin_hora=n,i.fecha_completa=e,i.fecha_anio=o.getFullYear(),i.fecha_mes=o.getMonth()+1,i.fecha_mes_string=i.fecha_mes.toString(),1===i.fecha_mes_string.length&&(i.fecha_mes_string="0"+i.fecha_mes_string),i.fecha_mes_text=nw.lettersArray(i.fecha_mes),i.fecha_mes_text_english=nw.mesTextEnglish(i.fecha_mes_string),i.fecha_dia=o.getDate(),i.fecha_dia_semana=o.getDay(),i.fecha_dia_text=a[o.getDay()];var r="SI",l="NO";return 6!=i.fecha_dia_semana&&0!=i.fecha_dia_semana||(r="NO"),0==i.fecha_dia_semana&&(l="SI"),i.fecha_dia_habil=r,i.fecha_dia_festivo=l,i.fecha=i.fecha_anio+"-"+i.fecha_mes+"-"+i.fecha_dia,i.semana=nw.semanadelanio(i.fecha),i.hora_ex=o.getTime(),i.hora_horas=o.getHours(),i.hora_minutos=o.getMinutes(),i.hora_segundos=o.getSeconds(),i.hora_completa=o.getHours()+":"+o.getMinutes()+":"+o.getSeconds(),i},diffEntreFechas:function(e,n){nw.evalueData(n)||(n=nw.getActualFullDate()),"object"==typeof e&&(e=nw.getActualFullDate()),"object"==typeof n&&(n=nw.getActualFullDate());var a=new Date(e.substr(0,10)),t=(new Date(n.substr(0,10)).getTime()-a.getTime()+864e5)/864e5;return t-=1},diferenciaHoras:function(e,n,a){var t=new Date,o=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();nw.evalueData(n)&&(o=n);var i=e,r=o.split(":"),l=i.split(":"),s=new Date,c=new Date;s.setHours(l[0],l[1],l[2]),c.setHours(r[0],r[1],r[2]),s.setHours(s.getHours()-c.getHours(),s.getMinutes()-c.getMinutes(),s.getSeconds()-c.getSeconds());var u=s.getHours()?s.getHours()+(s.getHours(),""):"",d=s.getMinutes()?+s.getMinutes()+(s.getMinutes(),""):"",p=s.getSeconds()?(s.getHours()||s.getMinutes(),s.getSeconds()+(s.getSeconds(),"")):"";1==u.length&&(u="0"+u),""==u&&(u="00"),""==d&&(d="00"),1==d.length&&(d="0"+d),""==p&&(p="00"),1==p.length&&(p="0"+p);var g=":";return!0===a&&(g="",0!=u&&"00"!=u||(u="")),u+g+d+g+p},calcularTiempoDosFechas:function(e,n,a){void 0!==n&&nw.evalueData(n)||(n=nw.getActualFullDate());var t=nw.getActualFullDate(),o=new Date(e),i=(new Date(n)-o)/1e3,r=Math.floor(i/3600),l=Math.floor(i%3600)/60,s=i%60,c=nw.diffEntreFechas(e,n),u=r<10?"0"+r:r,d=nw.dataOfDate(e),p=(nw.dataOfDate(n),d.fecha_anio),g=d.fecha_mes,m=d.fecha_mes_text,f=d.fecha_dia,w=d.fecha_dia_text,v=d.hora_horas,h=d.hora_minutos,b=l<10?"0"+l:l,_=l<10?"0"+l:s,y=u+":"+b;b=parseInt(b);var k=!1;n<e&&(k=!0);var C={};C.hoy=t,C.fecha_mayor_a_hoy=k,C.date1=e,C.date2=n,C.time_complet=y,C.days=c,C.hours=u,C.mesDate=g,C.mesDateText=m,C.dayDate=f,C.dayDateText=w,C.hoursDate=v,C.minutesDate=h,C.minutes=b,C.seconds=_;var D=m+" "+f+" "+nw.utils.tr("a las")+" "+v+":"+h+" "+nw.utils.tr("del")+" "+p;return!0===k?D=m+" "+f+" "+nw.utils.tr("a las")+" "+v+":"+h+" "+nw.utils.tr("del")+" "+p:0<c?D=!0===a?c+" "+nw.utils.tr("días"):1===c?nw.str("Ayer a las")+" "+v+":"+h:m+" "+f+" "+nw.utils.tr("a las")+" "+v+":"+h+" "+nw.utils.tr("del")+" "+p:parseFloat(u)<24&&(parseFloat(u)<1?b<59&&(D=!0===a?b+" "+nw.str("mins"):"EN"==nw.utils.getLang?b+" "+nw.str("minutos")+" "+nw.str("hace"):nw.str("Hace")+" "+b+" "+nw.str("minutos")):D=!0===a?parseFloat(u)+" "+nw.str("hrs")+", "+b+" "+nw.str("mins"):"EN"==nw.utils.getLang?parseFloat(u)+" "+nw.str("horas")+" "+nw.str("y")+" "+b+" "+nw.str("minutos")+" "+nw.str("hace"):nw.str("Hace")+" "+parseFloat(u)+" "+nw.str("horas")+" "+nw.str("y")+" "+b+" "+nw.str("minutos")),C.dateInFormat=D,C},lettersArray:function(e){var n={};return n[1]=nw.utils.tr("Enero"),n[2]=nw.utils.tr("Febrero"),n[3]=nw.utils.tr("Marzo"),n[4]=nw.utils.tr("Abril"),n[5]=nw.utils.tr("Mayo"),n[6]=nw.utils.tr("Junio"),n[7]=nw.utils.tr("Julio"),n[8]=nw.utils.tr("Agosto"),n[9]=nw.utils.tr("Septiembre"),n[10]=nw.utils.tr("Octubre"),n[11]=nw.utils.tr("Noviembre"),n[12]=nw.utils.tr("Diciembre"),n[e.toString()]},mesesArray:function(e){return lettersArray(e)},mesTextEnglish:function(e){var n={"01":"January","02":"February","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"};return n[e]},diasArray:function(e){var n={};return n[1]=nw.utils.tr("Lunes"),n[2]=nw.utils.tr("Martes"),n[3]=nw.utils.tr("Miércoles"),n[4]=nw.utils.tr("Jueves"),n[5]=nw.utils.tr("Viernes"),n[6]=nw.utils.tr("Sábado"),n[0]=nw.utils.tr("Domingo"),n[e]},getActualFullDate:function(e){var n=nw.utilsDate.getActualDate(e),a=nw.utilsDate.getActualHour(e);return"datetime-local"==e?n+"T"+a:n+" "+a},getActualHour:function(e){var n=new Date,a=nw.addZero(n.getHours()),t=nw.addZero(n.getMinutes()),o=nw.addZero(n.getSeconds());return"datetime-local"==e?a+":"+t:a+":"+t+":"+o},getActualDate:function(e){var n=new Date,a=nw.addZero(n.getDate()),t=nw.addZero(n.getMonth()+1);return nw.addZero(n.getFullYear())+"-"+t+"-"+a},addZero:function(e){return e<10&&(e="0"+e),e},timeStampUnixToDate:function(e){var n=new Date(1e3*e),a=n.getHours(),t="0"+n.getMinutes(),o="0"+n.getSeconds(),i=nw.addZero(a)+":"+nw.addZero(t.substr(-2))+":"+o.substr(-2),r=nw.addZero(n.getDate()),l=nw.addZero(n.getMonth()+1);return nw.addZero(n.getFullYear())+"-"+l+"-"+r+" "+i}}}),nw.Class.define("nw.newPage",{extend:nw.object,construct:function(){var e=this;e.id="nw_page_"+nw.createRandomId(),e.canvas="nw_page_"+nw.createRandomId(),e.footer=!1,e.isCreateInPageShow=!0,e.changeHash=!0,e.role="page",e.styleCloseIOS=config.styleCloseIOS,e.transition=config.defaultPageTransition,e.logotipo_text=mainNW.logotipoHeader,e.showBack=!0,e.closeBack=!1,e.formContainer=!1,e.drag=!1,e.container="body"},destruct:function(){var n;console.log("DESTRUCCIÓN DE OBJETO COMPLETO"),n=setTimeout(function(){var e=$("#"+self.id);!0!==e.hasClass("ui-page-active")&&e&&e.remove(),clearTimeout(n)},1e3)},members:{append:function(e){nw.append("."+this.id,e)},createBase:function(){return this.create(),nw.normalizeRadioButton(),this},createAndShow:function(){return $("."+this.id).remove(),this.create(),this.show(),nw.normalizeRadioButton(),this},create:function(){var a=this;void 0!==a.title&&(this.logotipo_text=a.title);var e=" headerEnc_"+config.dataPosition,n="";"fixed"!==config.dataPosition&&(n=" style='margin-top: "+mainNW.enc_height+"'");var t="data-position='"+config.dataPosition+"'",o="<div data-role='header' data-dom-cache='true' class='ui-header ui-bar-"+config.theme+" my-header header "+e+"' "+t+" style='background-color: "+mainNW.enc_color+";min-height: "+mainNW.enc_height+"'>";o+=" <h1 class='ui-title logotipoHeader' role='heading' aria-level='1'>"+nw.utils.tr(a.logotipo_text)+"</h1>",o+="</div>",o+="<div role='main' class='ui-content contentCenter' "+n+" >",o+=this.html,void 0!==a.accept&&(this.acceptButton=a.accept),void 0!==a.cancel&&(this.cancelButton=a.cancel),void 0===a.acceptButton&&void 0===a.cancelButton||(o+=" <div class='ui-field-contain containBtnFooter'></div>"),o+="</div>",!1!==a.footer&&(o+="<div data-role='footer'>",o+="<h4>"+a.footer+"</h4>",o+="</div>"),(p=document.createElement("div")).className="pageNew "+a.id,p.innerHTML=o,p.id=a.id;var i=document.querySelector("#"+a.id);i&&nw.remove(i),$(a.container).append(p),"body"!==a.container&&$(a.container).addClass("new_page_incontainer"),document.querySelector("#"+a.id)&&(document.querySelector("#"+a.id).setAttribute("data-role",a.role),document.querySelector("#"+a.id).setAttribute("data-dom-cache","true"),!1===a.showBack&&document.querySelector("#"+a.id).setAttribute("data-close-btn","none"));var r="Aceptar",l="Cancelar";(void 0!==a.acceptText&&(r=a.acceptText),void 0!==a.cancelText&&(l=a.cancelText),void 0!==this.acceptButton)&&((p=document.createElement("button")).className="btnExec btnForm ui-shadow ui-btn ui-corner-all ui-btn-inline acceptButtonForm",p.innerHTML=nw.utils.tr(r),p.callback=this.acceptButton,$("#"+a.id+" .containBtnFooter").append(p));void 0!==this.cancelButton&&((p=document.createElement("button")).className="btnExec btnForm ui-shadow ui-btn ui-corner-all ui-btn-inline cancelButtonForm",p.innerHTML=nw.utils.tr(l),p.callback=this.cancelButton,$("#"+a.id+" .containBtnFooter").append(p));if(!0===a.showBack){var s="";nw.evalueData(a.textClose)&&(s=a.textClose);var c="background-size:15px;";nw.evalueData(a.styleCloseIOS)&&(c=a.styleCloseIOS);var u=config.colorBtnBackIOS;nw.evalueData(a.colorBtnBackIOS)&&(u=a.colorBtnBackIOS);var d="material-icons arrow_back normal";nw.evalueData(a.iconBackClose)&&(d=a.iconBackClose),(b={}).colorBtnBackIOS=u,b.style=c,b.text=nw.utils.tr(s),b.type="button",b.icon=d,b.position="header_left",b.className="btn_head_back",b.callback=function(){var n;nw.back(),n=setTimeout(function(){var e=$("#"+a.id);!0!==e.hasClass("ui-page-active")&&e&&e.remove(),clearTimeout(n)},1e3)};var p=nw.createButton(b);$("#"+a.id+" .header").prepend(p)}if(!1!==a.showMinimize&&"object"==typeof a.showMinimize){nw.addClass("."+a.id,"contain_minimize_window");var g="";nw.evalueData(a.showMinimize.text)&&(g=a.showMinimize.text);var m="";nw.evalueData(a.showMinimize.style)&&(m=a.showMinimize.style);var f="header_right";nw.evalueData(a.showMinimize.position)&&(f=a.showMinimize.position);var w="";nw.evalueData(a.showMinimize.className)&&(w=" "+a.showMinimize.className);u=config.colorBtnBackIOS;nw.evalueData(a.colorBtnBackIOS)&&(u=a.colorBtnBackIOS);d="material-icons remove normal";var v={};v.colorBtnBackIOS=u,v.style=m,v.text=nw.utils.tr(g),v.type="button",v.icon=d,v.position=f,v.className="btn_head_minimize"+w,v.callback=function(){a.minimize()};var h=nw.createButton(v);$("#"+a.id+" .header").prepend(h)}if(!0===a.closeBack){s="";nw.evalueData(a.textClose)&&(s=a.textClose);c="background-size:15px;";nw.evalueData(a.styleCloseIOS)&&(c=a.styleCloseIOS);u=config.colorBtnBackIOS;nw.evalueData(a.colorBtnBackIOS)&&(u=a.colorBtnBackIOS);var b;d="material-icons close normal";nw.evalueData(a.iconBackClose)&&(d=a.iconBackClose),(b={}).colorBtnBackIOS=u,b.style=c,b.text=nw.utils.tr(s),b.type="button",b.icon=d,b.position="header_left",b.className="btn_head_close",b.callback=function(){nw.evalueData(a.closeBackCallBack)?a.closeBackCallBack():(a.reject(),nw.loadHome())};p=nw.createButton(b);$("#"+a.id+" .header").prepend(p)}},minimize:function(){var n=this;n.drag&&nw.utils.drag("."+n.id+".contain_minimize_window"),nw.addClass("."+n.id,"contain_minimize_window_transition"),setTimeout(function(){nw.removeClass("."+n.id,"contain_minimize_window_transition")},1e3);var e=!1;nw.evalueData(n.showMinimize.onMinimizeStart)&&(e=n.showMinimize.onMinimizeStart),n.minimized=!0,nw.addClass("."+n.id,"minimize_window"),nw.evalueData(e)&&e();var a=document.querySelector("."+n.id+".minimize_window");a&&nw.nclick(a,function(e){n.maximize()});var t="";document.querySelector(".containMinimizeWindows")?t=document.querySelector(".containMinimizeWindows"):((t=document.createElement("div")).className="containMinimizeWindows",document.body.appendChild(t));var o="Minim";nw.evalueData(n.showMinimize.titleOnMinimize)&&(o=n.showMinimize.titleOnMinimize);var i=document.createElement("div");i.className="windowMinimize windowMinimize_"+n.id,i.innerHTML="<div class='windowMinimizeTitle'>"+nw.utils.tr(o)+"</div>",nw.nclick(i,function(e){n.maximize()}),t.appendChild(i)},maximize:function(e){var n=this,a=n.minimized=!1;nw.evalueData(n.showMinimize.onMinimizeRestaured)&&(a=n.showMinimize.onMinimizeRestaured);var t=n.id;return nw.evalueData(e)&&"string"==typeof e&&(t=e),nw.newPage.maximize(t,a,n)},reject:function(){return nw.reject(this)},show:function(){var e=this;nw.utils.remove(".containMenuFloat");var n=e.transition;if(!0===config.nativeTransitions&&(n="none"),nw.changePage("#"+e.id,{transition:n,reverse:!1,changeHash:e.changeHash,reloadPage:!1,showLoadMsg:!0,role:e.role,allowSamePageTransition:!1}),nw.addButtonsPage(e),nw.newPage.lastTransition=n,nw.utils.getDebug()&&(console.log("%c<<<<DEBUG: nw.newPage.lastTransition>>>>","background: #c655c1; color: #fff"),console.log("nw.newPage.lastTransition",nw.newPage.lastTransition)),$("#"+e.id).on("pageshow",function(e,n){nw.utils.getDebug()&&console.log("%c<<<<DEBUG: OKThis page was just hidden: "+n.prevPage+">>>>","background: #c655c1; color: #fff")}),nw.loadFastClick(),e.drag&&!nw.isMobile()){var a=document.querySelector("."+e.id+" .ui-header");a&&(a.onmousedown=function(){nw.utils.drag("."+e.id)})}}},statics:{lastTransition:null,maximize:function(e,n,a){var t=document.querySelector("."+e);if(nw.evalueData(a)&&a.drag){var o=t.closeDragElement;if(nw.utils.getDebug()&&console.log("dragElement",o),!o)return!1}nw.addClass("."+e,"contain_minimize_window_transition"),setTimeout(function(){nw.removeClass("."+e,"contain_minimize_window_transition")},1e3),nw.removeClass("."+e,"minimize_window"),nw.addClass("."+e,"ui-page-active");var i=document.querySelector(".windowMinimize_"+e);i&&i.remove(),nw.evalueData(n)&&n(),t.style.top="auto",t.style.left="auto"}}}),nw.Class.define("nw.utils",{extend:nw.object,construct:function(){},destruct:function(){},statics:{uniqueArray2d:function(e){function t(e,n){if(e.length!==n.length)return!1;for(var a=0;a<e.length;++a)if(e[a]!==n[a])return!1;return!0}function n(e,n){for(var a=0;a<e.length;++a)if(t(e[a],n))return!0;return!1}for(var a=[],o=0;o<e.length;++o)n(a,e[o])||a.push(e[o]);return a},populateSelectFromArray:function(e,n,o,a){console.log("array",n);var i=$(e).attr("data-type");!0===a&&("radio"===i?e.html(""):e.find("option").remove().end()),e.data_array=n;var r=0;"radio"===i&&(r=e.find(".radios_button").length),$.each(n,function(e,n){console.log("key",e),console.log("value",n);var a=n;"object"==typeof n&&(e=n.id,a=n.nombre);var t=JSON.stringify(n);a=nw.utils.tr(a),"radio"===i?self.ui[o].append('<input model="'+t+'" type="radio" name="'+o+'" class="radios_button" id="'+o+"-"+r+'" value="'+e+'" /><label class="label_radio_nw label_radio_'+o+"-"+r+'" for="'+o+"-"+r+'">'+a+"</label>"):self.ui[o].append("<option model="+t+" value="+e+">"+a+"</option>"),r++}),nw.normalizeRadioButton()},ucFirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},cleanHtml:function(e){return nw.utils.stripHtml(e)},stripHtml:function(e){var n=document.createElement("DIV");n.innerHTML=e;var a=n.textContent||n.innerText||"";return delete n,a},fastAsyncRpcCall:function(e,n,a,t){var o=new nw.rpc(nw.getRpcUrl(),e);o.setAsync(!0),o.exec(n,a,t)},startCall:function(e){if(void 0===window.plugins)return window.open("tel:+"+e),!1;if(void 0===window.plugins.CallNumber)return window.open("tel:+"+e),!1;window.plugins.CallNumber.callNumber(function(e){console.log("Success:"+e)},function(e){console.log("Error:"+e),nw.utils.errorReport("Error startCall",e)},e,!0)},getDebug:function(){return app.debug},setDebug:function(){nw.debug=!1,app.debug=!1},errorReport:function(e,n){nw.utils.error(n);for(var a=(new Error).stack.split("\n"),t=0;t<a.length;t++)a[t]+"<br />";return nw.loadingRemove(),nw.errorLogger.process(n),!1},error:function(e,n,a){var t=!1;nw.evalueData(mainNW.showConsoleEvents)&&(t=mainNW.showConsoleEvents),nw.evalueData(window.localStorage.getItem("showConsoleEvents"))&&(t=window.localStorage.getItem("showConsoleEvents"));var o=!1;if(nw.evalueData(mainNW.showConsoleDeveloper)&&(o=mainNW.showConsoleDeveloper),nw.evalueData(window.localStorage.getItem("showConsoleDeveloper"))&&(o=window.localStorage.getItem("showConsoleDeveloper")),"controls"===a&&(!1===t||"false"===t))return!1;var i=":: ";return nw.evalueData(n)&&console.log(e,n),"object"==typeof e?$.each(e,function(e,n){i+=e+": ",nw.evalueData(n,0)&&("object"==typeof n?$.each(n,function(e,n){i+=e+": "+n+","}):i+=n+"<br />"),i+="<br /><br />"}):(i+=e+" ",nw.evalueData(n)&&("object"==typeof n?(i+=" ",$.each(n,function(e,n){i+=" "+e+": "+n+"<br />"})):i+=n+" ")),nw.utils.getDebug()&&console.log("ERROR:",i),!0!==o&&"true"!==o||$(".consoleEventsNw").append("<br />"+i),$(".consoleEventsNw").scrollTop(1e11),i},openLink:function(e,n,a){void 0===n&&(n="_self"),"blank"===n&&(n="_blank"),"self"===n&&(n="_self");var t="";"popup"===n&&(nw.utils.evalueData(a)||(a="top=0,left=0,width=800,height=800"),t="toolbar=yes,scrollbars=yes,resizable=yes,"+a),window.open(e,n,t)},stripTags:function(e){return nw.strip_tags(e)},strip_tags:function(e){return!!nw.evalueData(e)&&(e=e.toString()).replace(/<\/?[^>]+>/gi,"")},isMobile:function(){var e=navigator.userAgent;return!!(e.match(/Iphone/i)||e.match(/Ipod/i)||e.match(/Android/i)||e.match(/J2ME/i)||e.match(/BlackBerry/i)||e.match(/iPhone|iPad|iPod/i)||e.match(/Opera Mini/i)||e.match(/IEMobile/i)||e.match(/Mobile/i)||e.match(/Windows Phone/i)||e.match(/windows mobile/i)||e.match(/windows ce/i)||e.match(/webOS/i)||e.match(/palm/i)||e.match(/bada/i)||e.match(/series60/i)||e.match(/nokia/i)||e.match(/symbian/i)||e.match(/HTC/i))},getMobileOperatingSystem:function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"WINDOWS_PHONE":/android/i.test(e)?"ANDROID":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"IOS":"NONE"},getDevice:function(){var e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}},n=!1,a=e.any();return null!==a&&(n=a),n},getDevType:function(){var e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"},infoDevice:function(){return{timeOpened:new Date,timezone:(new Date).getTimezoneOffset()/60,pageon:window.location.pathname,referrer:document.referrer,previousSites:history.length,browserName:navigator.appName,browserEngine:navigator.product,browserVersion1a:navigator.appVersion,browserVersion1b:navigator.userAgent,browserLanguage:navigator.language,browserOnline:navigator.onLine,browserPlatform:navigator.platform,javaEnabled:navigator.javaEnabled(),sizeScreenW:screen.width,sizeScreenH:screen.height,sizeDocW:document.width,sizeDocH:document.height,sizeInW:innerWidth,sizeInH:innerHeight,sizeAvailW:screen.availWidth,sizeAvailH:screen.availHeight,latitude:nwgeo.latitude,longitude:nwgeo.longitude}},appMode:function(){return void 0!==cordova.platformId&&"browser"!==cordova.platformId?"in_app":"out_app"},testing:function(){return!0===config.testing||"true"===config.testing||1==config.testing||"SI"===config.testing||"YES"===config.testing||"si"===config.testing||"t"===config.testing},toDatetimeLocal:function(e){if("string"==typeof e)n=(n=e.substring(0,16)).replace(" ","T");else var n=new Date(e).toDatetimeLocal();return n},validateNwPayments:function(e){var n={};n.allLog=e,n.responseMessage=e.transactionResponse.responseMessage,n.status="",n.status_description="",n.approved="",n.responseCode="",n.modo_pruebas=!1,n.orderId=e.transactionResponse.transactionId;var a=!1;return"DECLINED_TEST_MODE_NOT_ALLOWED"===e.transactionResponse.responseCode&&(n.responseCode="DECLINED_TEST_MODE_NOT_ALLOWED",a=!0),"INVALID_CARD"===e.transactionResponse.responseCode&&(n.responseCode="La tarjeta es inválida."),"ERROR"===e.transactionResponse.responseCode&&(n.responseCode="Ocurrió un error general."),"APPROVED"===e.transactionResponse.responseCode&&(n.responseCode="La transacción fue aprobada."),"ANTIFRAUD_REJECTED"===e.transactionResponse.responseCode&&(n.responseCode="La transacción fue rechazada por el sistema anti-fraude."),"PAYMENT_NETWORK_REJECTED"===e.transactionResponse.responseCode&&(n.responseCode="La red financiera rechazó la transacción."),"ENTITY_DECLINED"===e.transactionResponse.responseCode&&(n.responseCode="La transacción fue declinada por el banco o por la red financiera debido a un error."),"INTERNAL_PAYMENT_PROVIDER_ERROR"===e.transactionResponse.responseCode&&(n.responseCode="Ocurrió un error en el sistema intentando procesar el pago."),"INACTIVE_PAYMENT_PROVIDER"===e.transactionResponse.responseCode&&(n.responseCode="El proveedor de pagos no se encontraba activo."),"DIGITAL_CERTIFICATE_NOT_FOUND"===e.transactionResponse.responseCode&&(n.responseCode="La red financiera reportó un error en la autenticación."),"INVALID_EXPIRATION_DATE_OR_SECURITY_CODE"===e.transactionResponse.responseCode&&(n.responseCode="El código de seguridad o la fecha de expiración estaba inválido."),"INVALID_RESPONSE_PARTIAL_APPROVAL"===e.transactionResponse.responseCode&&(n.responseCode="Tipo de respuesta no válida. La entidad aprobó parcialmente la transacción y debe ser cancelada automáticamente por el sistema."),"INSUFFICIENT_FUNDS"===e.transactionResponse.responseCode&&(n.responseCode="La cuenta no tenía fondos suficientes."),"CREDIT_CARD_NOT_AUTHORIZED_FOR_INTERNET_TRANSACTIONS"===e.transactionResponse.responseCode&&(n.responseCode="La tarjeta de crédito no estaba autorizada para transacciones por Internet."),"INVALID_TRANSACTION"===e.transactionResponse.responseCode&&(n.responseCode="La red financiera reportó que la transacción fue inválida."),"EXPIRED_CARD"===e.transactionResponse.responseCode&&(n.responseCode="La tarjeta ya expiró."),"RESTRICTED_CARD"===e.transactionResponse.responseCode&&(n.responseCode="La tarjeta presenta una restricción."),"CONTACT_THE_ENTITY"===e.transactionResponse.responseCode&&(n.responseCode="Debe contactar al banco."),"REPEAT_TRANSACTION"===e.transactionResponse.responseCode&&(n.responseCode="Se debe repetir la transacción."),"ENTITY_MESSAGING_ERROR"===e.transactionResponse.responseCode&&(n.responseCode="La red financiera reportó un error de comunicaciones con el banco."),"BANK_UNREACHABLE"==e.transactionResponse.responseCode&&(n.responseCode="El banco no se encontraba disponible."),"EXCEEDED_AMOUNT"==e.transactionResponse.responseCode&&(n.responseCode="La transacción excede un monto establecido por el banco."),"NOT_ACCEPTED_TRANSACTION"==e.transactionResponse.responseCode&&(n.responseCode="La transacción no fue aceptada por el banco por algún motivo."),"ERROR_CONVERTING_TRANSACTION_AMOUNTS"==e.transactionResponse.responseCode&&(n.responseCode="Ocurrió un error convirtiendo los montos a la moneda de pago."),"EXPIRED_TRANSACTION"==e.transactionResponse.responseCode&&(n.responseCode="La transacción expiró."),"PENDING_TRANSACTION_REVIEW"===e.transactionResponse.responseCode&&(n.responseCode="La transacción fue detenida y debe ser revisada, esto puede ocurrir por filtros de seguridad."),"PENDING_TRANSACTION_CONFIRMATION"===e.transactionResponse.responseCode&&(n.responseCode="La transacción está pendiente de ser confirmada."),"PENDING_TRANSACTION_TRANSMISSION"===e.transactionResponse.responseCode&&(n.responseCode="La transacción está pendiente para ser trasmitida a la red financiera. Normalmente esto aplica para transacciones con medios de pago en efectivo."),"PAYMENT_NETWORK_BAD_RESPONSE"===e.transactionResponse.responseCode&&(n.responseCode="El mensaje retornado por la red financiera es inconsistente."),"PAYMENT_NETWORK_NO_CONNECTION"===e.transactionResponse.responseCode&&(n.responseCode="No se pudo realizar la conexión con la red financiera."),"PAYMENT_NETWORK_NO_RESPONSE"===e.transactionResponse.responseCode&&(n.responseCode="La red financiera no respondió."),"FIX_NOT_REQUIRED"===e.transactionResponse.responseCode&&(n.responseCode="Clínica de transacciones: Código de manejo interno."),"AUTOMATICALLY_FIXED_AND_SUCCESS_REVERSAL"===e.transactionResponse.responseCode&&(n.responseCode="Clínica de transacciones: Código de manejo interno. Sólo aplica para la API de reportes."),"AUTOMATICALLY_FIXED_AND_UNSUCCESS_REVERSAL"===e.transactionResponse.responseCode&&(n.responseCode="Clínica de transacciones: Código de manejo interno. Sólo aplica para la API de reportes."),"AUTOMATIC_FIXED_NOT_SUPPORTED"===e.transactionResponse.responseCode&&(n.responseCode="Clínica de transacciones: Código de manejo interno. Sólo aplica para la API de reportes."),"NOT_FIXED_FOR_ERROR_STATE"===e.transactionResponse.responseCode&&(n.responseCode="Clínica de transacciones: Código de manejo interno. Sólo aplica para la API de reportes."),"ERROR_FIXING_AND_REVERSING"===e.transactionResponse.responseCode&&(n.responseCode="Clínica de transacciones: Código de manejo interno. Sólo aplica para la API de reportes."),"ERROR_FIXING_INCOMPLETE_DATA"===e.transactionResponse.responseCode&&(n.responseCode="Clínica de transacciones: Código de manejo interno. Sólo aplica para la API de reportes."),"APPROVED"===e.transactionResponse.state?(n.status="APPROVED",n.status_description="Transacción aprobada",n.approved=!0):"DECLINED"===e.transactionResponse.state?(n.status="DECLINED",n.status_description="Transacción rechazada",n.approved=!1):"ERROR"===e.transactionResponse.state?(n.status="ERROR",n.status_description="Error procesando la transacción",n.approved=!1):"EXPIRED"===e.transactionResponse.state?(n.status="EXPIRED",n.status_description="Transacción expirada",n.approved=!1):"PENDING"===e.transactionResponse.state?(n.status="PENDING",n.status_description="Transacción pendiente o en validación",n.approved=!1):"SUBMITTED"===e.transactionResponse.state&&(n.status="PENDING",n.status_description="Transacción enviada a la entidad financiera y por algún motivo no terminó su procesamiento. Sólo aplica para la API de reportes.",n.approved=!1),!0===a&&(n.status="APPROVED",n.status_description="Transacción aprobada (modo pruebas)",n.approved=!0),n.modo_pruebas=a,n},empty:function(e){$(e).empty()},remove:function(e){$(e).remove()},removeDuplicates:function(e,n){var a=[],t={};for(var o in e)t[e[o][n]]=e[o];for(o in t)a.push(t[o]);return a},launchNavigatorUbication:function(e){if("undefined"==typeof launchnavigator)return nw.dialog("El plugin launchnavigator no está instalado"),!1;if(!nw.evalueData(e))return nw.dialog2("Debe pasar el array opts con latitude longitude y mode opcional"),!1;var n=e.latitude,a=e.longitude,t={};nw.evalueData(e.latitudeStart)&&nw.evalueData(e.longitudeStart)&&(t={start:e.latitudeStart+", "+e.longitudeStart});var o="all_apps";if(nw.evalueData(e.mode)&&(o=e.mode),"all_apps"===o)launchnavigator.navigate([n,a],t);else if("waze,googleMaps"===o){console.log(mainNW);var i={useDialogNative:!1,cleanHTML:!1,addClass:"launchubication"};i.textAccept="<img alt=''  src= '"+domainLib+"img/Waze.png'><span>Waze</span>",i.textCancel="<img alt=''  src= '"+domainLib+"img/google_maps.png'><span>Google Maps</span>",i.closeEnc=!0,i.autocierre=!0;nw.dialog("Continuar con:",function(){nw.launchNavigatorUbicationWaze(e)},function(){nw.launchNavigatorUbicationGoogleMaps(e)},i)}else"waze"===o?nw.launchNavigatorUbicationWaze(e):"googleMaps"===o&&nw.launchNavigatorUbicationGoogleMaps(e)},launchNavigatorUbicationGoogleMaps:function(e){var a=e.latitude,t=e.longitude;launchnavigator.isAppAvailable(launchnavigator.APP.GOOGLE_MAPS,function(e){var n;n=e?launchnavigator.APP.GOOGLE_MAPS:(console.warn("Google Maps not available - falling back to user selection"),launchnavigator.APP.USER_SELECT),launchnavigator.navigate([a,t],{app:n})})},launchNavigatorUbicationWaze:function(e){var a=e.latitude,t=e.longitude;launchnavigator.isAppAvailable(launchnavigator.APP.WAZE,function(e){var n;n=e?launchnavigator.APP.WAZE:(console.warn("Waze not available - falling back to user selection"),launchnavigator.APP.USER_SELECT),launchnavigator.navigate([a,t],{app:n})})},showZeroRows:function(e,n){$(e.getContainer()+" > .nwlist > .containTable > .uiListRows").html("<div class='showZeroRows showZeroRows_"+e.id+"'>"+nw.utils.tr(n)+"</div>")},addClass:function(e,n){if("string"==typeof e&&(e=document.querySelector(e)),!e)return console.log("%c<<<<ERROR: nw.utils.addClass>>>>","background: red; color: #fff"),console.warn("El elemento no existe para la clase "+n,e),!1;if(e.classList)e.classList.add(n);else{var a=" "+(e.getAttribute("class")||"")+" ";a.indexOf(" "+n+" ")<0&&setClass(e,(a+n).trim())}return!0},removeClass:function(e,n,a){var t=null;"string"==typeof e?t=document.querySelectorAll(e):(t=e).classList.remove(n);for(var o=t.length,i=0;i<o;i++){t[i].classList.remove(n)}return!0},cleanUserNwC:function(e){if(null===e)return"";var n=(e=e.toString()).replace(/\//gi,"");n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/\?/gi,"")).replace(/\=/gi,"")).replace(/\./gi,"")).replace(/\,/gi,"")).replace(/\&/gi,"")).replace(/\=/gi,"")).replace(/\@/gi,"")).replace(/\-/gi,"")).replace(/\./gi,"")).replace(/\_/gi,"")).replace(/\-/gi,"")).replace(/\ /gi,"")).replace(/\!/gi,"")).replace(/\:/gi,"")).replace(".","");for(var a="ÃÀÁÄÂÈÉËÊÌÍÏÎÒÓÖÔÙÚÜÛãàáäâèéëêìíïîòóöôùúüûÑñÇç",t=0;t<a.length;t++)n=n.replace(a.charAt(t),"AAAAAEEEEIIIIOOOOUUUUaaaaaeeeeiiiioooouuuunncc".charAt(t));return n},playSound:function(e,n){var a="",t=document.createElement("audio"),o=document.body;return void 0!==n&&(!0===n.controls&&(t.controls="true"),!0===n.loop&&(t.loop="true"),!0===n.muted&&(t.muted="true"),"undefined"!==n.className&&(a=n.className)),""!==a&&document.querySelector("."+a)&&document.querySelector("."+a).remove(),t.volume=parseFloat(config.soundNotificacionDesktopVolume),t.className="soundNewAddUser "+a,t.src=e,t.autoplay="true",t.onloadstart=function(){},o.appendChild(t),t.play(),t},getDataCountryIP:function(){return window.visitor_loaded=function(){var e=visitor;console.log("visitor_loaded",e)},window.visitor_opts={enable_location:!0,session_days:5},nw.require("nwmaker/visitor.js",function(){},!0),!0},getPositionByIP:function(e){var n=new XMLHttpRequest;n.onload=function(){var e=JSON.parse(this.responseText);console.log("getPositionByIP",e)},n.onerror=function(e){console.log("ERROR getposition",e)},n.open("get","https://api.ipstack.com/190.130.72.175?access_key=87ed7b19bd04ce21b2c4f2623c35508d",!0),n.send()},addNumber:function(e){var n,a,t;a=(n=(e+="").split("."))[0],t=1<n.length?"."+n[1]:"";for(var o=/(\d+)(\d{3})/;o.test(a);)a=a.replace(o,"$1,$2");return a+t},getToken:function(){var e=null;return nw.evalueData(window.localStorage.getItem("token"))&&(e=window.localStorage.getItem("token")),e},getPermission:function(l,s){if(void 0===window.plugins)return!1;window.plugins.Permission.request(l,function(e){for(var n=l.length,a=0,t=0;t<n;t++){var o=l[t];e[o]&&(a++,console.log("permission is granted "+o))}console.log("results",e),console.log("permissionType",l),console.log("totalPerms",a),console.log("total",n);var i=!1;if(n<=a&&(i=!0),void 0!==s){var r={};r.permisosConcedidos=i,r.results=e,r.permissionType=l,r.total_solicitados=n,r.total_concedidos=a,s(r)}},function(e){console.log(e),s(!1)})},activateBackgroundMode:function(){app.activateBackgroundMode()},inactivateBackgroundMode:function(){app.inactivateBackgroundMode()},openAppToFront:function(){app.openAppToFront()},turnScreenOn:function(){void 0!==window.plugins&&void 0!==cordova.plugins.backgroundMode&&cordova.plugins.backgroundMode.wakeUp()},turnScreenOnAndUnlocked:function(){void 0!==window.plugins&&void 0!==cordova.plugins.backgroundMode&&(cordova.plugins.backgroundMode.wakeUp(),cordova.plugins.backgroundMode.unlock())},shareSocial:function(e,n,a){return void 0!==navigator.share?(navigator.share(e,n,a),!0):(nw.dialog2("La extensión no está habilitada. Consulte con soporte."),!1)},initVideoCallNw:function(e,n,a,t){return nw.videocall.start(e,n,a,t)},getGET:function(e){var n=document.location.href;void 0!==e&&(n=e);var a=n.split("?")[1];if(null==a)return!1;for(var t=a.split("&"),o={},i=0,r=t.length;i<r;i++){var l=t[i].split("=");o[l[0]]=unescape(decodeURI(l[1]))}return o},setValSpanSel:function(e){var n=$(e).attr("data-parent"),a=$(e).attr("name"),t=$(e).find("option:selected").text();$(n+" .spanTextShow_"+a).text(t)},createRandomId:function(){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<5;a++)e+=n.charAt(Math.floor(Math.random()*n.length));return e},scrollPage:function(e,n,a,t){nw.evalueData(n)||(n=2e3),nw.evalueData(a)||(a=100);var o=$(e).offset();if(nw.evalueData(o)){var i=parseInt(o.top)-parseInt(a),r="html, body";nw.evalueData(t)&&(r=t),$(r).animate({scrollTop:i},parseInt(n))}},getExtensionFile:function(e){return(e=e.toString()).substring(e.lastIndexOf(".")).toLowerCase().split("?")[0]},getArraysFile:function(e){var n={};return n.extensiones_img=new Array(".gif",".jpg",".png",".JPG",".JPEG",".jpeg",".PNG",".GIF",".svg",".SVG",".bmp",".BMP",".tif",".TIF"),n.extensiones_pdf=new Array(".pdf",".PDF"),n.extensiones_excel=new Array(".xls",".XLS",".xlsx",".XLSX"),n.extensiones_word=new Array(".doc",".DOC",".docx",".DOCX",".odt",".ODT"),n.extensiones_apk=new Array(".apk",".APK"),n.extensiones_html=new Array(".html",".htm",".HTML",".HTM"),n.extensiones_zip=new Array(".zip",".ZIP",".rar",".RAR",".tar",".TAR",".war",".WAR"),n[e]},getFileByType:function(e,n,a){if(!nw.utils.evalueData(e))return"";!1===nw.evalueData(n)&&(n="200");var t=nw.utils.getArraysFile("extensiones_img"),o=nw.utils.getArraysFile("extensiones_pdf"),i=nw.utils.getArraysFile("extensiones_excel"),r=nw.utils.getArraysFile("extensiones_word"),l=nw.utils.getArraysFile("extensiones_apk"),s=nw.utils.getArraysFile("extensiones_html"),c=nw.utils.getArraysFile("extensiones_zip"),u=nw.getExtensionFile(e),d=!1,p="/nwlib6/includes/phpthumb/phpThumb.php?src=",g="&w="+n+"&f=";"nophpthumb"==a&&(g=p="");for(var m=0;m<t.length;m++)if(t[m]==u){u=u.replace(".",""),""==g&&(u=""),e=p+e+g+u,d=!0;break}for(m=0;m<o.length;m++)if(o[m]==u){e="/nwlib6/icons/48/pdf.png",d=!0;break}for(m=0;m<r.length;m++)if(r[m]==u){e="/nwlib6/icons/48/word.png",d=!0;break}for(m=0;m<i.length;m++)if(i[m]==u){e="/nwlib6/icons/48/excel.png",d=!0;break}for(m=0;m<l.length;m++)if(l[m]==u){e=wnw.domainSrv+"/nwlib6/icons/apk_icon.png",d=!0;break}for(m=0;m<s.length;m++)if(s[m]==u){e=wnw.domainSrv+"/nwlib6/icons/html_48.png",d=!0;break}for(m=0;m<c.length;m++)if(c[m]==u){e=wnw.domainSrv+"/nwlib6/icons/zip.svg",d=!0;break}return!1===d&&(e="/nwlib6/icons/support2.png"),e},validateEmail:function(e){var n=e.substr(0,e.indexOf("@"));if(127<$.trim(e).length)return!1;if(2<=n.length){return/^(([^<>()[\]{}'^?\\.,!|//#%*-+=&;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)}return!1},evalueData:function(e,n){return void 0!==e&&(!(!nw.evalueData(n)||e!=n)||null!=e&&(null!=e&&("null"!=e&&(0!=e&&""!=e))))},normalizeRadioButton:function(){setTimeout(function(){$("input[type='radio']").checkboxradio({theme:"a"})},10)},barcodeScanner:function(a){return void 0!==cordova.plugins&&(void 0===cordova.plugins.barcodeScanner?(nw.dialog("No tiene instalado el plugin phonegap-plugin-barcodescanner"),!1):void cordova.plugins.barcodeScanner.scan(function(e){if(!e.cancelled){var n=e.text;a(n,e)}},function(e){nw.dialog("Ha ocurrido un error: "+e)}))},backgroundMode:function(e){"disable"===e?"undefined"!=typeof cordova&&void 0!==cordova.plugins&&void 0!==cordova.plugins.backgroundMode&&cordova.plugins.backgroundMode.disable():"undefined"!=typeof cordova&&void 0!==cordova.plugins&&void 0!==cordova.plugins.backgroundMode&&cordova.plugins.backgroundMode.enable()},loadFastClick:function(){new FastClick(document.body),FastClick.attach(document.body)},showImg:function(e){var n="";n+="<div class='show_img_pop_contain'>"+("<img class='show_img_pop' src='"+e+"' />")+"</div>";var a=new nw.newPage;a.id="openImage",a.title="Imagen",a.textClose="Atrás",a.html=n,a.create(),a.show()},openIframe:function(e){for(var n=nw.utils.getArraysFile("extensiones_img"),a=nw.utils.getArraysFile("extensiones_pdf"),t=(nw.utils.getArraysFile("extensiones_excel"),nw.utils.getArraysFile("extensiones_word"),nw.utils.getArraysFile("extensiones_apk"),nw.utils.getArraysFile("extensiones_html"),nw.utils.getArraysFile("extensiones_zip"),nw.getExtensionFile(e)),o="blank",i=0;i<n.length;i++)if(n[i]==t){o="img";break}for(i=0;i<a.length;i++)if(a[i]==t){o="pdf";break}if("blank"==o)return window.open(e,"_blank"),!1;var r="";r+="<div class='show_iframe_contain'>",r+="<div class='show_iframe_containBtns'>",r+="<a href='"+e+"' class='linkOpenIframe' download >"+nw.utils.tr("Descargar")+"</a>",r+="<a href='"+e+"' class='linkOpenIframe' target='_BLANK'>"+nw.utils.tr("Abrir en nueva ventana")+"</a>",r+="</div>","img"==o&&(r+="<div class='open_iframe_img_div' style='background-image: url("+e+");' >",r+="<img class='open_iframe_img_int' src='"+e+"'></img>",r+="</div>"),"pdf"==o&&(r+="<iframe class='open_iframe' src='"+e+"'></iframe>"),r+="</div>";var l=new nw.newPage;l.id="openIframe",l.title="",l.textClose="Atrás",l.html=r,l.create(),l.show()},removeSplash:function(){void 0!==navigator.splashscreen&&navigator.splashscreen.hide()},cortaText:function(e,n){return e.slice(0,n)},isBrowser:function(){return"browser"===cordova.platformId},getPlatformID:function(){return cordova.platformId},nativeGeoCoder:function(e,n,o){if("undefined"==typeof nativegeocoder)return o(!1);nativegeocoder.reverseGeocode(function(e){var n=e[0];console.log(n);var a=n.thoroughfare+" # "+n.subThoroughfare,t={lat:n.latitude,lng:n.longitude,direccion:a,address:a+" "+n.locality+" "+n.subAdministrativeArea+" "+n.administrativeArea,address_components:{sublocality:n.locality,neighborhood:n.neighborhood,country:n.countryName,locality:n.subAdministrativeArea},allData:n};o(t)},function(e){console.log(e);return o(!1)},e,n,{useLocale:!0,maxResults:1})},consultaPuntaje:function(e,n){var a=new nw.rpc(nw.getRpcUrl(),"nwMaker");a.setAsync(!0);a.exec("consultaPuntaje",e,function(e){n(e)})},arrayPromosSee:[],getPromotionsApp:function(r){nw.utils.arrayPromosSee=[],nw.evalueData(window.localStorage.getItem("arrayPromosSee"))&&(nw.utils.arrayPromosSee=JSON.parse(window.localStorage.getItem("arrayPromosSee")));var e=nw.userPolicies.getUserData(),n={};n.usuario=e.usuario,n.empresa=e.empresa,n.perfil=e.perfil,n.hoy=nw.getActualDate();var a=new nw.rpc(nw.getRpcUrl(),"nwMaker");a.setAsync(!0),a.setLoading(!1);a.exec("getPromotionsApp",n,function(e){if(!nw.evalueData(e))return!1;for(var n=[],a=0;a<e.length;a++){var t=e[a];if(-1===nw.utils.arrayPromosSee.indexOf(t.id)){nw.utils.arrayPromosSee.push(t.id);var o={};o.id=t.id,nw.evalueData(t.img_banner)&&(o.img_banner=config.domain_rpc+t.img_banner),nw.evalueData(t.title)&&(o.title=t.title),nw.evalueData(t.description)&&(o.description=t.description),nw.showPromotionsApp(o),n.push(t);break}}var i=JSON.stringify(nw.utils.arrayPromosSee);window.localStorage.setItem("arrayPromosSee",i),void 0!==r&&nw.evalueData(r)&&r(e,n)})},showPromotionsApp:function(e){var n=!0,a="",t=!1,o=!1,i=!1;nw.evalueData(e)&&(nw.evalueData(e.img_banner)&&(t=e.img_banner),nw.evalueData(e.title)&&(o=e.title),nw.evalueData(e.description)&&(i=e.description));var r="";if(!1!==t)n=!(r="containerPromoImage");else{if(!1===o&&!1===i)return!1;a+="<div class='containIntPromotionsApp'>",a+="<div class='containImgGenericPromotionsApp'> <i class='material-icons'>new_releases</i></div>",a+="<div class='containTextPromotionsApp'>",a+="<div class='containTextTitlePromotionsApp'>"+o+"</div>",a+="<div class='containTextDescriptionPromotionsApp'>"+i+"</div>",a+="</div>",a+="</div>"}r+=" popup_promotion_id_"+e.id;var l=nw.createRandomId(),s={useDialogNative:!1,closeEnc:!0};s.showBtnAccept=n,s.autocierre=!0,s.cleanHtml=!1,s.addClass="containerPromotionsApp containerPromotionsApp_idrand_"+l+" "+r;nw.dialog(a,function(){return!0},!1,s);!1!==t&&$("body").append("<style>.containerPromotionsApp_idrand_"+l+".containerPromoImage .popup_pil_text{background-image: url("+t+");}</style>")},conteoRegresivoPorFechaHora:function(e,a){if(!nw.evalueData(e))return!1;$("body").append('<div id="countdown"></div>'),nw.utils.conteoRegresivo(e,function(e){var n='<div class="containCountDown">';n+='<span class="closeCountDown"><i class="material-icons">close</i></span>',n+='<span class="titleCountDown">Faltan</span>',n+='<div class="containNumsCountDown">',n+='<span class="daysCountDown"><span class="titlesCountDown titledaysCountDown">Día</span>'+e.days+"</span>",n+='<span class="ddCountDown hrsCountDown"><span class="titlesCountDown titlehrsCountDown">Hrs</span>'+e.hours+"</span>",n+='<span class="ddCountDown minutesCountDown"><span class="titlesCountDown titleminutesCountDown">Min</span>'+e.minutes+"</span>",n+='<span class="ddCountDown secondsCountDown"><span class="titlesCountDown titlesecondsCountDown">Seg</span>'+e.seconds+"</span>",n+="</div>",n+='<span class="textdesCountDown">'+a+"</span>",n+="</div>",document.getElementById("countdown").innerHTML=n})},conteoRegresivo:function(e,l,s){var c,u=new Date(e);c=setInterval(function(){var e=new Date;nw.evalueData(s)&&(e=new Date(s));var n=u-e;if(n<0)return clearInterval(c),void l(a={days:0,hours:0,minutes:0,seconds:0});var a,t=Math.floor(n/864e5),o=Math.floor(n%864e5/36e5),i=Math.floor(n%36e5/6e4),r=Math.floor(n%6e4/1e3);(a={}).days=t,a.hours=o,a.minutes=i,a.seconds=r,l(a)},1e3)},setHoursMsg:function(e,n){var a=document.querySelectorAll(e);if(0<a.length)for(var t=0;t<a.length;t++){var o=a[t];if(o){var i=o.getAttribute("data-date");if(nw.utils.evalueData(i)){var r=nw.utilsDate.calcularTiempoDosFechas(i,!1,n).dateInFormat;o.innerHTML=r}}}},uniqBy:function(e,a){var t={};return e.filter(function(e){var n=a(e);return!t.hasOwnProperty(n)&&(t[n]=!0)})},textToVoice:function(e){var n=window.speechSynthesis,a=new SpeechSynthesisUtterance(e);a.pitch="0",a.rate="1",a.lang="es-US",n.speak(a)},str_replace:function(e,n,a){var t=new RegExp(e,"g");return a.replace(t,n)},replace:function(e,n,a){return nw.utils.str_replace(e,n,a)},getElement:function(e){return nw.utils.evalueData(e)&&document.querySelector(e)?document.querySelector(e):null},getElementAll:function(e){return document.querySelectorAll(e)},append:function(e,n){return"string"==typeof n?$(e).append(n):document.querySelector(e).appendChild(n)},first:function(e,n){return $(e).first(n)},prepend:function(e,n){return $(e).prepend(n)},after:function(e,n){return $(e).after(n)},before:function(e,n){return $(e).before(n)},inactivity:!1,inactivityTime:function(){var n,a=this;function t(){a.inactivity=!0,nw.utils.inactivity=!0}function e(){var e=3e3;if(nw.evalueData(config.activeLastConnectDetectInactivityTime)&&(e=config.activeLastConnectDetectInactivityTime),clearTimeout(n),!1===config.activeLastConnectDetectInactivity)return t(),!1;n=setTimeout(t,e),a.inactivity=!1,nw.utils.inactivity=!1}window.onload=e,document.onmousemove=e,document.body.onmousemove=e,document.onkeypress=e,document.body.onkeypress=e},cleanCaractersEmoji:function(e){return e=(e=(e=(e=(e=e.replace(/😃/g,":)")).replace(/😦/g,":(")).replace(/😄/g,":D")).replace(/👍/g,":+1:")).replace(/😛/g,":P")},removeAccents:function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},eliminarDiacriticosEs:function(e){return this.removeAccentsLetters(e)},removeAccentsLetters:function(e){return e.normalize("NFD").replace(/([bcdfghjklmñpqrstvwxyz])\u0301|(u)[\u0301\u0308]/g,"$1$2").normalize()},cleanWordsServer:function(e){return e},haveUrlString:function(e){var n=!1;return e.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,function(e){n=!0}),n},renderHTML:function(e,a,n){var t=nw.utils.strip_tags(e);!1===n&&(t=e);return t.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,function(e){!0===a&&(e=encodeURIComponent(e));var n=!0;return-1===e.indexOf("/nwlib6/css/emoji/emoji/")&&-1===e.indexOf("/nwlib6/css/emoji/gifs/")&&-1===e.indexOf("nw_taskenter_emojis")||(n=!1),n?'<a class="link_renderer_regex" href="'+e+'" target="_BLANK">'+e+"</a><br/>":e})},decodeURIComponentSafe:function(e){var n,a,t,o=e,i=new String,r=0;for("undefined"==typeof mod&&(mod=0),a=(n=o.split(/(%(?:d0|d1)%.{2})/)).length;r<a;r++){try{t=decodeURIComponent(n[r])}catch(e){t=mod?n[r].replace(/%(?!\d+)/g,"%25"):n[r]}i+=t}return i},find:function(e,n){if(e)return $(e).find(n)},addCss:function(e){var n=document.querySelector(".containerCssAdd");n||((n=document.createElement("div")).className="containerCssAdd",document.body.appendChild(n));var a=document.createElement("style");a.innerHTML=e,n.appendChild(a)},menuResetInitial:function(){nw.utils.getElement(".containLinksMenuLeft")&&(nw.utils.getElement(".containLinksMenuLeft").innerHTML="");var e=function(){nw.menuProfile()},n=nw.generateLink("Mi cuenta",e,"left",0,"","material-icons settings",!1,!1);$(".containLinksMenuLeft").append(n);e=function(){nw.searchUpdatesApp()},n=nw.generateLink("Buscar actualizaciones",e,"left",0,"","material-icons system_update",!1,!1);$(".containLinksMenuLeft").append(n);e=function(){nw.about()},n=nw.generateLink("Acerca de",e,"left",0,"","material-icons info",!1,!1);$(".containLinksMenuLeft").append(n);e=function(){nw.closeSession()},n=nw.generateLink("Salir",e,"left",0,"","material-icons exit_to_app",!1,!1);$(".containLinksMenuLeft").append(n)},isDeveloper:function(){var e=nw.userPolicies.getUserData();return"assdres@gmail.com"===e.usuario||"testing@netwoods.net"===e.usuario||"testing2@netwoods.net"===e.usuario||"enderg"===e.usuario||"ladyg"===e.usuario||"andresf"===e.usuario||"alexf"===e.usuario||"alexf@netwoods.net"===e.usuario||"alexf@gruponw.com"===e.usuario||"direccion@netwoods.net"===e.usuario||"ladyg@netwoods.net"===e.usuario},convertWidgetToString:function(e){var n=e.outerHTML.toString();return n=nw.utils.replace("<","&lt;",n),n=nw.utils.replace(">","&gt;",n)},validateElement:function(e,n){if(e)return n(),!0;setTimeout(function(){nw.utils.validateElement(e,n)},500)},labelsChange:function(e,n){if(!nw.evalueData(e))return n;for(var a=e,t=0;t<n.length;t++)for(var o=0;o<a.length;o++)a[o].name==n[t].name&&(nw.evalueData(a[o].label)&&(n[t].label=a[o].label,n[t].placeholder=a[o].label),void 0!==a[o].placeholder&&(n[t].placeholder=a[o].placeholder),void 0!==a[o].required&&(n[t].required=a[o].required),void 0!==a[o].maxlength&&(n[t].maxlength=a[o].maxlength),void 0!==a[o].minlength&&(n[t].minlength=a[o].minlength),void 0!==a[o].visible_label&&(n[t].visible_label=a[o].visible_label),void 0!==a[o].type&&(n[t].type=a[o].type));return n},dialog:function(e,n,a,t){return nw.dialogs.dialog(e,n,a,t)},information:function(e,n,a,t){return nw.dialogs.dialog(e,n,a,t)},getBrowser:function(){var e=navigator.userAgent;return-1<e.indexOf("Firefox")?"Mozilla Firefox":-1<e.indexOf("SamsungBrowser")?"Samsung Internet":-1<e.indexOf("Opera")||-1<e.indexOf("OPR")?"Opera":-1<e.indexOf("Trident")?"Microsoft Internet Explorer":-1<e.indexOf("Edge")?"Microsoft Edge (Legacy)":-1<e.indexOf("Edg")?"Microsoft Edge (Chromium)":-1<e.indexOf("Chrome")?"Google Chrome or Chromium":-1<e.indexOf("Safari")?"Apple Safari":"unknown"},drag:function(e){!function(n){var a=0,t=0,o=0,i=0;document.getElementById(n.id+"header")?document.getElementById(n.id+"header").onmousedown=e:n.onmousedown=e;function e(e){nw.utils.getDebug()&&console.log("dragMouseDown"),(e=e||window.event).preventDefault(),o=e.clientX,i=e.clientY,document.onmouseup=l,document.onmousemove=r}function r(e){nw.utils.getDebug()&&console.log("elementDrag"),n.closeDragElement=!1,(e=e||window.event).preventDefault(),a=o-e.clientX,t=i-e.clientY,o=e.clientX,i=e.clientY,n.style.setProperty("top",n.offsetTop-t+"px","important"),n.style.setProperty("left",n.offsetLeft-a+"px","important")}function l(e){nw.utils.getDebug()&&console.log("closeDragElement"),document.onmouseup=null,document.onmousemove=null,setTimeout(function(){n.closeDragElement=!0},500)}}(document.querySelector(e))},validateElementIfExist:function(e,n,a){var t=e;"string"==typeof e&&(e=document.querySelector(e)),e?n(e,a):setTimeout(function(){nw.utils.validateElementIfExist(t,n)},300)},toast:function(e){var n=3e3;nw.evalueData(e.timeRemove)&&(n=e.timeRemove);var a=document.querySelector(".toast-container");a||((a=document.createElement("div")).className="toast-container",document.body.appendChild(a));var t=document.createElement("div");t.className="toast",nw.evalueData(e.addClass)&&(t.className+=" "+e.addClass),t.innerHTML=e.html,a.appendChild(t),setTimeout(function(){nw.addClass(t,"toast-show")},500),setTimeout(function(){nw.addClass(t,"toast-hidden"),setTimeout(function(){t.remove()},500)},n)},validaVersionJson:function(){fetch("/version.json?"+Math.random()).then(function(e){return e.json()}).then(function(e){console.log("json",e);var n=config.version;n=nw.utils.replace("-","",n),n=(n=nw.utils.replace("release","",n)).replace(/\./g,""),console.log("myversion",n);var a=e.version;if(a=nw.utils.replace("-","",a),a=(a=nw.utils.replace("release","",a)).replace(/\./g,""),console.log("nubeversion",a),n!=a){var t=nw.utils.tr("¡Nueva versión encontrada!")+"<br />";t+=nw.utils.tr("Hemos encontrado la versión")+" "+a+", "+nw.utils.tr("su versión actual es la")+" "+n,nw.dialog(t,function(){return window.location.reload(),!0},function(){return!0},{original:!0,textAccept:"Actualizar",textCancel:"Omitir"})}})},palabrasTraducidasPorDefecto:function(){config.fieldsToReplaceStr=[],config.fieldsToReplaceStr.push({idioma:"EN",original:"Inicio",reemplazo:"Home"},{idioma:"EN",original:"Requerido",reemplazo:"Required"},{idioma:"EN",original:"Observaciones",reemplazo:"Observations"},{idioma:"EN",original:"Comentarios",reemplazo:"Comments"},{idioma:"EN",original:"Motivo",reemplazo:"Reason"},{idioma:"EN",original:"Volver",reemplazo:"Back"},{idioma:"EN",original:"Salir",reemplazo:"Exit"},{idioma:"EN",original:"Idioma",reemplazo:"Language"},{idioma:"EN",original:"Seleccione",reemplazo:"Select"},{idioma:"EN",original:"Aceptar",reemplazo:"Accept"},{idioma:"EN",original:"Cerrando sesión",reemplazo:"Closing session"},{idioma:"EN",original:"Ingresar",reemplazo:"Get into"},{idioma:"EN",original:"Guardar",reemplazo:"Save"},{idioma:"EN",original:"Minimizar",reemplazo:"Minimize"},{idioma:"EN",original:"Cancelar",reemplazo:"Cancel"},{idioma:"EN",original:"Cerrar",reemplazo:"Close"},{idioma:"EN",original:"Atrás",reemplazo:"Back"},{idioma:"EN",original:"Enviar",reemplazo:"Send"},{idioma:"EN",original:"Clave",reemplazo:"Password"},{idioma:"EN",original:"Espera un momento, estamos actualizando la aplicación",reemplazo:"Wait a moment, we are updating the application"},{idioma:"EN",original:"Acerca de",reemplazo:"About"},{idioma:"EN",original:"Buscar actualizaciones",reemplazo:"Search for updates"},{idioma:"EN",original:"Cambiar clave",reemplazo:"Change password"},{idioma:"EN",original:"Crear cuenta",reemplazo:"Create account"},{idioma:"EN",original:"Iniciar sesión",reemplazo:"Log in"},{idioma:"EN",original:"Inicia sesión",reemplazo:"Log in"},{idioma:"EN",original:"¿Olvidó su contraseña?",reemplazo:"Forgot your password?"},{idioma:"EN",original:"Correo / Usuario",reemplazo:"Email / User"},{idioma:"EN",original:"Contraseña",reemplazo:"Password"},{idioma:"EN",original:"Cambiar contraseña",reemplazo:"Change password"},{idioma:"EN",original:"Creación de cuenta",reemplazo:"Create account"},{idioma:"EN",original:"País",reemplazo:"Country"},{idioma:"EN",original:"Seleccione el país",reemplazo:"Select Country"},{idioma:"EN",original:"Teléfono / Móvil",reemplazo:"Phone number"},{idioma:"EN",original:"Correo",reemplazo:"Email"},{idioma:"EN",original:"Registrarme",reemplazo:"Sign up"},{idioma:"EN",original:"Seleccione el idioma",reemplazo:"Select the language"},{idioma:"EN",original:"No puede ingresar, verifique el usuario y / o contraseña y vuelva a intentarlo (perfil no válido)",reemplazo:"Can't log in, please check username and/or password and try again (invalid profile)"},{idioma:"EN",original:"Usuario o clave inválida",reemplazo:"Invalid username or password"},{idioma:"EN",original:"El usuario no existe en nuestra central de productos. Verifique el usuario y/o contraseña y vuelva a intentarlo",reemplazo:"The user does not exist in our product center. Verify the username and/or password and try again"},{idioma:"EN",original:"El usuario no existe. Verifique el usuario y/o contraseña y vuelva a intentarlo",reemplazo:"Username does not exist. Verify the username and/or password and try again"},{idioma:"EN",original:"El usuario se encuentra pre-registrado. Ingrese a su correo y siga las instrucciones",reemplazo:"The user is pre-registered. Enter your email and follow the instructions"},{idioma:"EN",original:"El enlace no es válido. Puede ser el token incorrecto, el usuario ya activó su cuenta o la clave es incorrecta",reemplazo:"The link is not valid. It could be the wrong token, the user already activated his account or the key is wrong"},{idioma:"EN",original:"Usuario inactivo, comuníquese con el administrador del sistema",reemplazo:"Inactive user, contact system administrator"},{idioma:"EN",original:"Si ha olvidado su contraseña digite su correo y siga las instrucciones",reemplazo:"If you have forgotten your password, enter your email and follow the instructions"},{idioma:"EN",original:"No puede ingresar, verifique el usuario y/o contraseña y vuelva a intentarlo (empresa no válida)",reemplazo:"You cannot enter, verify the username and/or password and try again (invalid company)"},{idioma:"EN",original:"Este usuario ya existe.",reemplazo:"This user already exists."},{idioma:"EN",original:"Por favor acepte los términos y condiciones de uso para continuar.",reemplazo:"Please accept the terms and conditions of use to continue."},{idioma:"EN",original:"Valida tu número móvil y correo",reemplazo:"Validate your mobile number and email"},{idioma:"EN",original:"Número móvil",reemplazo:"Cellphone number"},{idioma:"EN",original:"Ingresa tu número móvil",reemplazo:"Enter cellphone number"},{idioma:"EN",original:"Siguiente",reemplazo:"Next"},{idioma:"EN",original:"El código de verificación se ha enviado al",reemplazo:"The verification code has been sent to"},{idioma:"EN",original:"Enviar código",reemplazo:"Send code"},{idioma:"EN",original:"Reenviar código",reemplazo:"Resend code"},{idioma:"EN",original:"Código de verificación",reemplazo:"Verification code"},{idioma:"EN",original:"Código de 6 dígitos",reemplazo:"6 digit code"},{idioma:"EN",original:"¡Nueva versión encontrada!",reemplazo:"New version found!"},{idioma:"EN",original:"Hemos encontrado la versión",reemplazo:"We have found the version"},{idioma:"EN",original:"su versión actual es la",reemplazo:"its current version is"},{idioma:"EN",original:"Actualizar",reemplazo:"Update"},{idioma:"EN",original:"Omitir",reemplazo:"Skip"},{idioma:"EN",original:"Ajustes",reemplazo:"Settings"},{idioma:"EN",original:"Ingrese su correo",reemplazo:"Enter your email"},{idioma:"EN",original:"Solicitar código",reemplazo:"Request code"},{idioma:"EN",original:"Ingresar código",reemplazo:"Enter code"},{idioma:"EN",original:"Ingrese el código que fue enviado a su correo registrado",reemplazo:"Enter the code that was sent to your registered email"},{idioma:"EN",original:"Ingrese el código",reemplazo:"Enter the code"},{idioma:"EN",original:"Recuperar clave",reemplazo:"recover password"},{idioma:"EN",original:"SI",reemplazo:"YES"},{idioma:"EN",original:"NO",reemplazo:"NO"},{idioma:"EN",original:"Enero",reemplazo:"January"},{idioma:"EN",original:"Febrero",reemplazo:"February"},{idioma:"EN",original:"Marzo",reemplazo:"March"},{idioma:"EN",original:"Abril",reemplazo:"April"},{idioma:"EN",original:"Mayo",reemplazo:"May"},{idioma:"EN",original:"Junio",reemplazo:"June"},{idioma:"EN",original:"Julio",reemplazo:"July"},{idioma:"EN",original:"Agosto",reemplazo:"August"},{idioma:"EN",original:"Septiembre",reemplazo:"September"},{idioma:"EN",original:"Octubre",reemplazo:"October"},{idioma:"EN",original:"Noviembre",reemplazo:"November"},{idioma:"EN",original:"Diciembre",reemplazo:"December"},{idioma:"EN",original:"Lunes",reemplazo:"Monday"},{idioma:"EN",original:"Martes",reemplazo:"Tuesday"},{idioma:"EN",original:"Miércoles",reemplazo:"Wednesday"},{idioma:"EN",original:"Jueves",reemplazo:"Thursday"},{idioma:"EN",original:"Viernes",reemplazo:"Friday"},{idioma:"EN",original:"Sábado",reemplazo:"Saturday"},{idioma:"EN",original:"Domingo",reemplazo:"Sunday"},{idioma:"EN",original:"Hace",reemplazo:"Ago"},{idioma:"EN",original:"hace",reemplazo:"ago"},{idioma:"EN",original:"y",reemplazo:"and"},{idioma:"EN",original:"del",reemplazo:""},{idioma:"EN",original:"Ayer a las",reemplazo:"Yesterday at"},{idioma:"EN",original:"a las",reemplazo:"at"},{idioma:"EN",original:"Día",reemplazo:"Day"},{idioma:"EN",original:"Días",reemplazo:"Days"},{idioma:"EN",original:"Fecha",reemplazo:"Date"},{idioma:"EN",original:"fecha",reemplazo:"date"},{idioma:"EN",original:"Hora",reemplazo:"Hour"},{idioma:"EN",original:"hora",reemplazo:"hour"},{idioma:"EN",original:"Horas",reemplazo:"Hours"},{idioma:"EN",original:"horas",reemplazo:"hours"},{idioma:"EN",original:"hrs",reemplazo:"hrs"},{idioma:"EN",original:"Minutos",reemplazo:"Minutes"},{idioma:"EN",original:"minutos",reemplazo:"minutes"},{idioma:"EN",original:"Mins",reemplazo:"Mins"},{idioma:"EN",original:"mins",reemplazo:"mins"},{idioma:"EN",original:"Finalizar",reemplazo:"Finish"},{idioma:"EN",original:"Finalizando",reemplazo:"Finalizing"},{idioma:"EN",original:"Filtrar",reemplazo:"Filter"},{idioma:"EN",original:"Exportar",reemplazo:"Export"},{idioma:"EN",original:"Buscar",reemplazo:"Search"},{idioma:"EN",original:"Buscar...",reemplazo:"Search..."},{idioma:"EN",original:"Generar ticket",reemplazo:"Generate ticket"},{idioma:"EN",original:"¿Desea generar un ticket?",reemplazo:"Do you want to generate a ticket?"},{idioma:"EN",original:"Mi perfil",reemplazo:"My profile"},{idioma:"EN",original:"Hemos detectado una conexión demasiado baja o nula, compruebe su conexión a internet",reemplazo:"We have detected a connection that is too low or absent, check your internet connection"},{idioma:"EN",original:"Comprobar de nuevo",reemplazo:"Check again"},{idioma:"EN",original:"Editar",reemplazo:"Edit"},{idioma:"EN",original:"Editar perfil",reemplazo:"Edit profile"},{idioma:"EN",original:"Buscando actualizaciones... Por favor espere.",reemplazo:"Checking for updates... Please wait."},{idioma:"EN",original:"No tiene actualizaciones",reemplazo:"It has no updates"},{idioma:"EN",original:"Estado de red",reemplazo:"Network status"},{idioma:"EN",original:"Internet estable",reemplazo:"Stable internet"},{idioma:"EN",original:"Sin internet, compruebe su conexión.",reemplazo:"Without internet, check your connection."},{idioma:"EN",original:"Cambiar tema",reemplazo:"Change theme"},{idioma:"EN",original:"Transición de ventanas",reemplazo:"Window transition"},{idioma:"EN",original:"Notificaciones",reemplazo:"Notifications"},{idioma:"EN",original:"Sonido",reemplazo:"Sound"},{idioma:"EN",original:"Actualizar app",reemplazo:"Update app"},{idioma:"EN",original:"Actualizar contraseña",reemplazo:"Update password"},{idioma:"EN",original:"Ingrese los siguientes datos para cambiar su contraseña",reemplazo:"Enter the following information to change your password"},{idioma:"EN",original:"Clave nueva",reemplazo:"New key"},{idioma:"EN",original:"Repita su clave nueva",reemplazo:"Repeat your new password"},{idioma:"EN",original:"Sin versión nueva de caché",reemplazo:"No new cache version"},{idioma:"EN",original:"Agregar",reemplazo:"Add"},{idioma:"EN",original:"Editar datos",reemplazo:"Edit data"},{idioma:"EN",original:"Seguridad",reemplazo:"Security"},{idioma:"EN",original:"Ampliar",reemplazo:"Extend"},{idioma:"EN",original:"Archivo",reemplazo:"File"},{idioma:"EN",original:"¿Desea eliminar este registro?",reemplazo:"Do you want to delete this record?"},{idioma:"EN",original:"Otras configuraciones",reemplazo:"Other configurations"},{idioma:"EN",original:"Configuraciones",reemplazo:"Configurations"},{idioma:"EN",original:"Correo electrónico",reemplazo:"Email"},{idioma:"EN",original:"Otros datos",reemplazo:"Other data"},{idioma:"EN",original:"Empresa",reemplazo:"Company"},{idioma:"EN",original:"Perfil",reemplazo:"Profile"},{idioma:"EN",original:"Valide las últimas novedades",reemplazo:"Validate the latest news"},{idioma:"EN",original:"Versión, fabricante, otras",reemplazo:"Version, manufacturer, others"},{idioma:"EN",original:"Cambiar tema, fuente, otras",reemplazo:"Change theme, font, others"},{idioma:"EN",original:"Salida segura",reemplazo:"Safe exit"},{idioma:"EN",original:"Nuevo",reemplazo:"New"},{idioma:"EN",original:"Todos",reemplazo:"All"},{idioma:"EN",original:"Estado",reemplazo:"State"},{idioma:"EN",original:"Responder",reemplazo:"Reply"},{idioma:"EN",original:"Copiar",reemplazo:"Copy"},{idioma:"EN",original:"Eliminar",reemplazo:"Remove"},{idioma:"EN",original:"Cerrar sesión",reemplazo:"Sign off"},{idioma:"EN",original:"Usuarios",reemplazo:"Users"},{idioma:"EN",original:"Examinar",reemplazo:"Examine"},{idioma:"EN",original:"Continuar",reemplazo:"Continue"},{idioma:"EN",original:"Descargar",reemplazo:"Download"},{idioma:"EN",original:"Abrir en nueva ventana",reemplazo:"Open in a new window"},{idioma:"EN",original:"Error al cargar su ubicación.",reemplazo:"Error loading your location."},{idioma:"EN",original:"Faltan caracteres, mínimo",reemplazo:"Missing characters, minimal"},{idioma:"EN",original:"++Cambiar el idioma",reemplazo:"++Change language"},{idioma:"EN",original:"¿Realmente deseas cerrar sesión?",reemplazo:"Do you really want to log out?"})},getTranslateServer:function(r){if(!1===config.useTranslateStr)return!1;nw.utils.palabrasTraducidasPorDefecto();var e=nw.userPolicies.getUserData(),n={};nw.utils.evalueData(e.usuario)&&(n.usuario=e.usuario),nw.utils.evalueData(e.perfil)&&(n.perfil=e.perfil),!nw.utils.evalueData(e.empresa)&&nw.utils.evalueData(config.config_crear_cuenta.pedir_empresa)&&(n.empresa=config.config_crear_cuenta.pedir_empresa),nw.utils.evalueData(e.empresa)&&(n.empresa=e.empresa),nw.utils.evalueData(window.localStorage.getItem("idioma_config"))&&(n.idioma=window.localStorage.getItem("idioma_config")),void 0===nw.utils.arrayReemplazadas&&(nw.utils.arrayReemplazadas=[]);var a=new nw.rpc(nw.getRpcUrl(),"nwMaker");a.setAsync(!0);a.exec("getTranslateServer",n,function(e){for(var n=0;n<e.length;n++){var a=e[n];if(nw.utils.evalueData(a.textos))for(var t=JSON.parse(a.textos),o=0;o<t.length;o++){var i=t[o];i.idioma=a.idioma,config.fieldsToReplaceStr.push(i)}}config.traeVariablesDeTraductor=!0,r(e)})},tr:function(a,t){if("undefined"==typeof config)return a;if(!1===config.useTranslateStr)return a;if(void 0===nw.utils.arrayReemplazadas)return void 0===t?a:void setTimeout(function(){var e=nw.utils.tr(a),n=document.querySelector(t);n&&(n.innerHTML=e)},500);if(void 0!==nw.utils.arrayReemplazadas[a])return nw.utils.arrayReemplazadas[a];var e,n=a;e=nw.utils.getLang(),void 0===config.fieldsToReplaceStr&&(config.fieldsToReplaceStr=[]);for(var o=!1,i=0;i<config.fieldsToReplaceStr.length;i++){var r=config.fieldsToReplaceStr[i],l=!0;nw.utils.evalueData(r.idioma)&&(l=!1,nw.utils.evalueData(e)&&r.idioma==e&&(l=!0)),nw.utils.stripTags(r.original)==nw.utils.stripTags(a)&&l&&(n=r.reemplazo,nw.utils.arrayReemplazadas[a]=n,o=!0)}return o||(nw.utils.arrayReemplazadas[a]=a),n},getLang:function(){var e="ES";if(void 0!==nw.utils.idioma)return nw.utils.idioma;var n=nw.userPolicies.getUserData();return nw.utils.evalueData(n.idioma_por_defecto)&&(e=n.idioma_por_defecto),nw.utils.evalueData(window.localStorage.getItem("idioma_config"))&&(e=window.localStorage.getItem("idioma_config")),nw.utils.idioma=e},validateLang:function(){var e=nw.userPolicies.getUserData(),n=window.localStorage.getItem("idioma_config");nw.utils.evalueData(n)||(nw.utils.evalueData(e.idioma_por_defecto)?(window.localStorage.setItem("idioma_config",e.idioma_por_defecto),window.location.reload()):window.localStorage.setItem("idioma_config","ES"))},disabledBtn:function(e){nw.utils.addClass(e,"btn_disabled"),setTimeout(function(){nw.utils.removeClass(e,"btn_disabled")},1e3),nw.loading({text:"",textVisible:!1,html:"",addClass:"loadingInBtn",container:e}),setTimeout(function(){nw.utils.remove(".loadingInBtn")},3e3)},listNotificationsFirebase:function(){var e=new nw.lists;nw.userPolicies.getUserData();e.createBase=new nw.newPage,e.createBase.showContextMenu=!1,e.createBase.id="listNotificationsFirebase",e.createBase.html="",e.createBase.showBack=!0,e.createBase.closeBack=!1,e.createBase.logotipo_text="<span style='color:#ffff;'>Notificaciones<span>",e.createBase.createAndShow(),e.showContextMenu=!1,e.id_form="listNotificationsFirebase",e.canvas="#listNotificationsFirebase";e.setColumns([{name:"html",label:""}]),e.show(),e.clicRow=function(){var e=this.selectedRecord();console.log("clicRowalexf",e),void 0!==e.callback&&e.callback(e);var n=document.querySelector(this.canvas+" .activeRow");n&&nw.removeClass(n,"nw_row_row_not_open_NO"),nw.removeClass(".listNotificationsFirebase .rowlist","nw_row_row_not_open_NO"),void 0!==app.readNotificationsInFirebase&&app.readNotificationsInFirebase(e);for(var a=nw.utils.getArrayNotificationsFirebase(),t=0;t<a.length;t++)a[t].document==e.document&&(app.arrayNotificationsFirebase[t].open="SI")},e.applyFilters=function(){for(var e=nw.utils.getArrayNotificationsFirebase(),n=0;n<e.length;n++){e[n].className="row_not_open_"+e[n].open;var a=e[n],t=nw.utilsDate.calcularTiempoDosFechas(a.date,!1,!0);console.log("rs",a),console.log("dateFormat",t);var o=t.dateInFormat,i="";i+="<div class='noty_photoandname'>",nw.utils.evalueData(a.envia_foto)||(a.envia_foto=config.domain_rpc+"/nwlib6/icons/2017/user.png"),i+="<div class='noty_photo' style='background-image: url("+a.envia_foto+")'></div>",i+="<div class='noty_nameandtext'>",i+="<div class='noty_nameanddate'><span class='noty_name'>"+nw.utils.tr(a.title)+"</span> <span class='noty_date'>"+o+"</span></div>";var r="";0<a.count&&(r="noty_havmessage"),i+="<div class='noty_text'><span class='noty_onlytext'>"+nw.utils.tr(a.description)+"</span> <span class='noty_count "+r+"'>"+a.count+"</span></div>",nw.utils.evalueData(a.others)&&(i+="<div class='noty_others'>"+nw.utils.tr(a.others)+"</div>"),i+="</div>",i+="</div>",e[n].html=i}e.sort(function(e,n){if(nw.evalueData(n.date)&&nw.evalueData(e.date))return new Date(n.date.replace(/-/g," "))-new Date(e.date.replace(/-/g," "))}),this.setModelData(e)},e.applyFilters(),nw.utils.staticListNotifications=e},createContainerNotifications:function(){var e=this,n=document.createElement("div");n.className="nwmaker_notifications_firebase",n.innerHTML="<i class='material-icons'>notifications </i>",n.onclick=function(){nw.utils.removeClass(this,"nwmaker_notifications_firebase_open"),nw.utils.addClass(this,"nwmaker_notifications_firebase_open"),e.listNotificationsFirebase()},document.querySelector(".headerHome").appendChild(n);var a=document.createElement("div");a.className="point_new_notification",a.innerHTML="0",n.appendChild(a);var t=document.createElement("div");t.className="rows_container_new_notification",n.appendChild(t),nw.utils.setArrayNotificationsFirebase()},addBellNewNotification:function(e,n){var a=document.querySelector(".point_new_notification");if(a){nw.utils.removeClass(a,"point_new_notification_fire"),nw.utils.addClass(a,"point_new_notification_fire");var t=1;"added"==n&&(t=e.count);var o=a.innerHTML;parseInt(o)+t,e.count<=0&&"modified"==n&&parseInt(o)-e.total,e.count<=0&&(0,nw.utils.removeClass(a,"point_new_notification_fire")),a.innerHTML=e.count}},getArrayNotificationsFirebase:function(){return app.arrayNotificationsFirebase},setArrayNotificationsFirebase:function(){app.arrayNotificationsFirebase=[]},addNewNotification:function(e){for(var n=!1,a=nw.utils.getArrayNotificationsFirebase(),t=0;t<a.length;t++)a[t].document==e.document&&(n=!0,app.arrayNotificationsFirebase[t]=e);n||nw.utils.getArrayNotificationsFirebase().push(e),document.querySelector(".listNotificationsFirebase")&&nw.utils.staticListNotifications.applyFilters()},validaVersionCache:function(){var e=nw.userPolicies.getUserData(),a="1";if(nw.utils.evalueData(window.localStorage.getItem("lastVersionCacheCloud"))&&(a=window.localStorage.getItem("lastVersionCacheCloud")),!1===config.validaVersionCache)return!1;var n={};n.empresa=e.empresa,n.perfil=e.perfil,n.versionCache=a,void 0!==config.buscar_version_cloud_para_todas_las_empresas&&!0===config.buscar_version_cloud_para_todas_las_empresas&&(n.para_todas_las_empresas="SI"),void 0!==config.buscar_version_cloud_para_todos_los_perfiles&&!0===config.buscar_version_cloud_para_todos_los_perfiles&&(n.para_todos_los_perfiles="SI");var t=new nw.rpc(nw.getRpcUrl(),"nwMaker");t.setAsync(!0),t.setLoading(!1);t.exec("validaVersionCache",n,function(e){if(!e)return!1;var n=5e3;if(a!=e.version&&nw.utils.evalueData(window.localStorage.getItem("lastVersionCacheCloud"))||"1"==a)return"1"==a&&(n=1),nw.utils.evalueData(e.route_release)?window.localStorage.setItem("newRouteReleaseLocal",e.route_release):window.localStorage.setItem("newRouteReleaseLocal",null),nw.utils.evalueData(e.domain_rpc)?window.localStorage.setItem("domainRPCReleaseLocal",e.domain_rpc):window.localStorage.setItem("domainRPCReleaseLocal",null),console.log("Nueva versión caché"),window.localStorage.setItem("lastVersionCacheCloud",e.version),nw.loading({text:"",title:nw.utils.tr("Espera un momento, estamos actualizando la aplicación"),addClass:"loading_home_download_version_cache"}),void setTimeout(function(){window.location.reload(!0),window.location.href=window.location.href},n);window.localStorage.setItem("version_in_this_device",e.version),config.version_in_this_device=e.version,config.addTextInAccountOtherData+="<br />"+nw.utils.tr("Sin versión nueva de caché")+". ",nw.utils.evalueData(window.localStorage.getItem("lastVersionCacheCloud"))||window.localStorage.setItem("lastVersionCacheCloud",e.version)})}},members:{information:function(){console.log("INFO MEMBER!")}}}),nw.Class.define("nw.uploaderFileSrv",{extend:nw.object,construct:function(){},destruct:function(){},members:{},statics:{uploadFileCamera:function(o,e,n,a,t,i,r,l,s,c){console.log("Start uploadFileCamera"),console.log("uploadDirect",n),void 0!==cordova.plugins&&void 0!==cordova.plugins.backgroundMode&&cordova.plugins.backgroundMode.disable();var u=35;if(nw.evalueData(t)&&(u=t),nw.loading({text:"Subiendo, por favor espere...<span class='statusUploadFile'></span>",textVisible:!0,html:"",theme:"b"}),!0===n)p(a);else if(appState.takingPicture=!0,"files"===e)navigator.camera.getPicture(p,g,{quality:u,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,allowEdit:!0});else{var d={};d.quality=u,nw.evalueData(l)&&(d.allowEdit=l),d.saveToPhotoAlbum=!1,d.correctOrientation=!0,d.destinationType=Camera.DestinationType.FILE_URI,d.sourceType=Camera.PictureSourceType.CAMERA,d.mediaType=Camera.MediaType.PICTURE,d.encodingType=Camera.EncodingType.JPEG,nw.evalueData(i)&&"auto"!==i&&!1!==i&&null!==i&&(d.targetWidth=i),nw.evalueData(r)&&"auto"!==r&&!1!==r&&null!==r&&(d.targetHeight=r),navigator.camera.getPicture(p,g,d)}function p(e){console.log("imageURI",e);var n=e+"?"+Math.random();console.log("name",o),document.querySelector(".fileUpShow_"+o)&&(document.querySelector(".fileUpShow_"+o).style.display="block",document.querySelector(".fileUpShow_"+o).style.backgroundImage="url("+n+")",$("."+o).trigger("change"));var a=nw.isOnline();if(console.log("online",a),console.log("name",o),console.log("offline",c),!0===c&&(a=!1),!0===a){var t={};t.imageURI=e,t.callback=s,t.name=o,nw.uploaderFileSrv.saveFileOnServer(t)}else nw.loadingRemove(),console.log("imageURI",e),document.querySelector(".nw_textField_"+o)&&(document.querySelector(".nw_textField_"+o).value=e);m()}function g(e){if(nw.loadingRemove(),console.log("Failed because: "+e),"No Image Selected"==e)return m(),!1;var n={};n.textAccept="Aceptar",n.textCancel="Generar ticket",n.original=!0;var a="Carga fallida: "+e;nw.dialog(a,function(){return!0},function(){return nw.errorLogger.process("Carga fallida: "+e,!0,!0,!0),!0},n),m()}function m(){void 0!==cordova.plugins&&void 0!==cordova.plugins.backgroundMode&&cordova.plugins.backgroundMode.enable()}},saveFileOnServer:function(e){console.log("saveFileOnServer",e);var n=e.imageURI,a=e.callback,t=e.name,o=nw.getExtensionFile(n),i="/nwlib6/uploader_camera.php",r=new FileUploadOptions;r.fileKey="file",r.extension=o,r.fileName=n.substr(n.lastIndexOf("/")+1),r.name=n.substr(n.lastIndexOf("/")+1);for(var l=nw.utils.getArraysFile("extensiones_img"),s=(nw.utils.getArraysFile("extensiones_pdf"),nw.utils.getArraysFile("extensiones_excel"),nw.utils.getArraysFile("extensiones_word"),nw.utils.getArraysFile("extensiones_apk"),nw.utils.getArraysFile("extensiones_html"),nw.utils.getArraysFile("extensiones_zip"),0);s<l.length;s++)if(l[s]==o){"img";break}i=".mp3"===o||"mp3"===o||".wav"===o||"wav"===o?(r.mimeType="audio/wav","/nwlib6/uploader_audio.php"):(r.mimeType="image/jpeg","/nwlib6/uploader_camera.php"),console.log("nw.uploaderFileSrv:::196:::urlSave",i);var c={};c.extension=o,c.value1="test",c.value2="param",r.params=c,r.chunkedMode=!1,console.log("options",r),console.log("params",c);var u=new FileTransfer;u.upload(n,mainNW.domain_rpc+i,function(e){console.log("nw.uploaderFileSrv:::successfully uploaded ",e),nw.loadingRemove(),void 0!==a&&nw.utils.evalueData(a)&&a(e),nw.evalueData(t)&&(console.log("name",t),document.querySelector(".fileUpShow_"+t)&&(document.querySelector(".fileUpShow_"+t).style.backgroundImage="url("+mainNW.domain_rpc+e.response+")"),document.querySelector(".nw_textField_"+t)&&(document.querySelector(".nw_textField_"+t).value=e.response),$("."+t).trigger("change"))},function(e){nw.loadingRemove(),console.log("error : ",e),nw.dialog("error : "+JSON.stringify(e))},r);var d=document.querySelector(".statusUploadFile");u.onprogress=function(e){if(e.lengthComputable){var n=Math.floor(e.loaded/e.total*100);d&&(d.innerHTML=n+"% loaded...")}else d&&(""==d.innerHTML?d.innerHTML="Loading":d.innerHTML+=".")}},uploadFile:function(a,t){nw.loading({text:"Por favor espere...",textVisible:!0,html:"",theme:"b"}),console.log("uploadFile:::elm",a);var w=a.files[0],v=w.name;new FormData;!function(a){var t=(n=v,o=new Date,i=o.getUTCFullYear(),r=o.getUTCMonth(),l=o.getUTCDate(),s=o.getSeconds(),c=o.getMinutes(),u=o.getHours(),i+"_"+r+"_"+l+"__"+u+"_"+c+"_"+s+"__"+function(){if(window.crypto&&window.crypto.getRandomValues&&-1===navigator.userAgent.indexOf("Safari")){for(var e=window.crypto.getRandomValues(new Uint32Array(3)),n="",a=0,t=e.length;a<t;a++)n+=e[a].toString(36);return n}return(Math.random()*(new Date).getTime()).toString(36).replace(/\./g,"")}()+nw.getExtensionFile(n)),e=new FormData;var n,o,i,r,l,s,c,u;e.append("video-filename",t),e.append("video-blob",w),a("Uploading recorded-file to server.");var d=mainNW.domain_rpc+"/nwlib6/uploader_app.php";p=d,g=e,m=function(e){if("upload-ended"===e){var n="/imagenes/"+t;a("ended",n)}else a(e)},f=new XMLHttpRequest,f.onreadystatechange=function(){if(4==f.readyState&&200==f.status)return"success"===f.responseText?void m("upload-ended"):void console.log("request.responseText",f.responseText)},f.upload.onloadstart=function(){m("PHP upload started...")},f.upload.onprogress=function(e){m("PHP upload Progress "+Math.round(e.loaded/e.total*100)+"%")},f.upload.onload=function(){m("progress-about-to-end")},f.upload.onload=function(){m("PHP upload ended. Getting file URL.")},f.upload.onerror=function(e){nw.loadingRemove(),m("PHP upload failed.",e)},f.upload.onabort=function(e){nw.loadingRemove(),m("PHP upload aborted.",e)},f.open("POST",p,!0),f.send(g);var p,g,m,f}(function(e,n){console.log("upload progress",e),console.log("fileDownloadURL",n),"ended"===e?(console.log("Successfully uploaded recorded blob. fileDownloadURL:",n),a.ui.setValue(n),nw.loadingRemove(),void 0!==t&&t()):console.log("upload progress",e)})}}}),nw.Class.define("nw.printer",{extend:nw.object,construct:function(){},destruct:function(){},members:{status:null},statics:{printBluetoothValidate:function(){return"browser"===cordova.platformId?(nw.dialog("Imprimir por bluetooth no está disponible para versión web"),!1):"undefined"!=typeof BTPrinter||(nw.dialog("El plugin BTPrinter no está instalado"),console.error("Error: BTPrinter plugin not detected"),!1)},printBluetooth:function(e){var i=this,r=e.text;if(!i.printBluetoothValidate())return!1;i.printBluetoothList(function(e){console.log("dev",e);var n={id:"openPrinterDevicesBlueTooth",destroyAutomaticOnAccept:!0,destroyAutomaticOnClose:!0,fields:[{icon:"material-icons group_add normal",name:"devices",label:"Dispositivos",placeholder:"Dispositivos",type:"selectBox",required:!0}]};nw.isMobile()&&(n.role="page"),n.role="page",n.showBack=!0,n.setTitle="PrintBluetooth";for(var a=nw.dialog2("<h1>Selecciona el dispositivo bluetooth para imprimir</h1>",function(n){console.log("data",n);var e=n.devices;return i.printBluetoothConnect(e,function(e){nw.loading({text:"Imprimiendo...",textVisible:!0,html:"",theme:"b"}),i.printBluetoothPrintText(r,function(e){nw.dialog("Enviado correctamente a impresora"),nw.loadingRemove(),void 0!==n.callback&&n.callback(e)})}),!0},function(){return nw.back(),!0},n),t={"":"Elija el dispositivo"},o=0;o<e.length;o++)nw.evalueData(e[o])&&0!==e[o]&&(t[e[o]]=e[o]);a.ui.devices.populateSelectFromArray(t)})},printBluetoothList:function(n){if(!this.printBluetoothValidate())return!1;BTPrinter.list(function(e){console.log("Success BTPrinter.list",e),n(e)},function(e){console.log("Error BTPrinter.list",e),n(e)})},printBluetoothStatus:function(n){if(!this.printBluetoothValidate())return!1;BTPrinter.status(function(e){console.log("Success BTPrinter.status",e),n(e)},function(e){console.log("Error BTPrinter.status",e),n(e)})},printBluetoothConnect:function(e,n){if(!this.printBluetoothValidate())return!1;BTPrinter.connect(function(e){console.log("Success BTPrinter.connect",e),n(e)},function(e){console.log("Error BTPrinter.connect",e),n(e)},e)},printBluetoothPrintText:function(e,n){if(!this.printBluetoothValidate())return!1;BTPrinter.setEncoding(function(e){console.log("Success BTPrinter.setEncoding",e)},function(e){console.log("Error BTPrinter.setEncoding",e)},"ISO-8859-7");for(var a=0;a<e.length;a++){var t=e[a];"text"===t.type&&BTPrinter.printTextSizeAlign(function(e){console.log("Success printTextSizeAlign",e)},function(e){console.log("Error printTextSizeAlign",e)},t.value,t.size,t.align),"line"===t.type&&BTPrinter.printTextSizeAlign(function(e){console.log("Success printTextSizeAlign",e)},function(e){console.log("Error printTextSizeAlign",e)},"--------------------------------","0","1")}BTPrinter.printTextSizeAlign(function(e){console.log("Success printTextSizeAlign",e)},function(e){console.log("Error printTextSizeAlign",e)},"\n \nLogimov software\n--------------------------------\nwww.logimov.com\n \n ","0","1"),n()}}}),nw.Class.define("nw.video",{extend:nw.object,construct:function(){this.video=!1,this.context=!1,this.canvas=!1,this.imgSalida=!1},destruct:function(){},members:{start:function(){var n=this;if(navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,!n.validaNav())return!1;navigator.getMedia({video:!0},function(e){n.webCamPermissions(e)},function(){n.unavalable=!1,console.log("La camara no disponible o no tiene permisos")})},validaNav:function(e){return void 0!==navigator.getMedia},webCamPermissions:function(e){var n=this;navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?(n.video.srcObject=e,n.video.play(),n.unavalable=!0):navigator.getUserMedia?(n.video.src=e,n.video.play(),n.unavalable=!0):navigator.webkitGetUserMedia?(n.video.src=window.webkitURL.createObjectURL(e),n.video.play(),n.unavalable=!0):navigator.mozGetUserMedia&&(n.video.srcObject=e,n.video.play(),n.unavalable=!0)},take:function(e){var n=this;n.context.drawImage(n.video,0,0,640,480),n.context.fillStyle="rgba(255,255,255,1)",n.context.font="30px Arial",n.context.fillText(new Date,30,30),n.img=n.canvas.toDataURL("image/png"),console.log(n.img),!1!==n.imgSalida&&n.imgSalida.setAttribute("src",n.img),void 0!==e&&e(n.img)},stop:function(){this.unavalable&&this.video.srcObject.getTracks()[0].stop()},dataURLtoFile:function(e,n){for(var a=e.split(","),t=a[0].match(/:(.*?);/)[1],o=atob(a[1]),i=o.length,r=new Uint8Array(i);i--;)r[i]=o.charCodeAt(i);return new File([r],n,{type:t})}},statics:{}}),app.initialize(),app.debug=!1;