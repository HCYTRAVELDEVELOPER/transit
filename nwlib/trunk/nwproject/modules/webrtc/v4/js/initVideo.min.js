function start(){loadJs("https://meet.jit.si/external_api.js",function(){var e=getGET(),t=getUserData(),a=window.location.host,o=window.location.protocol;startWithVideoMuted=!1,startWithAudioMuted=!1,room=document.body.getAttribute("data-room"),startName=document.body.getAttribute("data-name"),foto=document.body.getAttribute("data-photo"),email=document.body.getAttribute("data-email"),terminal=document.body.getAttribute("data-terminal"),fileRecordingsEnabled=JSON.parse(document.body.getAttribute("data-fileRecordingsEnabled")),urlend=document.body.getAttribute("data-urlend"),mosaico=document.body.getAttribute("data-mosaico"),jwt=document.body.getAttribute("data-jwt"),void 0!==t.nombre&&(startName=t.nombre),void 0!==t.foto_perfil&&(foto=o+"//"+a+"/"+t.foto_perfil),void 0!==t.email&&(email=t.email),void 0!==t.terminal&&(terminal=t.terminal),void 0!==e.terminal&&(terminal=e.terminal),""!==startName&&null!==startName||(startName="Invitado"),openOptions()},!0)}function openOptions(){if(contain=document.querySelector(".containerInit"),"undefined"!=typeof up&&void 0!==up.empresa&&"108"===up.empresa)return openConference(),contain.remove(),!(document.body.style.backgroundImage="none");video=document.getElementById("video"),constraints={audio:!0,video:!0},playCamera(),nameInput=document.createElement("input"),nameInput.className="input input_name",nameInput.placeHolder="Nombre",nameInput.value=startName,contain.appendChild(nameInput),containBtns=document.createElement("div"),containBtns.className="containBtns",contain.appendChild(containBtns),audioOn=document.createElement("button"),audioOn.className="btn audio_on",audioOn.innerHTML="<i class='material-icons'>mic</i>",audioOn.onclick=function(){startWithAudioMuted=!0,audioOn.style.display="none",audioOff.style.display="block",window.localStorage.setItem("videoCallAudioOn_"+room,"false")},containBtns.appendChild(audioOn),audioOff=document.createElement("button"),audioOff.className="btn audio_on",audioOff.innerHTML="<i class='material-icons'>mic_off</i>",audioOff.style="display:none;",audioOff.onclick=function(){startWithAudioMuted=!1,audioOn.style.display="block",audioOff.style.display="none",window.localStorage.setItem("videoCallAudioOn_"+room,"true")},containBtns.appendChild(audioOff),void 0!==window.localStorage.getItem("videoCallAudioOn_"+room)&&"false"===window.localStorage.getItem("videoCallAudioOn_"+room)&&(startWithAudioMuted=!0,audioOn.style.display="none",audioOff.style.display="block"),videoOn=document.createElement("button"),videoOn.className="btn video_on",videoOn.innerHTML="<i class='material-icons'>videocam</i>",videoOn.onclick=function(){validaStreamCamera(function(){offCamera()}),window.localStorage.setItem("videoCallCameraOn_"+room,"false")},containBtns.appendChild(videoOn),videoOff=document.createElement("button"),videoOff.className="btn video_on",videoOff.innerHTML="<i class='material-icons'>videocam_off</i>",videoOff.style="display:none;",videoOff.onclick=function(){startWithVideoMuted=!1,playCamera(),videoOn.style.display="block",videoOff.style.display="none",window.localStorage.setItem("videoCallCameraOn_"+room,"true")},containBtns.appendChild(videoOff),void 0!==window.localStorage.getItem("videoCallCameraOn_"+room)&&"false"===window.localStorage.getItem("videoCallCameraOn_"+room)&&validaStreamCamera(function(){offCamera()});var e=document.createElement("button");e.className="unirse",e.innerHTML="Unirme a la videollamada",e.onclick=function(){enterTo()},contain.appendChild(e)}function enterTo(){contain.innerHTML="<div class='cEftVf'></div>",startName=nameInput.value,openConference(),setTimeout(function(){contain.remove(),document.body.style.backgroundImage="none"},2e4)}function validaStreamCamera(e){"undefined"==typeof localstream?setTimeout(function(){validaStreamCamera(e)},500):e()}function offCamera(){localstream.getVideoTracks()[0].stop(),startWithVideoMuted=!0,videoOn.style.display="none",videoOff.style.display="block"}function playCamera(){try{navigator.mediaDevices.getUserMedia(constraints).then(function(e){localstream=e,video.srcObject=e}).catch(function(e){console.log("error",e)})}catch(e){console.log(e)}}function getUserData(){return localStorage}function openConference(){var e=document.querySelector("html").offsetHeight,t=document.querySelector("#jitsi-container"),e={roomName:room,width:"100%",parentNode:t,height:e,moderator:!1,interfaceConfigOverwrite:{filmStripOnly:!1},configOverwrite:{remoteVideoMenu:{disableKick:!1},useNewBandwidthAllocationStrategy:!0,startBitrate:"800",disableAudioLevels:!1,stereo:!1,forceJVB121Ratio:-1,enableTalkWhileMuted:!0,mouseMoveCallbackInterval:1e3,enableNoAudioDetection:!0,enableNoisyMicDetection:!0,enableClosePage:!0,disableLocalVideoFlip:!1,transcribingEnabled:!0,startAudioMuted:9,startVideoMuted:9,prejoinPageEnabled:!1,openBridgeChannel:!0,enableForcedReload:!0,liveStreamingEnabled:!0,fileRecordingsServiceEnabled:!0,fileRecordingsServiceSharingEnabled:!0,requireDisplayName:!0,enableWelcomePage:!0,fileRecordingsEnabled:fileRecordingsEnabled,startWithVideoMuted:startWithVideoMuted,startWithAudioMuted:startWithAudioMuted,startScreenSharing:!1},userInfo:{email:email,displayName:startName}};e.jwt=jwt;e=new JitsiMeetExternalAPI("meet.gruponw.com",e);e.executeCommand("subject","Sala de trabajo"),e.executeCommand("avatarUrl",foto),e.executeCommand("displayName",startName),e.executeCommand("fileRecordingsEnabled",fileRecordingsEnabled),e.getIFrame().onload=function(){var e=document.createElement("div");e.className="btn_chatNw";var t=document.createElement("div");t.className="chat-header",t.innerHTML='<div class="chat-close"><div class="jitsi-icon "><svg height="24" width="24" viewBox="0 0 24 24"><path d="M18.984 6.422L13.406 12l5.578 5.578-1.406 1.406L12 13.406l-5.578 5.578-1.406-1.406L10.594 12 5.016 6.422l1.406-1.406L12 10.594l5.578-5.578z"></path></svg></div></div>';var a=document.createElement("iframe");a.className="chatNw",a.scrolling="no";var o="";""!=foto&&(o="&setUserPhoto="+foto);var n="";void 0!==window.localStorage.getItem("idUserChatFrame_"+room)&&null!==window.localStorage.getItem("idUserChatFrame_"+room)?n=window.localStorage.getItem("idUserChatFrame_"+room):(n=Math.floor(899*Math.random())+1,window.localStorage.setItem("idUserChatFrame_"+room,n)),a.src="/nwlib6/nwproject/modules/webrtc/v6/chat/index.html?room="+room+"&setUserID="+n+"&saveToken=false&setUserName="+startName+o+"&terminal="+terminal,t.onclick=function(){a.classList.remove("showChatNw"),t.classList.remove("showChatNw")},e.onclick=function(){a.classList.add("showChatNw"),t.classList.add("showChatNw")};o=document.querySelector("body");o.appendChild(e),o.appendChild(t),o.appendChild(a)},""!==urlend&&e.addEventListener("readyToClose",function(){window.open(urlend,"_parent")}),"true"===mosaico&&e.executeCommand("toggleTileView");e=window.location.host;"192.168.10.19"!==e&&"localhost"!==e&&"localhost:8383"!==e&&"app.taskenter.com"!==e&&"taskenter.com"!==e||(console.log("Run firebase in"),appTask.init())}function getGET(e){var t=document.location.href;void 0!==e&&(t=e);t=t.split("?")[1];if(null==t)return!1;for(var a=t.split("&"),o={},n=0,i=a.length;n<i;n++){var d=a[n].split("=");o[d[0]]=unescape(decodeURI(d[1]))}return o}function loadJs(e,t,a){try{var o="async";void 0===a&&(a=!0),a||(o="");var n=e.replace(/\//gi,"");n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/\:/gi,"")).replace(/\?/gi,"")).replace(/\=/gi,"")).replace(/\./gi,"")).replace(/\,/gi,"")).replace(/\&/gi,"")).replace(/\=/gi,"")).replace(/\_/gi,"")).replace(/\-/gi,"")).replace(/\</gi,"")).replace(".","");var i=document.createElement("script");i.type="text/javascript",i.id=n,i.className=n,i.charset="UTF-8",i.async=o,i.src=e,evalueData(document.querySelector("."+n))?evalueData(t)&&t():(i.onload=function(){evalueData(t)&&t()},!0===a?document.getElementsByTagName("head")[0].appendChild(i):$("body").append(i))}catch(e){alert("error in loadJS",e)}}function evalueData(e,t){if(void 0===e)return!1;if(void 0===e)return!1;if(null===e)return!1;if("null"===e)return!1;if(!1===e)return!1;var a=!0;return"undefined"!=typeof permiteCeroException&&!1===permiteCeroException&&(a=!1),(!a||0!=e&&null!=e)&&""!==e}"loading"!==document.readyState?validaAllReady():document.addEventListener("DOMContentLoaded",function(){start()});