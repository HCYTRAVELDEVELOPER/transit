<?phpif (session_id() == "") {//  ini_set('session.cookie_domain', '.gruponw.com');    session_start();}if (!isset($_SESSION["usuario"])) {    echo "Sesión Inválida. Inicie sesión..";    return;}$ruta_carpeta = "/nwlib" . master::getNwlibVersion() . "/modulos/";$foto = "";$user_main = $_SESSION["usuario"];$db = NWDatabase::database();$ca = new NWDbQuery($db);$si = session::getInfo();$usuario_frame = $si["usuario"];$mail_frame = $si["email"];if (!isset($si["perfil"])) {    return;}if (isset($si["foto"])) {    if ($si["foto"] != "") {        $foto = "style='background-image: url(" . $si["foto"] . ");'";    }}$img_fondo = "";$img_logo = "";$ca->prepareSelect("nw_init_settings", "*", "empresa=:empresa");$ca->bindValue(":empresa", $_SESSION["empresa"]);if (!$ca->exec()) {    echo $ca->lastErrorText();    return;}if ($ca->size() > 0) {    $ca->next();    $ra = $ca->assoc();    $img_fondo = $ra["fondo_bienvenida"];    $img_logo = $ra["logo"];}function Inbox() {    $db = NWDatabase::database();    $ca = new NWDbQuery($db);    $ca->prepareSelect("nw_chat_private", "*", "usuario_recibe=:usuario and leido_recibe='NO'");    $ca->bindValue(":usuario", $_SESSION["usuario"]);    if (!$ca->exec()) {        echo "errores" . $ca->lastErrorText();        return;    }    if ($ca->size() != 0) {        echo "<span>" . $ca->size() . "</span>";        echo "<div class='show_dats_left'>";        for ($i = 0; $i < $ca->size(); $i++) {            $ca->next();            $r = $ca->assoc();            echo "<p>" . $r["usuario_envia"] . ": " . $r["mensaje"] . "</p>";        }        echo "</div>";    }    if ($ca->size() == 0) {        echo "<span style='background: transparent;'>0</span>";    }}function notes() {    $db = NWDatabase::database();    $ca = new NWDbQuery($db);    $ca->prepareSelect("nw_notes", "id", "usuario=:usuario");    $ca->bindValue(":usuario", $_SESSION["usuario"]);    if (!$ca->exec()) {        echo "errores" . $ca->lastErrorText();        return;    }    if ($ca->size() != 0) {        echo "<span>" . $ca->size() . "</span>";    }    if ($ca->size() == 0) {        echo "<span style='background: transparent;'>0</span>";    }}function tareas() {    }function right($mostrar_notificaciones) {    include 'dashboard/right.php';}function favorites() {    $db = NWDatabase::database();    $ca = new NWDbQuery($db);    $ca->prepareSelect("nw_favoritos a left join menu b on (a.modulo=b.modulo)", "a.modulo, b.callback, b.nombre", "a.usuario=:usuario and a.empresa=:empresa");    $ca->bindValue(":usuario", $_SESSION["usuario"]);    $ca->bindValue(":empresa", $_SESSION["empresa"]);    if (!$ca->exec()) {        echo "errores" . $ca->lastErrorText();        return;    }    if ($ca->size() == 0) {        echo "No hay favoritos";        return;    }    for ($i = 0; $i < $ca->size(); $i++) {        $ca->next();        $r = $ca->assoc();        $part = explode("createMaster", $r['callback']);        if ($part[0] != "") {            echo " <div id='contend_modules_div' class='contend_modules_div contend_modules_divFavorite'                 onclick=\"parent.qxnw.main.openAnyFunction('{$r['callback']}');\">        <div class='img_contend_modules_div img_contend_modules_divFavorite'></div>        {$r['nombre']}        <div class='closeDelete' onclick=\"deleteFavorite({$r['modulo']});\">X</div>    </div>";        }    }}?> <!-- Start of app.ringow.com nwchat Widget script --><!--<script>    /*<![CDATA[*/    document.addEventListener('DOMContentLoaded', function () {        __selfNwChat = true;        __selfNwChatMaster = true;        var js = document.createElement('script');        js.type = 'text/javascript';        js.charset = 'UTF-8';        js.src = 'https://app.ringow.com/nwlib6/nwproject/modules/nw_chat2/js/nwchat.js?host=app.ringow.com&key=66480&id=2&videollamada=true&llamadavoz=true&formContacto=true';        js.id = 'nwchat2';        js.async = true;        document.body.appendChild(js);    });    /*]]>*/</script>--><!-- End of app.ringow.com nwchat Widget script --><link rel="stylesheet" type="text/css" href="/nwlib<?php echo master::getNwlibVersion() ?>/dashboard/css/styleUserBienvenido.css" /><style type="text/css">    body {        background-image: url(<?php echo $img_fondo; ?>);    }</style><script src="/nwlib<?php echo master::getNwlibVersion(); ?>/dashboard/js/main.js" type="text/javascript"></script><div class="div_home">    <?php    if ($configImg["usar_segunda_vista_como_home"] == "SI") {        ?>        <script>            document.addEventListener("DOMContentLoaded", loadXMLDoc(0));        </script>        <style>            .contend_sliderEnc, .divNewsNwEnc {                display: block!important;            }        </style>        <div class="div_home_left">            <div class="div_home_left_into">                <div class="qxnw_logo_cod">                    <p>                        QXNW <span style="font-size: 12px;">Software</span></p>                </div>                <div class="box_users_apps buttonBuscar" onclick="loadNw();">                    Buscar en todo el sistema                </div>            </div>        </div>        <div class="img_home" id="contend_modules">            <div class="contend_modules">                <?php////////////////////////////////////////////////////////botones módulos////////////////////////////////                print getButtonModules();                ?><!--                <div class='containerBoxM div_salirMbox containerBoxM_home'><div class='contend_modules_div div_salir div_salirHome contend_modules_divEnc' onclick="parent.qxnw.main.slotSalir();">                        <div class='img_contend_modules_div img_salir img_contend_modules_divEnc'></div>                        Salir                     </div>                </div>-->            </div>        </div>        <?php    } else {        ?>        <div class="img_home" id="contend_modules">            <div class="contend_modules">                <?php///////////////////////////////////////////////FOTO / SALUDO / MÓDULOS MÁS USADOS / NOTICIAS ////////////////////////////////////                getSaludoHomeUserAndNews($configImg);////////////////////////////////////////////////////////botones módulos////////////////////////////////                print getButtonModules();                ?><!--                <div class='containerBoxM div_salirMbox containerBoxM_home'><div class='contend_modules_div div_salir div_salirHome contend_modules_divEnc' onclick="parent.qxnw.main.slotSalir();">                        <div class='img_contend_modules_div img_salir img_contend_modules_divEnc'></div>                        Salir                     </div>                </div>-->            </div>            <?php//            print modulosHome("");            ?>        </div>        <?php    }    ?>    <div id="myDiv" class="loadOthers"></div>    <?php    if ($configImg["menu_segunda_vista_horizontal"] == "SI") {        ?>        <link rel="stylesheet" type="text/css" href="/nwlib<?php echo master::getNwlibVersion() ?>/dashboard/css/menu_segunda_vista_horizontal.css" />        <script>            document.addEventListener("DOMContentLoaded", widthMenuSecondView);        </script>        <?php    }    ?></div><div class="credits" style="display: none;">    <a target="_blank" href="<?php echo $protocolo; ?>://www.netwoods.net" >        Powered by <span>Net</span><span>woods</span>.net    </a></div><div id="soundStart"></div>